{"version":3,"file":"PublicationDetailPage-B1P7ATRM.js","sources":["../../src/components/Distribution/ShareLinksModal.vue","../../src/pages/PublicationDetailPage.vue"],"sourcesContent":["<template>\r\n  <Modal :is-open=\"isOpen\" @close=\"$emit('close')\" title=\"Share Links\">\r\n    <template #content>\r\n      <div class=\"share-links-modal\">\r\n        <!-- Create New Link -->\r\n        <div class=\"share-links-modal__create\">\r\n          <Button variant=\"primary\" @click=\"showCreateForm = !showCreateForm\">\r\n            <svg\r\n              class=\"w-5 h-5\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M12 4v16m8-8H4\"\r\n              />\r\n            </svg>\r\n            Create New Link\r\n          </Button>\r\n\r\n          <!-- Create Form -->\r\n          <div v-if=\"showCreateForm\" class=\"share-links-modal__form\">\r\n            <div class=\"share-links-modal__form-group\">\r\n              <label class=\"share-links-modal__label\">Expires At (optional)</label>\r\n              <input\r\n                v-model=\"newLinkExpiresAt\"\r\n                type=\"datetime-local\"\r\n                class=\"share-links-modal__input\"\r\n              />\r\n            </div>\r\n            <div class=\"share-links-modal__form-group\">\r\n              <label class=\"share-links-modal__label\">Password (optional)</label>\r\n              <input\r\n                v-model=\"newLinkPassword\"\r\n                type=\"password\"\r\n                class=\"share-links-modal__input\"\r\n                placeholder=\"Leave empty for no password\"\r\n              />\r\n            </div>\r\n            <div class=\"share-links-modal__form-group\">\r\n              <label class=\"share-links-modal__label\">\r\n                <input\r\n                  v-model=\"newLinkPermissions.view\"\r\n                  type=\"checkbox\"\r\n                  class=\"share-links-modal__checkbox\"\r\n                />\r\n                Allow View\r\n              </label>\r\n              <label class=\"share-links-modal__label\">\r\n                <input\r\n                  v-model=\"newLinkPermissions.download\"\r\n                  type=\"checkbox\"\r\n                  class=\"share-links-modal__checkbox\"\r\n                />\r\n                Allow Download\r\n              </label>\r\n            </div>\r\n            <div class=\"share-links-modal__form-actions\">\r\n              <Button variant=\"primary\" @click=\"handleCreateLink\">Create</Button>\r\n              <Button variant=\"secondary\" @click=\"showCreateForm = false\">Cancel</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Share Links List -->\r\n        <div v-if=\"shareLinks.length > 0\" class=\"share-links-modal__list\">\r\n          <div\r\n            v-for=\"link in shareLinks\"\r\n            :key=\"link.id\"\r\n            class=\"share-links-modal__item\"\r\n          >\r\n            <div class=\"share-links-modal__item-info\">\r\n              <div class=\"share-links-modal__item-url\">\r\n                <input\r\n                  :value=\"link.url\"\r\n                  readonly\r\n                  class=\"share-links-modal__url-input\"\r\n                  @click=\"handleCopyUrl(link.url)\"\r\n                />\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  size=\"sm\"\r\n                  @click=\"handleCopyUrl(link.url)\"\r\n                  aria-label=\"Copy link\"\r\n                >\r\n                  <svg\r\n                    class=\"w-4 h-4\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    aria-hidden=\"true\"\r\n                  >\r\n                    <path\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      stroke-width=\"2\"\r\n                      d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"\r\n                    />\r\n                  </svg>\r\n                </Button>\r\n              </div>\r\n              <div class=\"share-links-modal__item-meta\">\r\n                <span v-if=\"link.expires_at\" class=\"share-links-modal__meta-item\">\r\n                  Expires: {{ formatDate(link.expires_at) }}\r\n                </span>\r\n                <span v-if=\"link.password_protected\" class=\"share-links-modal__meta-item\">\r\n                  Password Protected\r\n                </span>\r\n                <span class=\"share-links-modal__meta-item\">\r\n                  Permissions: {{ link.permissions.view ? 'View' : '' }}\r\n                  {{ link.permissions.download ? 'Download' : '' }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              variant=\"danger\"\r\n              size=\"sm\"\r\n              @click=\"handleDeleteLink(link.id)\"\r\n              aria-label=\"Delete link\"\r\n            >\r\n              <svg\r\n                class=\"w-4 h-4\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n                aria-hidden=\"true\"\r\n              >\r\n                <path\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                  stroke-width=\"2\"\r\n                  d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n                />\r\n              </svg>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Empty State -->\r\n        <div v-else class=\"share-links-modal__empty\">\r\n          <p>No share links created yet</p>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { useUIStore } from '@/stores/uiStore'\r\nimport { distributionService } from '@/services/distributionService'\r\nimport Modal from '@/components/Common/Modal.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\nimport type { ShareLink } from '@/types/api'\r\n\r\ninterface Props {\r\n  publicationId: number\r\n  shareLinks: ShareLink[]\r\n  isOpen?: boolean\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  isOpen: false\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  close: []\r\n  'link-created': []\r\n  'link-deleted': []\r\n}>()\r\n\r\nconst uiStore = useUIStore()\r\nconst showCreateForm = ref(false)\r\nconst newLinkExpiresAt = ref('')\r\nconst newLinkPassword = ref('')\r\nconst newLinkPermissions = ref({\r\n  view: true,\r\n  download: false\r\n})\r\n\r\nconst handleCreateLink = async (): Promise<void> => {\r\n  try {\r\n    await distributionService.createShareLink(props.publicationId, {\r\n      expires_at: newLinkExpiresAt.value || undefined,\r\n      password: newLinkPassword.value || undefined,\r\n      permissions: newLinkPermissions.value\r\n    })\r\n\r\n    showCreateForm.value = false\r\n    newLinkExpiresAt.value = ''\r\n    newLinkPassword.value = ''\r\n    newLinkPermissions.value = { view: true, download: false }\r\n\r\n    emit('link-created')\r\n    uiStore.addNotification({\r\n      type: 'success',\r\n      title: 'Success',\r\n      message: 'Share link created successfully'\r\n    })\r\n  } catch (err) {\r\n    uiStore.addNotification({\r\n      type: 'error',\r\n      title: 'Error',\r\n      message: 'Failed to create share link'\r\n    })\r\n  }\r\n}\r\n\r\nconst handleDeleteLink = async (linkId: number): Promise<void> => {\r\n  try {\r\n    await distributionService.deleteShareLink(props.publicationId, linkId)\r\n    emit('link-deleted')\r\n    uiStore.addNotification({\r\n      type: 'success',\r\n      title: 'Success',\r\n      message: 'Share link deleted successfully'\r\n    })\r\n  } catch (err) {\r\n    uiStore.addNotification({\r\n      type: 'error',\r\n      title: 'Error',\r\n      message: 'Failed to delete share link'\r\n    })\r\n  }\r\n}\r\n\r\nconst handleCopyUrl = async (url: string): Promise<void> => {\r\n  try {\r\n    await navigator.clipboard.writeText(url)\r\n    uiStore.addNotification({\r\n      type: 'success',\r\n      title: 'Success',\r\n      message: 'Link copied to clipboard'\r\n    })\r\n  } catch (err) {\r\n    uiStore.addNotification({\r\n      type: 'error',\r\n      title: 'Error',\r\n      message: 'Failed to copy link'\r\n    })\r\n  }\r\n}\r\n\r\nconst formatDate = (dateString: string): string => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"css\">\r\n.share-links-modal {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.share-links-modal__create {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n.share-links-modal__form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  padding: 16px;\r\n  background: var(--color-bg-1, #f9fafb);\r\n  border-radius: var(--radius-base, 8px);\r\n}\r\n\r\n.share-links-modal__form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.share-links-modal__label {\r\n  font-size: var(--font-size-sm, 12px);\r\n  font-weight: 500;\r\n  color: var(--color-text, #111827);\r\n}\r\n\r\n.share-links-modal__input {\r\n  padding: 8px 12px;\r\n  border: 1px solid var(--color-border, #e5e7eb);\r\n  border-radius: var(--radius-base, 8px);\r\n  font-size: var(--font-size-base, 14px);\r\n}\r\n\r\n.share-links-modal__checkbox {\r\n  margin-right: 8px;\r\n}\r\n\r\n.share-links-modal__form-actions {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.share-links-modal__list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.share-links-modal__item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 16px;\r\n  padding: 16px;\r\n  background: var(--color-surface, #ffffff);\r\n  border: 1px solid var(--color-border, #e5e7eb);\r\n  border-radius: var(--radius-base, 8px);\r\n}\r\n\r\n.share-links-modal__item-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.share-links-modal__item-url {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.share-links-modal__url-input {\r\n  flex: 1;\r\n  padding: 8px 12px;\r\n  border: 1px solid var(--color-border, #e5e7eb);\r\n  border-radius: var(--radius-base, 8px);\r\n  font-size: var(--font-size-sm, 12px);\r\n  cursor: pointer;\r\n}\r\n\r\n.share-links-modal__item-meta {\r\n  display: flex;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.share-links-modal__meta-item {\r\n  font-size: var(--font-size-xs, 11px);\r\n  color: var(--color-text-secondary, #6b7280);\r\n}\r\n\r\n.share-links-modal__empty {\r\n  padding: 32px;\r\n  text-align: center;\r\n  color: var(--color-text-secondary, #6b7280);\r\n}\r\n</style>\r\n\r\n\r\n\r\n","<template>\r\n  <div class=\"publication-detail-page\">\r\n    <!-- Loading State -->\r\n    <div v-if=\"isLoading\" class=\"publication-detail-page__loading\" role=\"status\" aria-live=\"polite\">\r\n      <div class=\"publication-detail-page__skeleton\">\r\n        <div class=\"publication-detail-page__skeleton-header\" />\r\n        <div class=\"publication-detail-page__skeleton-content\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Error State -->\r\n    <div\r\n      v-else-if=\"error && !publication\"\r\n      class=\"publication-detail-page__error\"\r\n      role=\"alert\"\r\n    >\r\n      <p class=\"publication-detail-page__error-message\">{{ error }}</p>\r\n      <Button variant=\"primary\" @click=\"fetchPublication\">\r\n        Try Again\r\n      </Button>\r\n    </div>\r\n\r\n    <!-- Publication Content -->\r\n    <div v-else-if=\"publication\" class=\"publication-detail-page__content\">\r\n      <!-- Header Section -->\r\n      <div class=\"publication-detail-page__header\">\r\n        <!-- Back Button -->\r\n        <div class=\"publication-detail-page__back\">\r\n          <Button\r\n            variant=\"secondary\"\r\n            size=\"sm\"\r\n            @click=\"handleBack\"\r\n            aria-label=\"Go back\"\r\n          >\r\n            <svg\r\n              class=\"w-5 h-5\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M15 19l-7-7 7-7\"\r\n              />\r\n            </svg>\r\n            Back\r\n          </Button>\r\n        </div>\r\n\r\n        <div class=\"publication-detail-page__header-main\">\r\n          <!-- Thumbnail -->\r\n          <div class=\"publication-detail-page__thumbnail\">\r\n            <img\r\n              v-if=\"thumbnailUrl\"\r\n              :src=\"thumbnailUrl\"\r\n              :alt=\"`${publication.title} thumbnail`\"\r\n              class=\"publication-detail-page__thumbnail-img\"\r\n            />\r\n            <div\r\n              v-else\r\n              class=\"publication-detail-page__thumbnail-placeholder\"\r\n              aria-label=\"No thumbnail\"\r\n            >\r\n              <svg\r\n                class=\"w-12 h-12 text-neutral-400\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n                aria-hidden=\"true\"\r\n              >\r\n                <path\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                  stroke-width=\"2\"\r\n                  d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Publication Info -->\r\n          <div class=\"publication-detail-page__info\">\r\n            <h1 class=\"publication-detail-page__title\">{{ publication.title || 'Untitled Publication' }}</h1>\r\n            <p\r\n              v-if=\"publication.description\"\r\n              class=\"publication-detail-page__description\"\r\n            >\r\n              {{ publication.description }}\r\n            </p>\r\n\r\n            <!-- Metadata -->\r\n            <div class=\"publication-detail-page__metadata\">\r\n              <div class=\"publication-detail-page__metadata-item\">\r\n                <span class=\"publication-detail-page__metadata-label\">Status:</span>\r\n                <Badge :variant=\"statusVariant\">{{ statusLabel }}</Badge>\r\n              </div>\r\n              <div class=\"publication-detail-page__metadata-item\">\r\n                <span class=\"publication-detail-page__metadata-label\">Created:</span>\r\n                <span class=\"publication-detail-page__metadata-value\">\r\n                  {{ formatDate(publication.created_date) }}\r\n                </span>\r\n              </div>\r\n              <div\r\n                v-if=\"publication.updated_date\"\r\n                class=\"publication-detail-page__metadata-item\"\r\n              >\r\n                <span class=\"publication-detail-page__metadata-label\">Updated:</span>\r\n                <span class=\"publication-detail-page__metadata-value\">\r\n                  {{ formatDate(publication.updated_date) }}\r\n                </span>\r\n              </div>\r\n              <!-- Schedule Information -->\r\n              <div\r\n                v-if=\"publication.schedule\"\r\n                class=\"publication-detail-page__metadata-item\"\r\n              >\r\n                <span class=\"publication-detail-page__metadata-label\">Schedule:</span>\r\n                <span class=\"publication-detail-page__metadata-value\">\r\n                  {{ formatSchedule(publication.schedule) }}\r\n                </span>\r\n              </div>\r\n              <!-- Channels Display -->\r\n              <div\r\n                v-if=\"publication.channels && publication.channels.length > 0\"\r\n                class=\"publication-detail-page__metadata-item\"\r\n              >\r\n                <span class=\"publication-detail-page__metadata-label\">Channels:</span>\r\n                <div class=\"publication-detail-page__channels\">\r\n                  <Badge\r\n                    v-for=\"channel in publication.channels\"\r\n                    :key=\"channel.id\"\r\n                    :variant=\"channel.status === 'active' ? 'success' : 'info'\"\r\n                    size=\"sm\"\r\n                    class=\"publication-detail-page__channel-badge\"\r\n                  >\r\n                    <svg\r\n                      v-if=\"channel.icon\"\r\n                      class=\"w-4 h-4\"\r\n                      fill=\"currentColor\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      aria-hidden=\"true\"\r\n                    >\r\n                      <use :href=\"`#icon-${channel.icon}`\" />\r\n                    </svg>\r\n                    {{ channel.name }}\r\n                  </Badge>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Actions -->\r\n        <div class=\"publication-detail-page__actions\">\r\n          <Button\r\n            variant=\"secondary\"\r\n            @click=\"handleShare\"\r\n            aria-label=\"Share publication\"\r\n          >\r\n            <svg\r\n              class=\"w-5 h-5\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\"\r\n              />\r\n            </svg>\r\n            Share\r\n          </Button>\r\n\r\n          <Button\r\n            v-if=\"canEdit\"\r\n            variant=\"secondary\"\r\n            @click=\"handleEdit\"\r\n            aria-label=\"Edit publication\"\r\n          >\r\n            <svg\r\n              class=\"w-5 h-5\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\r\n              />\r\n            </svg>\r\n            Edit\r\n          </Button>\r\n\r\n          <Button\r\n            v-if=\"canDelete\"\r\n            variant=\"danger\"\r\n            @click=\"showDeleteModal = true\"\r\n            aria-label=\"Delete publication\"\r\n          >\r\n            <svg\r\n              class=\"w-5 h-5\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n              />\r\n            </svg>\r\n            Delete\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Metrics Section -->\r\n      <Card class=\"publication-detail-page__metrics\" variant=\"elevated\">\r\n        <template #header>\r\n          <div class=\"publication-detail-page__metrics-header\">\r\n            <h2 class=\"publication-detail-page__metrics-title\">Metrics</h2>\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              @click=\"handleViewAnalytics\"\r\n              aria-label=\"View full analytics\"\r\n            >\r\n              View Full Analytics\r\n            </Button>\r\n          </div>\r\n        </template>\r\n\r\n        <div class=\"publication-detail-page__metrics-grid\">\r\n          <div class=\"publication-detail-page__metric\">\r\n            <span class=\"publication-detail-page__metric-label\">Views</span>\r\n            <span class=\"publication-detail-page__metric-value\">\r\n              {{ metrics.views || 0 }}\r\n            </span>\r\n          </div>\r\n          <div class=\"publication-detail-page__metric\">\r\n            <span class=\"publication-detail-page__metric-label\">Downloads</span>\r\n            <span class=\"publication-detail-page__metric-value\">\r\n              {{ metrics.downloads || 0 }}\r\n            </span>\r\n          </div>\r\n          <div class=\"publication-detail-page__metric\">\r\n            <span class=\"publication-detail-page__metric-label\">Shares</span>\r\n            <span class=\"publication-detail-page__metric-value\">\r\n              {{ metrics.shares || 0 }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      <!-- Assets Section -->\r\n      <Card class=\"publication-detail-page__assets\" variant=\"elevated\">\r\n        <template #header>\r\n          <div class=\"publication-detail-page__assets-header\">\r\n            <h2 class=\"publication-detail-page__assets-title\">\r\n              Assets ({{ assets.length }})\r\n            </h2>\r\n            <Button\r\n              v-if=\"assets.length > 0\"\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              @click=\"handleDownloadAll\"\r\n              aria-label=\"Download all assets\"\r\n            >\r\n              <svg\r\n                class=\"w-4 h-4\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n                aria-hidden=\"true\"\r\n              >\r\n                <path\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                  stroke-width=\"2\"\r\n                  d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n                />\r\n              </svg>\r\n              Download All\r\n            </Button>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- Empty State -->\r\n        <div\r\n          v-if=\"assets.length === 0 && !isLoading\"\r\n          class=\"publication-detail-page__assets-empty\"\r\n          role=\"status\"\r\n        >\r\n          <svg\r\n            class=\"w-16 h-16 text-neutral-400\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n            />\r\n          </svg>\r\n          <p class=\"publication-detail-page__assets-empty-text\">No assets in this publication</p>\r\n        </div>\r\n\r\n        <!-- Assets Grid -->\r\n        <div\r\n          v-else\r\n          class=\"publication-detail-page__assets-grid\"\r\n          role=\"grid\"\r\n          aria-label=\"Publication assets\"\r\n        >\r\n          <div\r\n            v-for=\"asset in assets\"\r\n            :key=\"asset.id\"\r\n            class=\"publication-detail-page__asset-card\"\r\n            role=\"gridcell\"\r\n          >\r\n            <div class=\"publication-detail-page__asset-thumbnail\">\r\n              <img\r\n                v-if=\"asset.thumbnail_url\"\r\n                :src=\"asset.thumbnail_url\"\r\n                :alt=\"asset.label || asset.filename || 'Asset thumbnail'\"\r\n                class=\"publication-detail-page__asset-thumbnail-img\"\r\n                @click=\"handleAssetClick(asset.id)\"\r\n              />\r\n              <div\r\n                v-else\r\n                class=\"publication-detail-page__asset-thumbnail-placeholder\"\r\n                @click=\"handleAssetClick(asset.id)\"\r\n              >\r\n                <svg\r\n                  class=\"w-8 h-8 text-neutral-400\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  aria-hidden=\"true\"\r\n                >\r\n                  <path\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                    stroke-width=\"2\"\r\n                    d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n\r\n              <!-- Asset Actions Overlay -->\r\n              <div class=\"publication-detail-page__asset-actions\">\r\n                <Button\r\n                  variant=\"primary\"\r\n                  size=\"sm\"\r\n                  @click.stop=\"handleAssetDownload(asset.id)\"\r\n                  aria-label=\"Download asset\"\r\n                >\r\n                  <svg\r\n                    class=\"w-4 h-4\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    aria-hidden=\"true\"\r\n                  >\r\n                    <path\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      stroke-width=\"2\"\r\n                      d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n                    />\r\n                  </svg>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"publication-detail-page__asset-info\">\r\n              <h3\r\n                class=\"publication-detail-page__asset-name\"\r\n                @click=\"handleAssetClick(asset.id)\"\r\n              >\r\n                {{ asset.label || asset.filename || 'Unnamed Asset' }}\r\n              </h3>\r\n              <p\r\n                v-if=\"asset.size\"\r\n                class=\"publication-detail-page__asset-size\"\r\n              >\r\n                {{ formatBytes(asset.size) }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Loading Assets -->\r\n        <div\r\n          v-if=\"isLoading\"\r\n          class=\"publication-detail-page__assets-loading\"\r\n          role=\"status\"\r\n          aria-live=\"polite\"\r\n        >\r\n          <div\r\n            v-for=\"i in 6\"\r\n            :key=\"i\"\r\n            class=\"publication-detail-page__assets-skeleton\"\r\n            :aria-label=\"`Loading asset ${i}`\"\r\n          />\r\n        </div>\r\n      </Card>\r\n    </div>\r\n\r\n    <!-- Delete Confirmation Modal -->\r\n    <DeleteConfirmModal\r\n      v-if=\"showDeleteModal\"\r\n      :title=\"`Delete publication: ${publication?.title}`\"\r\n      message=\"Are you sure you want to delete this publication? This action cannot be undone.\"\r\n      @confirm=\"handleDelete\"\r\n      @cancel=\"showDeleteModal = false\"\r\n    />\r\n\r\n    <!-- Share Links Modal -->\r\n    <ShareLinksModal\r\n      v-if=\"showShareLinksModal && publication\"\r\n      :publication-id=\"publication.id\"\r\n      :is-open=\"showShareLinksModal\"\r\n      :share-links=\"shareLinks\"\r\n      @close=\"showShareLinksModal = false\"\r\n      @link-created=\"handleShareLinkCreated\"\r\n      @link-deleted=\"handleShareLinkDeleted\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/authStore'\r\nimport { useDistributionStore } from '@/stores/distributionStore'\r\nimport { useUIStore } from '@/stores/uiStore'\r\nimport { distributionService } from '@/services/distributionService'\r\nimport Card from '@/components/Common/Card.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\nimport Badge from '@/components/Common/Badge.vue'\r\nimport DeleteConfirmModal from '@/components/admin/DeleteConfirmModal.vue'\r\nimport ShareLinksModal from '@/components/Distribution/ShareLinksModal.vue'\r\nimport type { Publication, ShareLink } from '@/types/api'\r\n\r\n// Hooks\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\nconst distributionStore = useDistributionStore()\r\nconst uiStore = useUIStore()\r\n\r\n// State\r\nconst publication = ref<Publication | null>(null)\r\nconst shareLinks = ref<ShareLink[]>([])\r\nconst isLoading = ref(false)\r\nconst error = ref<string | null>(null)\r\nconst showDeleteModal = ref(false)\r\nconst showShareLinksModal = ref(false)\r\n\r\n// Computed\r\nconst publicationId = computed(() => {\r\n  const id = route.params.id\r\n  if (typeof id === 'string') {\r\n    const parsed = parseInt(id)\r\n    return isNaN(parsed) ? 0 : parsed\r\n  }\r\n  if (Array.isArray(id) && id.length > 0) {\r\n    const parsed = parseInt(id[0] || '0')\r\n    return isNaN(parsed) ? 0 : parsed\r\n  }\r\n  return 0\r\n})\r\n\r\nconst assets = computed(() => {\r\n  return publication.value?.assets || []\r\n})\r\n\r\nconst metrics = computed(() => {\r\n  if (!publication.value?.analytics) {\r\n    return {\r\n      views: 0,\r\n      downloads: 0,\r\n      shares: 0\r\n    }\r\n  }\r\n  const analytics = publication.value.analytics\r\n  return {\r\n    views: analytics?.views || 0,\r\n    downloads: analytics?.downloads || 0,\r\n    shares: analytics?.shares || 0\r\n  }\r\n})\r\n\r\nconst canEdit = computed(() => {\r\n  if (!publication.value || !authStore.user) return false\r\n  const isOwner = publication.value.created_by_id === authStore.user.id\r\n  const hasPermission = authStore.hasPermission('distribution.publication_edit')\r\n  return isOwner && hasPermission\r\n})\r\n\r\nconst canDelete = computed(() => {\r\n  if (!publication.value || !authStore.user) return false\r\n  const isOwner = publication.value.created_by_id === authStore.user.id\r\n  const hasPermission = authStore.hasPermission('distribution.publication_delete')\r\n  return isOwner && hasPermission\r\n})\r\n\r\nconst statusVariant = computed(() => {\r\n  if (!publication.value) return 'info'\r\n  switch (publication.value.status) {\r\n    case 'published':\r\n      return 'success'\r\n    case 'scheduled':\r\n      return 'info'\r\n    case 'draft':\r\n      return 'warning'\r\n    case 'archived':\r\n      return 'info'\r\n    default:\r\n      return 'info'\r\n  }\r\n})\r\n\r\nconst statusLabel = computed(() => {\r\n  if (!publication.value) return 'Unknown'\r\n  return publication.value.status.charAt(0).toUpperCase() + publication.value.status.slice(1)\r\n})\r\n\r\nconst thumbnailUrl = computed(() => {\r\n  if (!publication.value || !publication.value.assets || publication.value.assets.length === 0) {\r\n    return null\r\n  }\r\n  // Get thumbnail from first asset\r\n  const firstAsset = publication.value.assets[0]\r\n  if (!firstAsset) return null\r\n  return firstAsset.thumbnail_url || firstAsset.preview_url || null\r\n})\r\n\r\n// Methods\r\nconst fetchPublication = async (): Promise<void> => {\r\n  if (isNaN(publicationId.value)) {\r\n    error.value = 'Invalid publication ID'\r\n    return\r\n  }\r\n\r\n  isLoading.value = true\r\n  error.value = null\r\n\r\n  try {\r\n    // Fetch publication using distributionStore\r\n    const pub = await distributionStore.getPublication(publicationId.value)\r\n    publication.value = pub\r\n\r\n    // Fetch analytics if not included\r\n    if (!pub.analytics) {\r\n      try {\r\n        const analytics = await distributionService.getPublicationAnalytics(publicationId.value)\r\n        if (publication.value) {\r\n          publication.value.analytics = analytics\r\n        }\r\n      } catch (err) {\r\n        // Silently fail analytics - not critical\r\n        console.error('Failed to load analytics:', err)\r\n      }\r\n    }\r\n\r\n    // Fetch share links\r\n    await fetchShareLinks()\r\n  } catch (err) {\r\n    error.value = err instanceof Error ? err.message : 'Failed to load publication'\r\n    uiStore.addNotification({\r\n      type: 'error',\r\n      title: 'Error',\r\n      message: error.value\r\n    })\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst fetchShareLinks = async (): Promise<void> => {\r\n  if (!publication.value) return\r\n\r\n  try {\r\n    const links = await distributionService.getShareLinks(publication.value.id)\r\n    shareLinks.value = links\r\n  } catch (err) {\r\n    // Silently fail share links - not critical\r\n    console.error('Failed to load share links:', err)\r\n  }\r\n}\r\n\r\nconst handleShare = async (): Promise<void> => {\r\n  if (!publication.value) return\r\n\r\n  // Show share links management modal\r\n  showShareLinksModal.value = true\r\n}\r\n\r\nconst handleShareLinkCreated = async (): Promise<void> => {\r\n  await fetchShareLinks()\r\n  uiStore.addNotification({\r\n    type: 'success',\r\n    title: 'Success',\r\n    message: 'Share link created successfully'\r\n  })\r\n}\r\n\r\nconst handleShareLinkDeleted = async (): Promise<void> => {\r\n  await fetchShareLinks()\r\n  uiStore.addNotification({\r\n    type: 'success',\r\n    title: 'Success',\r\n    message: 'Share link deleted successfully'\r\n  })\r\n}\r\n\r\nconst handleBack = (): void => {\r\n  router.push({ name: 'distribution' })\r\n}\r\n\r\nconst handleViewAnalytics = (): void => {\r\n  if (!publication.value) return\r\n  router.push({\r\n    name: 'publication-analytics',\r\n    params: { id: publication.value.id }\r\n  })\r\n}\r\n\r\nconst handleEdit = (): void => {\r\n  if (!publication.value) return\r\n  router.push({\r\n    name: 'publication-edit',\r\n    params: { id: publication.value.id }\r\n  })\r\n}\r\n\r\nconst handleDelete = async (): Promise<void> => {\r\n  if (!publication.value) return\r\n\r\n  try {\r\n    await distributionStore.deletePublication(publication.value.id)\r\n\r\n    uiStore.addNotification({\r\n      type: 'success',\r\n      title: 'Success',\r\n      message: 'Publication deleted successfully'\r\n    })\r\n\r\n    router.push({ name: 'distribution' })\r\n  } catch (err) {\r\n    uiStore.addNotification({\r\n      type: 'error',\r\n      title: 'Error',\r\n      message: 'Failed to delete publication'\r\n    })\r\n  } finally {\r\n    showDeleteModal.value = false\r\n  }\r\n}\r\n\r\nconst handleAssetClick = (assetId: number): void => {\r\n  router.push({\r\n    name: 'asset-detail',\r\n    params: { id: assetId }\r\n  })\r\n}\r\n\r\nconst handleAssetDownload = async (assetId: number): Promise<void> => {\r\n  try {\r\n    const asset = assets.value.find((a) => a.id === assetId)\r\n    if (!asset) {\r\n      uiStore.addNotification({\r\n        type: 'error',\r\n        title: 'Error',\r\n        message: 'Asset not found'\r\n      })\r\n      return\r\n    }\r\n\r\n    // Use preview_url or construct download URL\r\n    const downloadUrl = asset.preview_url || `/api/v4/assets/${asset.id}/download/`\r\n\r\n    // Trigger download\r\n    const link = document.createElement('a')\r\n    link.href = downloadUrl\r\n    link.download = asset.filename || asset.label || 'asset'\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    document.body.removeChild(link)\r\n\r\n    uiStore.addNotification({\r\n      type: 'success',\r\n      title: 'Success',\r\n      message: 'Download started'\r\n    })\r\n  } catch (err) {\r\n    uiStore.addNotification({\r\n      type: 'error',\r\n      title: 'Error',\r\n      message: 'Failed to download asset'\r\n    })\r\n  }\r\n}\r\n\r\nconst handleDownloadAll = async (): Promise<void> => {\r\n  if (assets.value.length === 0) return\r\n\r\n  try {\r\n    // Download all assets one by one\r\n    for (const asset of assets.value) {\r\n      const downloadUrl = asset.preview_url || `/api/v4/assets/${asset.id}/download/`\r\n      const link = document.createElement('a')\r\n      link.href = downloadUrl\r\n      link.download = asset.filename || asset.label || 'asset'\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      // Small delay to avoid browser blocking multiple downloads\r\n      await new Promise((resolve) => setTimeout(resolve, 100))\r\n    }\r\n\r\n    uiStore.addNotification({\r\n      type: 'success',\r\n      title: 'Success',\r\n      message: 'Downloads started'\r\n    })\r\n  } catch (err) {\r\n    uiStore.addNotification({\r\n      type: 'error',\r\n      title: 'Error',\r\n      message: 'Failed to download assets'\r\n    })\r\n  }\r\n}\r\n\r\nconst formatSchedule = (schedule?: Publication['schedule']): string => {\r\n  if (!schedule) return 'Not scheduled'\r\n  if (!schedule.start_date && !schedule.end_date) return 'Not scheduled'\r\n  \r\n  const start = schedule.start_date ? formatDate(schedule.start_date) : 'No start date'\r\n  const end = schedule.end_date ? formatDate(schedule.end_date) : 'No end date'\r\n  return `${start} - ${end}`\r\n}\r\n\r\nconst formatDate = (dateString: string): string => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric'\r\n  })\r\n}\r\n\r\nconst formatBytes = (bytes: number): string => {\r\n  if (bytes === 0) return '0 Bytes'\r\n  const k = 1024\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\r\n}\r\n\r\n// Lifecycle\r\nonMounted(async () => {\r\n  // Permission check\r\n  if (!authStore.hasPermission('distribution.publication_view')) {\r\n    router.push({\r\n      name: 'forbidden',\r\n      query: {\r\n        returnTo: route.fullPath,\r\n        requiredPermission: 'distribution.publication_view'\r\n      }\r\n    })\r\n    return\r\n  }\r\n\r\n  await fetchPublication()\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"css\">\r\n.publication-detail-page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n  padding: 24px;\r\n  background: var(--color-background, #f9fafb);\r\n  min-height: 100vh;\r\n}\r\n\r\n/* Loading State */\r\n.publication-detail-page__loading {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 400px;\r\n}\r\n\r\n.publication-detail-page__skeleton {\r\n  width: 100%;\r\n  max-width: 1200px;\r\n}\r\n\r\n.publication-detail-page__skeleton-header {\r\n  height: 200px;\r\n  background: var(--color-bg-1, #f9fafb);\r\n  border-radius: var(--radius-base, 8px);\r\n  margin-bottom: 24px;\r\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\r\n}\r\n\r\n.publication-detail-page__skeleton-content {\r\n  height: 400px;\r\n  background: var(--color-bg-1, #f9fafb);\r\n  border-radius: var(--radius-base, 8px);\r\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0%,\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n  50% {\r\n    opacity: 0.5;\r\n  }\r\n}\r\n\r\n/* Error State */\r\n.publication-detail-page__error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n  min-height: 400px;\r\n  padding: 48px;\r\n  background: var(--color-surface, #ffffff);\r\n  border-radius: var(--radius-base, 8px);\r\n  border: 1px solid var(--color-border, #e5e7eb);\r\n}\r\n\r\n.publication-detail-page__error-message {\r\n  margin: 0;\r\n  font-size: var(--font-size-lg, 18px);\r\n  color: var(--color-text, #111827);\r\n  text-align: center;\r\n}\r\n\r\n/* Header Section */\r\n.publication-detail-page__header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n  padding: 24px;\r\n  background: var(--color-surface, #ffffff);\r\n  border-radius: var(--radius-base, 8px);\r\n  border: 1px solid var(--color-border, #e5e7eb);\r\n}\r\n\r\n.publication-detail-page__header-main {\r\n  display: flex;\r\n  gap: 24px;\r\n}\r\n\r\n.publication-detail-page__thumbnail {\r\n  flex-shrink: 0;\r\n  width: 200px;\r\n  height: 200px;\r\n  border-radius: var(--radius-base, 8px);\r\n  overflow: hidden;\r\n  background: var(--color-bg-1, #f9fafb);\r\n}\r\n\r\n.publication-detail-page__thumbnail-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.publication-detail-page__thumbnail-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: var(--color-bg-1, #f9fafb);\r\n}\r\n\r\n.publication-detail-page__info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.publication-detail-page__title {\r\n  margin: 0;\r\n  font-size: var(--font-size-3xl, 30px);\r\n  font-weight: 600;\r\n  color: var(--color-text, #111827);\r\n}\r\n\r\n.publication-detail-page__description {\r\n  margin: 0;\r\n  font-size: var(--font-size-base, 14px);\r\n  color: var(--color-text-secondary, #6b7280);\r\n  line-height: 1.6;\r\n}\r\n\r\n.publication-detail-page__metadata {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 16px;\r\n  margin-top: 8px;\r\n}\r\n\r\n.publication-detail-page__metadata-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.publication-detail-page__metadata-label {\r\n  font-size: var(--font-size-sm, 12px);\r\n  color: var(--color-text-secondary, #6b7280);\r\n  font-weight: 500;\r\n}\r\n\r\n.publication-detail-page__metadata-value {\r\n  font-size: var(--font-size-sm, 12px);\r\n  color: var(--color-text, #111827);\r\n}\r\n\r\n.publication-detail-page__channels {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.publication-detail-page__channel-badge {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.publication-detail-page__actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n/* Metrics Section */\r\n.publication-detail-page__metrics {\r\n  padding: 24px;\r\n}\r\n\r\n.publication-detail-page__metrics-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.publication-detail-page__metrics-title {\r\n  margin: 0;\r\n  font-size: var(--font-size-xl, 20px);\r\n  font-weight: 600;\r\n  color: var(--color-text, #111827);\r\n}\r\n\r\n.publication-detail-page__metrics-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 24px;\r\n  margin-top: 16px;\r\n}\r\n\r\n.publication-detail-page__metric {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  padding: 16px;\r\n  background: var(--color-bg-1, #f9fafb);\r\n  border-radius: var(--radius-base, 8px);\r\n}\r\n\r\n.publication-detail-page__metric-label {\r\n  font-size: var(--font-size-sm, 12px);\r\n  color: var(--color-text-secondary, #6b7280);\r\n  font-weight: 500;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.publication-detail-page__metric-value {\r\n  font-size: var(--font-size-2xl, 24px);\r\n  font-weight: 600;\r\n  color: var(--color-text, #111827);\r\n}\r\n\r\n/* Assets Section */\r\n.publication-detail-page__assets {\r\n  padding: 24px;\r\n}\r\n\r\n.publication-detail-page__assets-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.publication-detail-page__assets-title {\r\n  margin: 0;\r\n  font-size: var(--font-size-xl, 20px);\r\n  font-weight: 600;\r\n  color: var(--color-text, #111827);\r\n}\r\n\r\n.publication-detail-page__assets-empty {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n  padding: 64px 24px;\r\n  color: var(--color-text-secondary, #6b7280);\r\n}\r\n\r\n.publication-detail-page__assets-empty-text {\r\n  margin: 0;\r\n  font-size: var(--font-size-base, 14px);\r\n}\r\n\r\n.publication-detail-page__assets-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n  gap: 24px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.publication-detail-page__asset-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  background: var(--color-surface, #ffffff);\r\n  border-radius: var(--radius-base, 8px);\r\n  overflow: hidden;\r\n  transition: transform 200ms ease, box-shadow 200ms ease;\r\n}\r\n\r\n.publication-detail-page__asset-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: var(--shadow-md, 0 4px 6px -1px rgba(0, 0, 0, 0.1));\r\n}\r\n\r\n.publication-detail-page__asset-thumbnail {\r\n  position: relative;\r\n  width: 100%;\r\n  aspect-ratio: 1;\r\n  background: var(--color-bg-1, #f9fafb);\r\n  border-radius: var(--radius-base, 8px);\r\n  overflow: hidden;\r\n}\r\n\r\n.publication-detail-page__asset-thumbnail-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  cursor: pointer;\r\n}\r\n\r\n.publication-detail-page__asset-thumbnail-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.publication-detail-page__asset-actions {\r\n  position: absolute;\r\n  top: 8px;\r\n  right: 8px;\r\n  opacity: 0;\r\n  transition: opacity 200ms ease;\r\n}\r\n\r\n.publication-detail-page__asset-card:hover .publication-detail-page__asset-actions {\r\n  opacity: 1;\r\n}\r\n\r\n.publication-detail-page__asset-info {\r\n  padding: 0 4px;\r\n}\r\n\r\n.publication-detail-page__asset-name {\r\n  margin: 0 0 4px 0;\r\n  font-size: var(--font-size-sm, 12px);\r\n  font-weight: 500;\r\n  color: var(--color-text, #111827);\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.publication-detail-page__asset-name:hover {\r\n  color: var(--color-primary, #3b82f6);\r\n}\r\n\r\n.publication-detail-page__asset-size {\r\n  margin: 0;\r\n  font-size: var(--font-size-xs, 11px);\r\n  color: var(--color-text-secondary, #6b7280);\r\n}\r\n\r\n.publication-detail-page__assets-loading {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n  gap: 24px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.publication-detail-page__assets-skeleton {\r\n  aspect-ratio: 1;\r\n  background: var(--color-bg-1, #f9fafb);\r\n  border-radius: var(--radius-base, 8px);\r\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 1024px) {\r\n  .publication-detail-page__header-main {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .publication-detail-page__thumbnail {\r\n    width: 100%;\r\n    max-width: 300px;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .publication-detail-page {\r\n    padding: 16px;\r\n  }\r\n\r\n  .publication-detail-page__header {\r\n    padding: 16px;\r\n  }\r\n\r\n  .publication-detail-page__actions {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .publication-detail-page__actions > * {\r\n    width: 100%;\r\n  }\r\n\r\n  .publication-detail-page__assets-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n    gap: 16px;\r\n  }\r\n\r\n  .publication-detail-page__metrics-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n/* Accessibility */\r\n@media (prefers-reduced-motion: reduce) {\r\n  .publication-detail-page__skeleton-header,\r\n  .publication-detail-page__skeleton-content,\r\n  .publication-detail-page__assets-skeleton {\r\n    animation: none;\r\n  }\r\n\r\n  .publication-detail-page__asset-card {\r\n    transition: none;\r\n  }\r\n}\r\n</style>\r\n\r\n"],"names":["props","__props","emit","__emit","uiStore","useUIStore","showCreateForm","ref","newLinkExpiresAt","newLinkPassword","newLinkPermissions","view","download","handleCreateLink","__async","this","distributionService","createShareLink","publicationId","expires_at","value","password","permissions","addNotification","type","title","message","err","handleDeleteLink","linkId","deleteShareLink","handleCopyUrl","url","navigator","clipboard","writeText","_createBlock","Modal","isOpen","onClose","$emit","content","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","Button","variant","onClick","_cache","$event","class","fill","stroke","viewBox","d","_openBlock","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_5","placeholder","_hoisted_6","_hoisted_7","_vModelCheckbox","_hoisted_8","_hoisted_9","shareLinks","length","_hoisted_10","_Fragment","_renderList","link","key","id","_hoisted_11","_hoisted_12","readonly","size","_hoisted_14","_hoisted_15","dateString","Date","toLocaleDateString","year","month","day","hour","minute","password_protected","_hoisted_16","_hoisted_17","_toDisplayString","_hoisted_18","route","useRoute","router","useRouter","authStore","useAuthStore","distributionStore","useDistributionStore","publication","isLoading","error","showDeleteModal","showShareLinksModal","computed","params","parsed","parseInt","isNaN","Array","isArray","assets","_a","metrics","analytics","views","downloads","shares","canEdit","user","isOwner","created_by_id","hasPermission","canDelete","statusVariant","status","statusLabel","charAt","toUpperCase","slice","thumbnailUrl","firstAsset","thumbnail_url","preview_url","fetchPublication","pub","getPublication","getPublicationAnalytics","fetchShareLinks","Error","links","getShareLinks","handleShare","handleShareLinkCreated","handleShareLinkDeleted","handleBack","push","name","handleViewAnalytics","handleEdit","handleDelete","deletePublication","handleAssetClick","assetId","handleAssetDownload","asset","find","a","downloadUrl","document","createElement","href","filename","label","body","appendChild","click","removeChild","handleDownloadAll","Promise","resolve","setTimeout","formatSchedule","schedule","start_date","end_date","formatDate","formatBytes","bytes","i","Math","floor","log","round","pow","onMounted","query","returnTo","fullPath","requiredPermission","src","alt","_hoisted_13","description","Badge","created_date","updated_date","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","channels","_hoisted_23","_hoisted_24","channel","icon","_hoisted_25","_hoisted_27","Card","header","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_39","role","_hoisted_40","_hoisted_43","_withModifiers","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_38","_hoisted_47","DeleteConfirmModal","onConfirm","onCancel","ShareLinksModal","onLinkCreated","onLinkDeleted"],"mappings":"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"}