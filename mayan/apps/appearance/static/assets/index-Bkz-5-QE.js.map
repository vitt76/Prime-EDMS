{"version":3,"mappings":"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","names":["normalizeOptions","options","factoryOptions","v","Object","create","Proxy","get","target","key","receiver","Reflect","hydrateStore","store","storage","serializer","debug","fromStorage","getItem","$patch","deserialize","e","persistState","state","paths","toStore","Array","isArray","baseState","reduce","substate","path","pathArray","split","val","slice","obj","p","test","length","set","pick","setItem","serialize","src_default","context","auto","persist","pinia","$id","value","original_store","_s","replace","Promise","resolve","then","$persist","persistences","map","o","_a","localStorage","beforeRestore","afterRestore","JSON","stringify","parse","k","parsePersistence","filter","Boolean","forEach","persistence","$state","$hydrate","runHooks","$subscribe","_mutation","detached","createPersistedState","cacheService","constructor","__publicField","this","Map","entry","cache","Date","now","timestamp","ttl","delete","data","defaultTTL","clear","clearExpired","entries","size","has","window","setInterval","apiService","client","axios","baseURL","timeout","headers","setupInterceptors","interceptors","request","use","config","csrfToken","document","querySelector","content","token","error","reject","response","__async","status","removeItem","location","href","_b","apiError","code","message","details","shouldRetry","_retry","_retryCount","delayMs","Math","pow","ms","setTimeout","_d","_c","originalError","url","useCache","method","cacheKey","getCacheKey","params","cached","post","put","clearCache","pattern","AUTH_PASSWORD_BASE","authService","login","email","password","logout","refreshToken","getCurrentUser","register","requestPasswordReset","changePassword","payload","old_password","oldPassword","new_password","newPassword","resetPassword","confirm_password","confirmPassword","getTwoFactorStatus","enableTwoFactor","verifyTwoFactor","disableTwoFactor","regenerateBackupCodes","useAuthStore","defineStore","user","ref","isAuthenticated","permissions","lastActivity","twoFactorStatus","twoFactorPending","twoFactorSetup","hasPermission","computed","permission","includes","hasRole","role","requiresTwoFactor","enabled","isTwoFactorVerified","twoFactorStatusResponse","success","checkAuth","storedToken","updateActivity","checkTwoFactorStatus","setup","backup_codes","setTwoFactorPending","pending","clearTwoFactorSetup","useUIStore","sidebarExpanded","theme","activeModal","mobileMenuOpen","breadcrumbs","notifications","isDarkMode","matchMedia","matches","applyTheme","documentElement","classList","add","remove","toggleSidebar","setTheme","newTheme","openModal","modalName","closeModal","toggleMobileMenu","setBreadcrumbs","crumbs","addNotification","notification","unshift","index","indexOf","splice","removeNotification","defaultRetryCondition","name","ApiError","retryable","Error","super","calculateDelay","attempt","initialDelay","maxDelay","backoffFactor","jitter","exponentialDelay","clampedDelay","min","jitterRange","random","sleep","signal","aborted","addEventListener","clearTimeout","withRetry","_0","arguments","operation","maxAttempts","retryCondition","onRetry","startTime","lastError","attempts","totalDuration","String","delay","sleepError","errorLog","logError","errorId","crypto","randomUUID","errorType","categorizeError","logEntry","id","type","__spreadProps","userAgent","navigator","toISOString","resolved","sentryDsn","logRocketId","Sentry","LogRocket","loggingError","sendToExternalLogger","total","unresolved","byType","acc","getErrorStats","useNotificationStore","wsConnected","unreadCount","n","read","unreadNotifications","findIndex","newNotification","markAsRead","find","markAllAsRead","clearAll","connectWebSocket","disconnectWebSocket","assetService","getAssets","queryParams","page","page_size","sort","ordering","tags","search","getAsset","searchAssets","query","bulkOperation","updateAsset","deleteAsset","uploadAsset","formData","axiosConfig","onUploadProgress","formatApiError","useSearchStore","results","facets","totalCount","isLoading","recentSearches","savedSearches","searchHistory","hasResults","resultCount","facetsSummary","summary","keys","facet","values","sum","count","addToRecent","searchQuery","loadRecentSearches","stored","err","loadSavedSearches","performSearch","limit","trim","searchParams","q","offset","advancedSearch","clearSearch","saveSearch","filters","savedSearch","created_at","push","deleteSavedSearch","s","formatFileSize","bytes","i","floor","log","parseFloat","toFixed","formatDate","date","format","d","toLocaleDateString","year","month","day","hour","minute","formatRelativeTime","diffInSeconds","getTime","truncate","text","maxLength","handleImageError","event","style","display","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","__props","result","class","_normalizeClass","selectedIndex","onClick","$event","$emit","onMouseenter","_createElementVNode","_hoisted_3","thumbnail_url","src","alt","label","onError","_hoisted_5","_cache","fill","stroke","viewBox","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_unref","date_added","mime_type","_hoisted_9","mimeType","startsWith","_hoisted_10","props","emit","__emit","router","useRouter","searchStore","searchContainer","searchInput","localQuery","isFocused","searchId","toString","substring","debouncedQuery","debouncedValue","timeoutId","watch","immediate","onUnmounted","useDebounce","showResults","handleInput","handleFocus","handleBlur","handleEscape","blur","focus","handleArrowDown","scrollToSelected","handleArrowUp","handleEnter","handleResultSelect","handleViewAll","assetId","nextTick","resultsContainer","getElementById","selectedElement","scrollIntoView","block","behavior","handleKeyDown","ctrlKey","metaKey","preventDefault","newQuery","onClickOutside","onMounted","autofocus","removeEventListener","placeholder","onInput","onFocus","onBlur","onKeydown","_createVNode","_Transition","_hoisted_4","SearchResults","onSelect","onViewAll","recentQuery","selectRecentSearch","_hoisted_11","authStore","notificationStore","isUserMenuOpen","userMenuRef","userInitials","first_name","username","charAt","toUpperCase","handleSearch","handleResultSelected","handleUpload","handleFilterToggle","handleNotifications","toggleUserMenu","closeUserMenu","handleLogout","handleMobileMenuToggle","handleClickOutside","contains","_hoisted_2","_component_router_link","to","SearchBar","onSearch","onResultSelected","route","useRoute","uiStore","isExpanded","navigationItems","icon","template","collections","isActive","handleNewFolder","item","handleNavigate","_createBlock","_resolveDynamicComponent","collection","_hoisted_12","_renderSlot","_ctx","$slots","cardClasses","hoverClass","hover","default","elevated","outlined","variant","bodyClasses","none","sm","md","lg","padding","header","footer","buttonClasses","primary","secondary","outline","ghost","danger","fullWidth","join","disabled","loading","$attrs","xmlns","cx","cy","r","hasError","errorInfo","errorInstance","retrying","retryCount","autoRetryCountdown","autoRetryTimer","errorContainer","isDevelopment","errorDetails","stack","$","retryButtonText","maxRetries","handleRetry","stopAutoRetry","reload","retryError","handleReload","handleReportError","reportData","component","_e","info","clipboard","writeText","alert","catch","clearInterval","newHasError","__expose","resetError","tabindex","Card","title","Button","_normalizeStyle","width","showAutoRetry","showLayout","handleSidebarToggle","handleGlobalError","instance","handleRecovered","cleanup","handleUnhandledRejection","reason","originalReason","handleError","filename","lineno","colno","setupGlobalErrorHandlers","ErrorBoundary","onRecovered","Header","onFilterToggle","onUpload","onNotifications","onMobileMenuToggle","Sidebar","onNavigate","onSidebarToggle","onNewFolder","MainContent","RouterView","routes","__vitePreload","import","__VITE_PRELOAD__","meta","requiresAuth","breadcrumb","requiresRole","requiresPermission","redirect","children","createRouter","history","createWebHistory","beforeEach","_from","next","returnTo","fullPath","checkPermission","requiredPermission","requiredRole","checkRole","pathParts","currentPath","part","generateBreadcrumbs","app","createApp","App","createPinia","piniaPluginPersistedstate","mount"],"ignoreList":[0],"sources":["../../node_modules/pinia-plugin-persistedstate/dist/index.js","../../src/services/cacheService.ts","../../src/services/apiService.ts","../../src/services/authService.ts","../../src/stores/authStore.ts","../../src/stores/uiStore.ts","../../src/utils/retry.ts","../../src/composables/useErrorBoundary.ts","../../src/stores/notificationStore.ts","../../src/services/assetService.ts","../../src/utils/errors.ts","../../src/stores/searchStore.ts","../../src/utils/formatters.ts","../../src/components/DAM/SearchResults.vue","../../src/components/DAM/SearchBar.vue","../../src/composables/useDebounce.ts","../../src/components/Layout/Header.vue","../../src/components/Layout/Sidebar.vue","../../src/components/Layout/MainContent.vue","../../src/components/Common/Card.vue","../../src/components/Common/Button.vue","../../src/components/ErrorBoundary.vue","../../src/App.vue","../../src/router/index.ts","../../src/main.ts"],"sourcesContent":["// src/normalize.ts\nfunction isObject(v) {\n  return typeof v === \"object\" && v !== null;\n}\nfunction normalizeOptions(options, factoryOptions) {\n  options = isObject(options) ? options : /* @__PURE__ */ Object.create(null);\n  return new Proxy(options, {\n    get(target, key, receiver) {\n      if (key === \"key\")\n        return Reflect.get(target, key, receiver);\n      return Reflect.get(target, key, receiver) || Reflect.get(factoryOptions, key, receiver);\n    }\n  });\n}\n\n// src/pick.ts\nfunction get(state, path) {\n  return path.reduce((obj, p) => {\n    return obj == null ? void 0 : obj[p];\n  }, state);\n}\nfunction set(state, path, val) {\n  return path.slice(0, -1).reduce((obj, p) => {\n    if (/^(__proto__)$/.test(p))\n      return {};\n    else return obj[p] = obj[p] || {};\n  }, state)[path[path.length - 1]] = val, state;\n}\nfunction pick(baseState, paths) {\n  return paths.reduce((substate, path) => {\n    const pathArray = path.split(\".\");\n    return set(substate, pathArray, get(baseState, pathArray));\n  }, {});\n}\n\n// src/plugin.ts\nfunction parsePersistence(factoryOptions, store) {\n  return (o) => {\n    var _a;\n    try {\n      const {\n        storage = localStorage,\n        beforeRestore = void 0,\n        afterRestore = void 0,\n        serializer = {\n          serialize: JSON.stringify,\n          deserialize: JSON.parse\n        },\n        key = store.$id,\n        paths = null,\n        debug = false\n      } = o;\n      return {\n        storage,\n        beforeRestore,\n        afterRestore,\n        serializer,\n        key: ((_a = factoryOptions.key) != null ? _a : (k) => k)(typeof key == \"string\" ? key : key(store.$id)),\n        paths,\n        debug\n      };\n    } catch (e) {\n      if (o.debug)\n        console.error(\"[pinia-plugin-persistedstate]\", e);\n      return null;\n    }\n  };\n}\nfunction hydrateStore(store, { storage, serializer, key, debug }) {\n  try {\n    const fromStorage = storage == null ? void 0 : storage.getItem(key);\n    if (fromStorage)\n      store.$patch(serializer == null ? void 0 : serializer.deserialize(fromStorage));\n  } catch (e) {\n    if (debug)\n      console.error(\"[pinia-plugin-persistedstate]\", e);\n  }\n}\nfunction persistState(state, { storage, serializer, key, paths, debug }) {\n  try {\n    const toStore = Array.isArray(paths) ? pick(state, paths) : state;\n    storage.setItem(key, serializer.serialize(toStore));\n  } catch (e) {\n    if (debug)\n      console.error(\"[pinia-plugin-persistedstate]\", e);\n  }\n}\nfunction createPersistedState(factoryOptions = {}) {\n  return (context) => {\n    const { auto = false } = factoryOptions;\n    const {\n      options: { persist = auto },\n      store,\n      pinia\n    } = context;\n    if (!persist)\n      return;\n    if (!(store.$id in pinia.state.value)) {\n      const original_store = pinia._s.get(store.$id.replace(\"__hot:\", \"\"));\n      if (original_store)\n        Promise.resolve().then(() => original_store.$persist());\n      return;\n    }\n    const persistences = (Array.isArray(persist) ? persist.map((p) => normalizeOptions(p, factoryOptions)) : [normalizeOptions(persist, factoryOptions)]).map(parsePersistence(factoryOptions, store)).filter(Boolean);\n    store.$persist = () => {\n      persistences.forEach((persistence) => {\n        persistState(store.$state, persistence);\n      });\n    };\n    store.$hydrate = ({ runHooks = true } = {}) => {\n      persistences.forEach((persistence) => {\n        const { beforeRestore, afterRestore } = persistence;\n        if (runHooks)\n          beforeRestore == null ? void 0 : beforeRestore(context);\n        hydrateStore(store, persistence);\n        if (runHooks)\n          afterRestore == null ? void 0 : afterRestore(context);\n      });\n    };\n    persistences.forEach((persistence) => {\n      const { beforeRestore, afterRestore } = persistence;\n      beforeRestore == null ? void 0 : beforeRestore(context);\n      hydrateStore(store, persistence);\n      afterRestore == null ? void 0 : afterRestore(context);\n      store.$subscribe(\n        (_mutation, state) => {\n          persistState(state, persistence);\n        },\n        {\n          detached: true\n        }\n      );\n    });\n  };\n}\n\n// src/index.ts\nvar src_default = createPersistedState();\nexport {\n  createPersistedState,\n  src_default as default\n};\n","/**\r\n * In-memory cache service with TTL support\r\n */\r\ninterface CacheEntry<T> {\r\n  data: T\r\n  timestamp: number\r\n  ttl: number\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry<unknown>> = new Map()\r\n  private defaultTTL: number = 5 * 60 * 1000 // 5 minutes\r\n\r\n  /**\r\n   * Get cached value\r\n   */\r\n  get<T>(key: string): T | null {\r\n    const entry = this.cache.get(key) as CacheEntry<T> | undefined\r\n\r\n    if (!entry) {\r\n      return null\r\n    }\r\n\r\n    // Check if expired\r\n    const now = Date.now()\r\n    if (now - entry.timestamp > entry.ttl) {\r\n      this.cache.delete(key)\r\n      return null\r\n    }\r\n\r\n    return entry.data\r\n  }\r\n\r\n  /**\r\n   * Set cached value\r\n   */\r\n  set<T>(key: string, data: T, ttl?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      ttl: ttl || this.defaultTTL\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete cached value\r\n   */\r\n  delete(key: string): void {\r\n    this.cache.delete(key)\r\n  }\r\n\r\n  /**\r\n   * Clear all cache\r\n   */\r\n  clear(): void {\r\n    this.cache.clear()\r\n  }\r\n\r\n  /**\r\n   * Clear expired entries\r\n   */\r\n  clearExpired(): void {\r\n    const now = Date.now()\r\n    for (const [key, entry] of this.cache.entries()) {\r\n      if (now - entry.timestamp > entry.ttl) {\r\n        this.cache.delete(key)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is valid\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key)\r\n    if (!entry) {\r\n      return false\r\n    }\r\n\r\n    const now = Date.now()\r\n    if (now - entry.timestamp > entry.ttl) {\r\n      this.cache.delete(key)\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService()\r\n\r\n// Cleanup expired entries every minute\r\nif (typeof window !== 'undefined') {\r\n  setInterval(() => {\r\n    cacheService.clearExpired()\r\n  }, 60 * 1000)\r\n}\r\n\r\n","import axios, {\r\n  type AxiosInstance,\r\n  type AxiosError,\r\n  type InternalAxiosRequestConfig\r\n} from 'axios'\r\nimport type { ApiResponse, ApiError } from '@/types/api'\r\nimport { cacheService } from './cacheService'\r\n\r\nconst API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:8000/api'\r\nconst MAX_RETRIES = 3\r\nconst RETRY_DELAY = 1000 // 1 second\r\n\r\n// Request logging\r\nconst logRequest = (config: InternalAxiosRequestConfig): void => {\r\n  if (import.meta.env.DEV) {\r\n    console.log(`[API Request] ${config.method?.toUpperCase()} ${config.url}`, {\r\n      params: config.params,\r\n      data: config.data\r\n    })\r\n  }\r\n}\r\n\r\nconst logResponse = (response: unknown): void => {\r\n  if (import.meta.env.DEV) {\r\n    console.log('[API Response]', response)\r\n  }\r\n}\r\n\r\nconst logError = (error: unknown): void => {\r\n  if (import.meta.env.DEV) {\r\n    console.error('[API Error]', error)\r\n  }\r\n}\r\n\r\n// Retry logic\r\nconst shouldRetry = (error: AxiosError): boolean => {\r\n  // Retry on network errors or 5xx errors\r\n  if (!error.response) {\r\n    return true // Network error\r\n  }\r\n  \r\n  const status = error.response.status\r\n  return status >= 500 && status < 600\r\n}\r\n\r\nconst delay = (ms: number): Promise<void> => {\r\n  return new Promise((resolve) => setTimeout(resolve, ms))\r\n}\r\n\r\nclass ApiService {\r\n  private client: AxiosInstance\r\n\r\n  constructor() {\r\n    this.client = axios.create({\r\n      baseURL: API_BASE_URL,\r\n      timeout: 30000,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n\r\n    this.setupInterceptors()\r\n  }\r\n\r\n  private setupInterceptors(): void {\r\n    // Request interceptor\r\n    this.client.interceptors.request.use(\r\n      (config: InternalAxiosRequestConfig) => {\r\n        // Request logging\r\n        logRequest(config)\r\n\r\n        // Add CSRF token\r\n        const csrfToken = document.querySelector<HTMLMetaElement>(\r\n          'meta[name=\"csrf-token\"]'\r\n        )?.content\r\n        if (csrfToken && config.headers) {\r\n          config.headers['X-CSRFToken'] = csrfToken\r\n        }\r\n\r\n        // Add auth token\r\n        const token = localStorage.getItem('auth_token')\r\n        if (token && config.headers) {\r\n          config.headers['Authorization'] = `Bearer ${token}`\r\n        }\r\n\r\n        return config\r\n      },\r\n      (error) => {\r\n        logError(error)\r\n        return Promise.reject(error)\r\n      }\r\n    )\r\n\r\n    // Response interceptor with retry logic\r\n    this.client.interceptors.response.use(\r\n      (response) => {\r\n        logResponse(response.data)\r\n        return response\r\n      },\r\n      async (error: AxiosError<ApiError>) => {\r\n        logError(error)\r\n\r\n        const config = error.config as InternalAxiosRequestConfig & {\r\n          _retry?: boolean\r\n          _retryCount?: number\r\n        }\r\n\r\n        // Handle 401 Unauthorized\r\n        if (error.response?.status === 401) {\r\n          localStorage.removeItem('auth_token')\r\n          window.location.href = '/login'\r\n          return Promise.reject(error)\r\n        }\r\n\r\n        // Handle 403 Forbidden\r\n        if (error.response?.status === 403) {\r\n          const apiError: ApiError = {\r\n            code: 'FORBIDDEN',\r\n            message: ' ',\r\n            details: error.response.data\r\n          }\r\n          return Promise.reject(apiError)\r\n        }\r\n\r\n        // Retry logic for network errors and 5xx\r\n        if (shouldRetry(error) && config && !config._retry) {\r\n          config._retry = true\r\n          config._retryCount = (config._retryCount || 0) + 1\r\n\r\n          if (config._retryCount <= MAX_RETRIES) {\r\n            // Exponential backoff\r\n            const delayMs = RETRY_DELAY * Math.pow(2, config._retryCount - 1)\r\n            await delay(delayMs)\r\n\r\n            if (import.meta.env.DEV) {\r\n              console.log(\r\n                `[API Retry] Attempt ${config._retryCount}/${MAX_RETRIES} for ${config.url}`\r\n              )\r\n            }\r\n\r\n            return this.client.request(config)\r\n          }\r\n        }\r\n\r\n        // Handle structured errors\r\n        if (error.response?.data?.error) {\r\n          const apiError: ApiError = {\r\n            code: error.response.data.error.code || 'UNKNOWN_ERROR',\r\n            message: error.response.data.error.message || ' ',\r\n            details: error.response.data.error.details\r\n          }\r\n          return Promise.reject(apiError)\r\n        }\r\n\r\n        // Handle network errors\r\n        if (!error.response) {\r\n          const apiError: ApiError = {\r\n            code: 'NETWORK_ERROR',\r\n            message: ' .    .',\r\n            details: { originalError: error.message }\r\n          }\r\n          return Promise.reject(apiError)\r\n        }\r\n\r\n        // Handle 500 errors\r\n        if (error.response.status >= 500) {\r\n          const apiError: ApiError = {\r\n            code: 'SERVER_ERROR',\r\n            message: ' .  .',\r\n            details: { status: error.response.status }\r\n          }\r\n          return Promise.reject(apiError)\r\n        }\r\n\r\n        return Promise.reject(error)\r\n      }\r\n    )\r\n  }\r\n\r\n  /**\r\n   * GET request with optional caching\r\n   */\r\n  async get<T>(\r\n    url: string,\r\n    config?: InternalAxiosRequestConfig,\r\n    useCache = true\r\n  ): Promise<T> {\r\n    // Check cache for GET requests\r\n    if (useCache && config?.method === undefined) {\r\n      const cacheKey = this.getCacheKey(url, config?.params)\r\n      const cached = cacheService.get<T>(cacheKey)\r\n      if (cached !== null) {\r\n        if (import.meta.env.DEV) {\r\n          console.log(`[API Cache Hit] ${url}`)\r\n        }\r\n        return cached\r\n      }\r\n    }\r\n\r\n    const response = await this.client.get<ApiResponse<T>>(url, config)\r\n    const data = response.data.data || (response.data as unknown as T)\r\n\r\n    // Cache GET responses\r\n    if (useCache && config?.method === undefined) {\r\n      const cacheKey = this.getCacheKey(url, config?.params)\r\n      cacheService.set(cacheKey, data)\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  /**\r\n   * POST request\r\n   */\r\n  async post<T>(\r\n    url: string,\r\n    data?: unknown,\r\n    config?: InternalAxiosRequestConfig\r\n  ): Promise<T> {\r\n    const response = await this.client.post<ApiResponse<T>>(url, data, config)\r\n    return response.data.data || (response.data as unknown as T)\r\n  }\r\n\r\n  /**\r\n   * PUT request\r\n   */\r\n  async put<T>(\r\n    url: string,\r\n    data?: unknown,\r\n    config?: InternalAxiosRequestConfig\r\n  ): Promise<T> {\r\n    const response = await this.client.put<ApiResponse<T>>(url, data, config)\r\n    return response.data.data || (response.data as unknown as T)\r\n  }\r\n\r\n  /**\r\n   * DELETE request\r\n   */\r\n  async delete<T>(url: string, config?: InternalAxiosRequestConfig): Promise<T> {\r\n    const response = await this.client.delete<ApiResponse<T>>(url, config)\r\n    return response.data.data || (response.data as unknown as T)\r\n  }\r\n\r\n  /**\r\n   * Generate cache key from URL and params\r\n   */\r\n  private getCacheKey(url: string, params?: unknown): string {\r\n    if (!params) {\r\n      return url\r\n    }\r\n    const paramsStr = JSON.stringify(params)\r\n    return `${url}?${paramsStr}`\r\n  }\r\n\r\n  /**\r\n   * Clear cache for specific URL pattern\r\n   */\r\n  clearCache(pattern?: string): void {\r\n    if (pattern) {\r\n      // Clear specific cache entries matching pattern\r\n      // This is a simple implementation - can be enhanced\r\n      cacheService.clear()\r\n    } else {\r\n      cacheService.clear()\r\n    }\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService()\r\n","import { apiService } from './apiService'\nimport type { User, TwoFactorStatus, TwoFactorSetup, TwoFactorVerify } from '@/types'\n\ninterface LoginResponse {\n  token: string\n  user: User\n  permissions?: string[]\n}\n\ninterface RefreshTokenResponse {\n  token: string\n}\n\ninterface GetCurrentUserResponse {\n  user: User\n  permissions?: string[]\n}\n\nconst AUTH_PASSWORD_BASE = '/api/auth/password/'\n\nclass AuthService {\n  /**\n   * Login with email and password\n   */\n  async login(email: string, password: string): Promise<LoginResponse> {\n    return apiService.post<LoginResponse>('/v4/auth/login/', {\n      email,\n      password\n    })\n  }\n\n  /**\n   * Logout current user\n   */\n  async logout(): Promise<void> {\n    return apiService.post<void>('/v4/auth/logout/')\n  }\n\n  /**\n   * Refresh authentication token\n   */\n  async refreshToken(): Promise<RefreshTokenResponse> {\n    return apiService.post<RefreshTokenResponse>('/v4/auth/refresh/')\n  }\n\n  /**\n   * Get current authenticated user\n   */\n  async getCurrentUser(): Promise<GetCurrentUserResponse> {\n    return apiService.get<GetCurrentUserResponse>('/v4/auth/me/')\n  }\n\n  /**\n   * Register new user (if allowed)\n   */\n  async register(data: {\n    email: string\n    password: string\n    first_name?: string\n    last_name?: string\n  }): Promise<LoginResponse> {\n    return apiService.post<LoginResponse>('/v4/auth/register/', data)\n  }\n\n  /**\n   * Request password reset (forgot password)\n   */\n  async requestPasswordReset(email: string): Promise<void> {\n    return apiService.post<void>(`${AUTH_PASSWORD_BASE}forgot/`, { email })\n  }\n\n  /**\n   * Change password for authenticated user\n   */\n  async changePassword(payload: {\n    oldPassword: string\n    newPassword: string\n  }): Promise<void> {\n    return apiService.post<void>(`${AUTH_PASSWORD_BASE}change/`, {\n      old_password: payload.oldPassword,\n      new_password: payload.newPassword\n    })\n  }\n\n  /**\n   * Reset password with token\n   */\n  async resetPassword(payload: {\n    token: string\n    newPassword: string\n    confirmPassword: string\n  }): Promise<void> {\n    return apiService.post<void>(`${AUTH_PASSWORD_BASE}reset/`, {\n      token: payload.token,\n      new_password: payload.newPassword,\n      confirm_password: payload.confirmPassword\n    })\n  }\n\n  /**\n   * Get 2FA status for current user\n   */\n  async getTwoFactorStatus(): Promise<TwoFactorStatus> {\n    return apiService.get<TwoFactorStatus>('/v4/auth/me/2fa/')\n  }\n\n  /**\n   * Enable 2FA for current user\n   */\n  async enableTwoFactor(): Promise<TwoFactorSetup> {\n    return apiService.post<TwoFactorSetup>('/v4/auth/me/2fa/enable/')\n  }\n\n  /**\n   * Verify 2FA token during setup or login\n   */\n  async verifyTwoFactor(token: string, method: 'totp' | 'backup_code' = 'totp'): Promise<{ success: boolean; user?: User }> {\n    const payload: TwoFactorVerify = { token, method }\n    return apiService.post<{ success: boolean; user?: User }>('/v4/auth/me/2fa/verify/', payload)\n  }\n\n  /**\n   * Disable 2FA for current user\n   */\n  async disableTwoFactor(): Promise<{ success: boolean }> {\n    return apiService.post<{ success: boolean }>('/v4/auth/me/2fa/disable/')\n  }\n\n  /**\n   * Regenerate backup codes\n   */\n  async regenerateBackupCodes(): Promise<{ backup_codes: string[] }> {\n    return apiService.post<{ backup_codes: string[] }>('/v4/auth/me/2fa/regenerate-backup/')\n  }\n}\n\nexport const authService = new AuthService()\n\n","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport { authService } from '@/services/authService'\r\nimport type { User, TwoFactorStatus, TwoFactorSetup } from '@/types'\r\n\r\nexport const useAuthStore = defineStore(\r\n  'auth',\r\n  () => {\r\n    // State\r\n    const user = ref<User | null>(null)\r\n    const token = ref<string | null>(null)\r\n    const isAuthenticated = ref(false)\r\n    const permissions = ref<string[]>([])\r\n    const lastActivity = ref<Date | null>(null)\r\n\r\n    // 2FA State\r\n    const twoFactorStatus = ref<TwoFactorStatus | null>(null)\r\n    const twoFactorPending = ref(false)\r\n    const twoFactorSetup = ref<TwoFactorSetup | null>(null)\r\n\r\n    // Getters\r\n    const hasPermission = computed(() => {\r\n      return (permission: string) => {\r\n        return permissions.value.includes(permission) || user.value?.permissions?.includes(permission) || false\r\n      }\r\n    })\r\n\r\n    const hasRole = computed(() => {\r\n      return (role: string) => {\r\n        return user.value?.role === role\r\n      }\r\n    })\r\n\r\n    const requiresTwoFactor = computed(() => {\r\n      return twoFactorStatus.value?.enabled === true\r\n    })\r\n\r\n    const isTwoFactorVerified = computed(() => {\r\n      return !twoFactorPending.value && isAuthenticated.value\r\n    })\r\n\r\n    // Actions\r\n    async function login(email: string, password: string) {\r\n      try {\r\n        const response = await authService.login(email, password)\r\n        token.value = response.token\r\n        user.value = response.user\r\n        isAuthenticated.value = true\r\n        permissions.value = response.permissions || []\r\n        lastActivity.value = new Date()\r\n\r\n        // Store token in localStorage\r\n        if (token.value) {\r\n          localStorage.setItem('auth_token', token.value)\r\n        }\r\n\r\n        // Check 2FA status and set pending if enabled\r\n        try {\r\n          const twoFactorStatusResponse = await authService.getTwoFactorStatus()\r\n          twoFactorStatus.value = twoFactorStatusResponse\r\n          if (twoFactorStatusResponse.enabled) {\r\n            twoFactorPending.value = true\r\n          }\r\n        } catch (error) {\r\n          console.warn('Failed to check 2FA status during login:', error)\r\n          // Don't fail login if 2FA check fails\r\n        }\r\n\r\n        return { success: true }\r\n      } catch (error) {\r\n        isAuthenticated.value = false\r\n        throw error\r\n      }\r\n    }\r\n\r\n    async function logout() {\r\n      try {\r\n        await authService.logout()\r\n      } catch (error) {\r\n        // Continue with logout even if API call fails\r\n        console.error('Logout error:', error)\r\n      } finally {\r\n        token.value = null\r\n        user.value = null\r\n        isAuthenticated.value = false\r\n        permissions.value = []\r\n        lastActivity.value = null\r\n        // Reset 2FA state\r\n        twoFactorStatus.value = null\r\n        twoFactorPending.value = false\r\n        twoFactorSetup.value = null\r\n        localStorage.removeItem('auth_token')\r\n      }\r\n    }\r\n\r\n    async function refreshToken() {\r\n      try {\r\n        const response = await authService.refreshToken()\r\n        token.value = response.token\r\n        if (token.value) {\r\n          localStorage.setItem('auth_token', token.value)\r\n        }\r\n        return { success: true }\r\n      } catch (error) {\r\n        // Token refresh failed, logout user\r\n        await logout()\r\n        throw error\r\n      }\r\n    }\r\n\r\n    async function checkAuth() {\r\n      const storedToken = localStorage.getItem('auth_token')\r\n      if (!storedToken) {\r\n        isAuthenticated.value = false\r\n        return false\r\n      }\r\n\r\n      try {\r\n        const response = await authService.getCurrentUser()\r\n        token.value = storedToken\r\n        user.value = response.user\r\n        isAuthenticated.value = true\r\n        permissions.value = response.permissions || []\r\n        lastActivity.value = new Date()\r\n\r\n        // Check 2FA status\r\n        try {\r\n          const twoFactorStatusResponse = await authService.getTwoFactorStatus()\r\n          twoFactorStatus.value = twoFactorStatusResponse\r\n          if (twoFactorStatusResponse.enabled) {\r\n            twoFactorPending.value = true\r\n          }\r\n        } catch (error) {\r\n          console.warn('Failed to check 2FA status during auth check:', error)\r\n          // Don't fail auth check if 2FA check fails\r\n        }\r\n\r\n        return true\r\n      } catch (error) {\r\n        // Token invalid, clear auth\r\n        await logout()\r\n        return false\r\n      }\r\n    }\r\n\r\n    function updateActivity() {\r\n      lastActivity.value = new Date()\r\n    }\r\n\r\n    // 2FA Actions\r\n    async function checkTwoFactorStatus() {\r\n      try {\r\n        const status = await authService.getTwoFactorStatus()\r\n        twoFactorStatus.value = status\r\n        return status\r\n      } catch (error) {\r\n        console.error('Failed to check 2FA status:', error)\r\n        twoFactorStatus.value = null\r\n        throw error\r\n      }\r\n    }\r\n\r\n    async function enableTwoFactor() {\r\n      try {\r\n        const setup = await authService.enableTwoFactor()\r\n        twoFactorSetup.value = setup\r\n        return setup\r\n      } catch (error) {\r\n        console.error('Failed to enable 2FA:', error)\r\n        throw error\r\n      }\r\n    }\r\n\r\n    async function verifyTwoFactor(token: string, method: 'totp' | 'backup_code' = 'totp') {\r\n      try {\r\n        const response = await authService.verifyTwoFactor(token, method)\r\n        if (response.success && response.user) {\r\n          user.value = response.user\r\n          twoFactorPending.value = false\r\n          twoFactorStatus.value = { enabled: true, method }\r\n        }\r\n        return response\r\n      } catch (error) {\r\n        console.error('Failed to verify 2FA:', error)\r\n        throw error\r\n      }\r\n    }\r\n\r\n    async function disableTwoFactor() {\r\n      try {\r\n        const response = await authService.disableTwoFactor()\r\n        if (response.success) {\r\n          twoFactorStatus.value = { enabled: false }\r\n          twoFactorSetup.value = null\r\n        }\r\n        return response\r\n      } catch (error) {\r\n        console.error('Failed to disable 2FA:', error)\r\n        throw error\r\n      }\r\n    }\r\n\r\n    async function regenerateBackupCodes() {\r\n      try {\r\n        const response = await authService.regenerateBackupCodes()\r\n        if (twoFactorSetup.value) {\r\n          twoFactorSetup.value.backup_codes = response.backup_codes\r\n        }\r\n        return response\r\n      } catch (error) {\r\n        console.error('Failed to regenerate backup codes:', error)\r\n        throw error\r\n      }\r\n    }\r\n\r\n    function setTwoFactorPending(pending: boolean) {\r\n      twoFactorPending.value = pending\r\n    }\r\n\r\n    function clearTwoFactorSetup() {\r\n      twoFactorSetup.value = null\r\n    }\r\n\r\n    return {\r\n      // State\r\n      user,\r\n      token,\r\n      isAuthenticated,\r\n      permissions,\r\n      lastActivity,\r\n      twoFactorStatus,\r\n      twoFactorPending,\r\n      twoFactorSetup,\r\n      // Getters\r\n      hasPermission,\r\n      hasRole,\r\n      requiresTwoFactor,\r\n      isTwoFactorVerified,\r\n      // Actions\r\n      login,\r\n      logout,\r\n      refreshToken,\r\n      checkAuth,\r\n      updateActivity,\r\n      // 2FA Actions\r\n      checkTwoFactorStatus,\r\n      enableTwoFactor,\r\n      verifyTwoFactor,\r\n      disableTwoFactor,\r\n      regenerateBackupCodes,\r\n      setTwoFactorPending,\r\n      clearTwoFactorSetup\r\n    }\r\n  },\r\n  {\r\n    persist: {\r\n      paths: ['user', 'isAuthenticated', 'permissions', 'twoFactorStatus'] // Don't persist token or temp 2FA data\r\n    }\r\n  }\r\n)\r\n\r\n","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport interface Breadcrumb {\r\n  label: string\r\n  path: string\r\n}\r\n\r\nexport const useUIStore = defineStore(\r\n  'ui',\r\n  () => {\r\n    // State\r\n    const sidebarExpanded = ref(true)\r\n    const theme = ref<'light' | 'dark' | 'auto'>('light')\r\n    const activeModal = ref<string | null>(null)\r\n    const mobileMenuOpen = ref(false)\r\n    const breadcrumbs = ref<Breadcrumb[]>([])\r\n    const notifications = ref<any[]>([])\r\n\r\n    // Getters\r\n    const isDarkMode = computed(() => {\r\n      if (theme.value === 'auto') {\r\n        return window.matchMedia('(prefers-color-scheme: dark)').matches\r\n      }\r\n      return theme.value === 'dark'\r\n    })\r\n\r\n    // Actions\r\n    function toggleSidebar() {\r\n      sidebarExpanded.value = !sidebarExpanded.value\r\n    }\r\n\r\n    function setTheme(newTheme: 'light' | 'dark' | 'auto') {\r\n      theme.value = newTheme\r\n      applyTheme()\r\n    }\r\n\r\n    function applyTheme() {\r\n      const isDark = isDarkMode.value\r\n      if (isDark) {\r\n        document.documentElement.classList.add('dark')\r\n      } else {\r\n        document.documentElement.classList.remove('dark')\r\n      }\r\n    }\r\n\r\n    function openModal(modalName: string) {\r\n      activeModal.value = modalName\r\n    }\r\n\r\n    function closeModal() {\r\n      activeModal.value = null\r\n    }\r\n\r\n    function toggleMobileMenu() {\r\n      mobileMenuOpen.value = !mobileMenuOpen.value\r\n    }\r\n\r\n    function setBreadcrumbs(crumbs: Breadcrumb[]) {\r\n      breadcrumbs.value = crumbs\r\n    }\r\n\r\n    function addNotification(notification: any) {\r\n      notifications.value.unshift(notification)\r\n      // Auto-remove after 5 seconds\r\n      setTimeout(() => {\r\n        const index = notifications.value.indexOf(notification)\r\n        if (index !== -1) {\r\n          notifications.value.splice(index, 1)\r\n        }\r\n      }, 5000)\r\n    }\r\n\r\n    function removeNotification(notification: any) {\r\n      const index = notifications.value.indexOf(notification)\r\n      if (index !== -1) {\r\n        notifications.value.splice(index, 1)\r\n      }\r\n    }\r\n\r\n    // Initialize theme on store creation\r\n    applyTheme()\r\n\r\n    return {\r\n      // State\r\n      sidebarExpanded,\r\n      theme,\r\n      activeModal,\r\n      mobileMenuOpen,\r\n      breadcrumbs,\r\n      notifications,\r\n      // Getters\r\n      isDarkMode,\r\n      // Actions\r\n      toggleSidebar,\r\n      setTheme,\r\n      applyTheme,\r\n      openModal,\r\n      closeModal,\r\n      toggleMobileMenu,\r\n      setBreadcrumbs,\r\n      addNotification,\r\n      removeNotification\r\n    }\r\n  },\r\n  {\r\n    persist: {\r\n      paths: ['sidebarExpanded', 'theme']\r\n    }\r\n  }\r\n)\r\n\r\n\r\n","/**\r\n * Retry utility with exponential backoff for async operations\r\n *\r\n * Provides configurable retry logic for network requests, API calls,\r\n * and other async operations with intelligent backoff strategies.\r\n */\r\n\r\nexport interface RetryOptions {\r\n  /** Maximum number of retry attempts */\r\n  maxAttempts?: number\r\n  /** Initial delay in milliseconds */\r\n  initialDelay?: number\r\n  /** Maximum delay between retries */\r\n  maxDelay?: number\r\n  /** Backoff multiplier */\r\n  backoffFactor?: number\r\n  /** Jitter to randomize delays */\r\n  jitter?: boolean\r\n  /** Should retry on specific error types */\r\n  retryCondition?: (error: Error) => boolean\r\n  /** Callback before each retry attempt */\r\n  onRetry?: (attempt: number, error: Error, delay: number) => void\r\n  /** Abort signal for cancellation */\r\n  signal?: AbortSignal\r\n}\r\n\r\nexport interface RetryResult<T> {\r\n  success: boolean\r\n  data?: T\r\n  error?: Error\r\n  attempts: number\r\n  totalDuration: number\r\n}\r\n\r\n/**\r\n * Default retry condition - retries on network errors and 5xx status codes\r\n */\r\nconst defaultRetryCondition = (error: Error): boolean => {\r\n  // Network errors (fetch failures, timeouts)\r\n  if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n    return true\r\n  }\r\n\r\n  // Abort errors (user cancelled)\r\n  if (error.name === 'AbortError') {\r\n    return false\r\n  }\r\n\r\n  // Custom API errors with retry flag\r\n  if (error instanceof ApiError && error.retryable) {\r\n    return true\r\n  }\r\n\r\n  // HTTP status codes\r\n  if ('status' in error && typeof error.status === 'number') {\r\n    const status = error.status as number\r\n    // Retry on 5xx server errors, timeouts, rate limits\r\n    return status >= 500 || status === 408 || status === 429\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * Custom API error class with retryability flag\r\n */\r\nexport class ApiError extends Error {\r\n  public readonly status?: number\r\n  public readonly retryable: boolean\r\n  public readonly code?: string\r\n\r\n  constructor(\r\n    message: string,\r\n    status?: number,\r\n    retryable: boolean = false,\r\n    code?: string\r\n  ) {\r\n    super(message)\r\n    this.name = 'ApiError'\r\n    this.status = status\r\n    this.retryable = retryable\r\n    this.code = code\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate delay with exponential backoff and optional jitter\r\n */\r\nconst calculateDelay = (\r\n  attempt: number,\r\n  initialDelay: number,\r\n  maxDelay: number,\r\n  backoffFactor: number,\r\n  jitter: boolean\r\n): number => {\r\n  const exponentialDelay = initialDelay * Math.pow(backoffFactor, attempt - 1)\r\n  const clampedDelay = Math.min(exponentialDelay, maxDelay)\r\n\r\n  if (jitter) {\r\n    // Add random jitter (25% of delay)\r\n    const jitterRange = clampedDelay * 0.25\r\n    return clampedDelay + (Math.random() * 2 - 1) * jitterRange\r\n  }\r\n\r\n  return clampedDelay\r\n}\r\n\r\n/**\r\n * Sleep for specified milliseconds\r\n */\r\nconst sleep = (ms: number, signal?: AbortSignal): Promise<void> => {\r\n  return new Promise((resolve, reject) => {\r\n    if (signal?.aborted) {\r\n      reject(new Error('Operation cancelled'))\r\n      return\r\n    }\r\n\r\n    const timeout = setTimeout(resolve, ms)\r\n\r\n    if (signal) {\r\n      signal.addEventListener('abort', () => {\r\n        clearTimeout(timeout)\r\n        reject(new Error('Operation cancelled'))\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * Retry an async operation with exponential backoff\r\n */\r\nexport async function withRetry<T>(\r\n  operation: () => Promise<T>,\r\n  options: RetryOptions = {}\r\n): Promise<RetryResult<T>> {\r\n  const {\r\n    maxAttempts = 3,\r\n    initialDelay = 1000,\r\n    maxDelay = 30000,\r\n    backoffFactor = 2,\r\n    jitter = true,\r\n    retryCondition = defaultRetryCondition,\r\n    onRetry,\r\n    signal\r\n  } = options\r\n\r\n  const startTime = Date.now()\r\n  let lastError: Error\r\n\r\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n    try {\r\n      if (signal?.aborted) {\r\n        throw new Error('Operation cancelled')\r\n      }\r\n\r\n      const result = await operation()\r\n      return {\r\n        success: true,\r\n        data: result,\r\n        attempts: attempt,\r\n        totalDuration: Date.now() - startTime\r\n      }\r\n    } catch (error) {\r\n      lastError = error instanceof Error ? error : new Error(String(error))\r\n\r\n      // Don't retry if this is the last attempt\r\n      if (attempt === maxAttempts) {\r\n        break\r\n      }\r\n\r\n      // Check if we should retry this error\r\n      if (!retryCondition(lastError)) {\r\n        break\r\n      }\r\n\r\n      // Calculate delay for next attempt\r\n      const delay = calculateDelay(attempt, initialDelay, maxDelay, backoffFactor, jitter)\r\n\r\n      // Notify about retry\r\n      onRetry?.(attempt, lastError, delay)\r\n\r\n      // Wait before retrying\r\n      try {\r\n        await sleep(delay, signal)\r\n      } catch (sleepError) {\r\n        // Sleep was interrupted (cancelled)\r\n        return {\r\n          success: false,\r\n          error: sleepError instanceof Error ? sleepError : new Error('Operation cancelled'),\r\n          attempts: attempt,\r\n          totalDuration: Date.now() - startTime\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    success: false,\r\n    error: lastError,\r\n    attempts: maxAttempts,\r\n    totalDuration: Date.now() - startTime\r\n  }\r\n}\r\n\r\n/**\r\n * Retry wrapper for fetch requests with automatic retry headers\r\n */\r\nexport async function fetchWithRetry(\r\n  url: string,\r\n  options: RequestInit & { retryOptions?: RetryOptions } = {}\r\n): Promise<Response> {\r\n  const { retryOptions, ...fetchOptions } = options\r\n\r\n  const operation = async (): Promise<Response> => {\r\n    const response = await fetch(url, fetchOptions)\r\n\r\n    // Throw error for non-2xx responses\r\n    if (!response.ok) {\r\n      const error = new ApiError(\r\n        `HTTP ${response.status}: ${response.statusText}`,\r\n        response.status,\r\n        response.status >= 500 || response.status === 429 // Retryable server errors\r\n      )\r\n      throw error\r\n    }\r\n\r\n    return response\r\n  }\r\n\r\n  const result = await withRetry(operation, retryOptions)\r\n\r\n  if (!result.success) {\r\n    throw result.error\r\n  }\r\n\r\n  return result.data!\r\n}\r\n\r\n/**\r\n * Retry wrapper for any async function\r\n */\r\nexport function createRetryableFunction<T extends (...args: any[]) => Promise<any>>(\r\n  fn: T,\r\n  retryOptions: RetryOptions = {}\r\n): T {\r\n  return ((...args: Parameters<T>) => {\r\n    const operation = () => fn(...args)\r\n    return withRetry(operation, retryOptions)\r\n  }) as T\r\n}\r\n\r\n/**\r\n * Hook for React-style error boundaries (Vue composable)\r\n */\r\nexport function useRetryableOperation<T>(\r\n  operation: () => Promise<T>,\r\n  options: RetryOptions & {\r\n    autoRetry?: boolean\r\n    autoRetryDelay?: number\r\n  } = {}\r\n) {\r\n  const { autoRetry = false, autoRetryDelay = 5000, ...retryOptions } = options\r\n\r\n  let retryTimeout: number | null = null\r\n\r\n  const execute = async (): Promise<RetryResult<T>> => {\r\n    const result = await withRetry(operation, retryOptions)\r\n\r\n    // Auto-retry on network errors after delay\r\n    if (!result.success && autoRetry && retryCondition(result.error!)) {\r\n      if (retryTimeout) clearTimeout(retryTimeout)\r\n      retryTimeout = window.setTimeout(() => {\r\n        execute() // Recursive retry\r\n      }, autoRetryDelay)\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  const cancel = () => {\r\n    if (retryTimeout) {\r\n      clearTimeout(retryTimeout)\r\n      retryTimeout = null\r\n    }\r\n  }\r\n\r\n  return { execute, cancel }\r\n}\r\n","/**\r\n * Error Boundary Composable\r\n *\r\n * Provides centralized error handling logic for the application.\r\n * Integrates with retry utility and logging systems.\r\n */\r\n\r\nimport { ref, computed } from 'vue'\r\nimport { withRetry, RetryOptions, ApiError } from '@/utils/retry'\r\n\r\n// Error types for categorization\r\nexport enum ErrorType {\r\n  NETWORK = 'network',\r\n  API = 'api',\r\n  VALIDATION = 'validation',\r\n  AUTHENTICATION = 'authentication',\r\n  AUTHORIZATION = 'authorization',\r\n  BUSINESS_LOGIC = 'business_logic',\r\n  UNKNOWN = 'unknown'\r\n}\r\n\r\nexport interface ErrorContext {\r\n  component?: string\r\n  operation?: string\r\n  userId?: string\r\n  url?: string\r\n  timestamp?: string\r\n  stack?: string\r\n  info?: string\r\n  [key: string]: any\r\n}\r\n\r\nexport interface ErrorLogEntry {\r\n  id: string\r\n  type: ErrorType\r\n  message: string\r\n  context: ErrorContext\r\n  timestamp: Date\r\n  userAgent: string\r\n  resolved: boolean\r\n}\r\n\r\n// Reactive state\r\nconst errorLog = ref<ErrorLogEntry[]>([])\r\nconst maxLogEntries = 100\r\n\r\n/**\r\n * Categorize error type based on error properties\r\n */\r\nexport function categorizeError(error: Error): ErrorType {\r\n  // Network errors\r\n  if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n    return ErrorType.NETWORK\r\n  }\r\n\r\n  // API errors\r\n  if (error instanceof ApiError) {\r\n    if (error.status === 401) return ErrorType.AUTHENTICATION\r\n    if (error.status === 403) return ErrorType.AUTHORIZATION\r\n    if (error.status === 422) return ErrorType.VALIDATION\r\n    return ErrorType.API\r\n  }\r\n\r\n  // Authentication errors\r\n  if (error.message.includes('unauthorized') || error.message.includes('authentication')) {\r\n    return ErrorType.AUTHENTICATION\r\n  }\r\n\r\n  // Authorization errors\r\n  if (error.message.includes('forbidden') || error.message.includes('permission')) {\r\n    return ErrorType.AUTHORIZATION\r\n  }\r\n\r\n  // Validation errors\r\n  if (error.message.includes('validation') || error.message.includes('invalid')) {\r\n    return ErrorType.VALIDATION\r\n  }\r\n\r\n  return ErrorType.UNKNOWN\r\n}\r\n\r\n/**\r\n * Check if error should trigger retry\r\n */\r\nexport function shouldRetry(error: Error): boolean {\r\n  const errorType = categorizeError(error)\r\n\r\n  switch (errorType) {\r\n    case ErrorType.NETWORK:\r\n    case ErrorType.API:\r\n      return true\r\n    case ErrorType.AUTHENTICATION:\r\n    case ErrorType.AUTHORIZATION:\r\n    case ErrorType.VALIDATION:\r\n    case ErrorType.BUSINESS_LOGIC:\r\n      return false\r\n    default:\r\n      return false\r\n  }\r\n}\r\n\r\n/**\r\n * Get user-friendly error message\r\n */\r\nexport function getErrorMessage(error: Error, isDevelopment: boolean = false): string {\r\n  const errorType = categorizeError(error)\r\n\r\n  // Development mode: show technical details\r\n  if (isDevelopment) {\r\n    return error.message\r\n  }\r\n\r\n  // Production mode: show user-friendly messages\r\n  switch (errorType) {\r\n    case ErrorType.NETWORK:\r\n      return 'Connection failed. Please check your internet and try again.'\r\n    case ErrorType.API:\r\n      return 'Server error occurred. Please try again later.'\r\n    case ErrorType.AUTHENTICATION:\r\n      return 'Please sign in to continue.'\r\n    case ErrorType.AUTHORIZATION:\r\n      return 'You don\\'t have permission to perform this action.'\r\n    case ErrorType.VALIDATION:\r\n      return 'Please check your input and try again.'\r\n    case ErrorType.BUSINESS_LOGIC:\r\n      return 'Unable to complete the request. Please try again.'\r\n    default:\r\n      return 'Something went wrong. Please try again.'\r\n  }\r\n}\r\n\r\n/**\r\n * Log error to storage and external services\r\n */\r\nexport function logError(error: Error, context: ErrorContext = {}): string {\r\n  const isDevelopment = import.meta.env.DEV\r\n  const errorId = crypto.randomUUID()\r\n  const errorType = categorizeError(error)\r\n\r\n  const logEntry: ErrorLogEntry = {\r\n    id: errorId,\r\n    type: errorType,\r\n    message: error.message,\r\n    context: {\r\n      ...context,\r\n      userAgent: navigator.userAgent,\r\n      url: window.location.href,\r\n      timestamp: new Date().toISOString()\r\n    },\r\n    timestamp: new Date(),\r\n    userAgent: navigator.userAgent,\r\n    resolved: false\r\n  }\r\n\r\n  // Add to local log\r\n  errorLog.value.unshift(logEntry)\r\n\r\n  // Keep only max entries\r\n  if (errorLog.value.length > maxLogEntries) {\r\n    errorLog.value = errorLog.value.slice(0, maxLogEntries)\r\n  }\r\n\r\n  // Log to console in development\r\n  if (isDevelopment) {\r\n    console.group(` Error [${errorType}]: ${error.message}`)\r\n    console.error(error)\r\n    console.log('Context:', context)\r\n    console.log('Error ID:', errorId)\r\n    console.groupEnd()\r\n  }\r\n\r\n  // Send to external logging service (Sentry, etc.)\r\n  sendToExternalLogger(logEntry)\r\n\r\n  return errorId\r\n}\r\n\r\n/**\r\n * Send error to external logging service\r\n */\r\nasync function sendToExternalLogger(logEntry: ErrorLogEntry): Promise<void> {\r\n  // Check if external logging is enabled\r\n  const sentryDsn = import.meta.env.VITE_SENTRY_DSN\r\n  const logRocketId = import.meta.env.VITE_LOGROCKET_ID\r\n\r\n  try {\r\n    // Sentry integration\r\n    if (sentryDsn && window.Sentry) {\r\n      window.Sentry.captureException(new Error(logEntry.message), {\r\n        tags: {\r\n          errorType: logEntry.type,\r\n          errorId: logEntry.id\r\n        },\r\n        extra: logEntry.context\r\n      })\r\n    }\r\n\r\n    // LogRocket integration\r\n    if (logRocketId && window.LogRocket) {\r\n      window.LogRocket.captureException(new Error(logEntry.message), {\r\n        tags: {\r\n          errorType: logEntry.type,\r\n          errorId: logEntry.id\r\n        },\r\n        extra: logEntry.context\r\n      })\r\n    }\r\n\r\n    // Custom logging endpoint\r\n    const loggingEndpoint = import.meta.env.VITE_ERROR_LOGGING_ENDPOINT\r\n    if (loggingEndpoint) {\r\n      await fetch(loggingEndpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(logEntry)\r\n      })\r\n    }\r\n  } catch (loggingError) {\r\n    // Don't throw if logging fails\r\n    console.warn('Failed to send error to external logger:', loggingError)\r\n  }\r\n}\r\n\r\n/**\r\n * Mark error as resolved\r\n */\r\nexport function markErrorResolved(errorId: string): void {\r\n  const entry = errorLog.value.find(e => e.id === errorId)\r\n  if (entry) {\r\n    entry.resolved = true\r\n  }\r\n}\r\n\r\n/**\r\n * Clear error log\r\n */\r\nexport function clearErrorLog(): void {\r\n  errorLog.value = []\r\n}\r\n\r\n/**\r\n * Get error statistics\r\n */\r\nexport function getErrorStats() {\r\n  const total = errorLog.value.length\r\n  const resolved = errorLog.value.filter(e => e.resolved).length\r\n  const unresolved = total - resolved\r\n\r\n  const byType = errorLog.value.reduce((acc, entry) => {\r\n    acc[entry.type] = (acc[entry.type] || 0) + 1\r\n    return acc\r\n  }, {} as Record<ErrorType, number>)\r\n\r\n  return {\r\n    total,\r\n    resolved,\r\n    unresolved,\r\n    byType\r\n  }\r\n}\r\n\r\n/**\r\n * Retryable operation wrapper\r\n */\r\nexport function useRetryableOperation<T>(\r\n  operation: () => Promise<T>,\r\n  options: RetryOptions & {\r\n    onError?: (error: Error) => void\r\n    onRetry?: (attempt: number, error: Error) => void\r\n  } = {}\r\n) {\r\n  const { onError, onRetry, ...retryOptions } = options\r\n\r\n  const execute = async (): Promise<{ success: boolean; data?: T; error?: Error }> => {\r\n    try {\r\n      const result = await withRetry(operation, {\r\n        ...retryOptions,\r\n        onRetry: (attempt, error, delay) => {\r\n          logError(error, { operation: operation.name, attempt, delay })\r\n          onRetry?.(attempt, error)\r\n        }\r\n      })\r\n\r\n      if (result.success) {\r\n        return { success: true, data: result.data }\r\n      } else {\r\n        const error = result.error!\r\n        logError(error, { operation: operation.name, attempts: result.attempts })\r\n        onError?.(error)\r\n        return { success: false, error }\r\n      }\r\n    } catch (error) {\r\n      const err = error instanceof Error ? error : new Error(String(error))\r\n      logError(err, { operation: operation.name })\r\n      onError?.(err)\r\n      return { success: false, error: err }\r\n    }\r\n  }\r\n\r\n  return { execute }\r\n}\r\n\r\n/**\r\n * Global error handler for unhandled promise rejections\r\n */\r\nexport function setupGlobalErrorHandlers(): () => void {\r\n  const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\r\n    const error = event.reason instanceof Error\r\n      ? event.reason\r\n      : new Error(String(event.reason))\r\n\r\n    logError(error, {\r\n      type: 'unhandled_promise_rejection',\r\n      originalReason: event.reason\r\n    })\r\n\r\n    // Prevent default browser error handling\r\n    event.preventDefault()\r\n  }\r\n\r\n  const handleError = (event: ErrorEvent) => {\r\n    logError(event.error || new Error(event.message), {\r\n      type: 'unhandled_error',\r\n      filename: event.filename,\r\n      lineno: event.lineno,\r\n      colno: event.colno\r\n    })\r\n\r\n    // Prevent default browser error handling\r\n    event.preventDefault()\r\n  }\r\n\r\n  // Add global handlers\r\n  window.addEventListener('unhandledrejection', handleUnhandledRejection)\r\n  window.addEventListener('error', handleError)\r\n\r\n  // Return cleanup function\r\n  return () => {\r\n    window.removeEventListener('unhandledrejection', handleUnhandledRejection)\r\n    window.removeEventListener('error', handleError)\r\n  }\r\n}\r\n\r\n// Computed properties for templates\r\nexport const errorStats = computed(() => getErrorStats())\r\nexport const recentErrors = computed(() =>\r\n  errorLog.value.slice(0, 10)\r\n)\r\n\r\n// Global type declarations for external services\r\ndeclare global {\r\n  interface Window {\r\n    Sentry?: any\r\n    LogRocket?: any\r\n  }\r\n}\r\n","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport interface Notification {\r\n  id: string\r\n  type: 'success' | 'error' | 'warning' | 'info'\r\n  title: string\r\n  message: string\r\n  timestamp: Date\r\n  read: boolean\r\n  action?: {\r\n    label: string\r\n    handler: () => void\r\n  }\r\n}\r\n\r\nexport const useNotificationStore = defineStore(\r\n  'notification',\r\n  () => {\r\n    // State\r\n    const notifications = ref<Notification[]>([])\r\n    const wsConnected = ref(false)\r\n\r\n    // Getters\r\n    const unreadCount = computed(() => {\r\n      return notifications.value.filter((n) => !n.read).length\r\n    })\r\n\r\n    const unreadNotifications = computed(() => {\r\n      return notifications.value.filter((n) => !n.read)\r\n    })\r\n\r\n    // Actions\r\n    function addNotification(notification: Omit<Notification, 'id' | 'timestamp' | 'read'>) {\r\n      const newNotification: Notification = {\r\n        ...notification,\r\n        id: `notif-${Date.now()}-${Math.random()}`,\r\n        timestamp: new Date(),\r\n        read: false\r\n      }\r\n      notifications.value.unshift(newNotification)\r\n\r\n      // Auto-dismiss after 5 seconds for success/info\r\n      if (notification.type === 'success' || notification.type === 'info') {\r\n        setTimeout(() => {\r\n          removeNotification(newNotification.id)\r\n        }, 5000)\r\n      }\r\n\r\n      return newNotification.id\r\n    }\r\n\r\n    function removeNotification(id: string) {\r\n      const index = notifications.value.findIndex((n) => n.id === id)\r\n      if (index !== -1) {\r\n        notifications.value.splice(index, 1)\r\n      }\r\n    }\r\n\r\n    function markAsRead(id: string) {\r\n      const notification = notifications.value.find((n) => n.id === id)\r\n      if (notification) {\r\n        notification.read = true\r\n      }\r\n    }\r\n\r\n    function markAllAsRead() {\r\n      notifications.value.forEach((n) => {\r\n        n.read = true\r\n      })\r\n    }\r\n\r\n    function clearAll() {\r\n      notifications.value = []\r\n    }\r\n\r\n    function connectWebSocket() {\r\n      // TODO: Implement WebSocket connection\r\n      wsConnected.value = true\r\n    }\r\n\r\n    function disconnectWebSocket() {\r\n      // TODO: Implement WebSocket disconnection\r\n      wsConnected.value = false\r\n    }\r\n\r\n    return {\r\n      // State\r\n      notifications,\r\n      wsConnected,\r\n      // Getters\r\n      unreadCount,\r\n      unreadNotifications,\r\n      // Actions\r\n      addNotification,\r\n      removeNotification,\r\n      markAsRead,\r\n      markAllAsRead,\r\n      clearAll,\r\n      connectWebSocket,\r\n      disconnectWebSocket\r\n    }\r\n  },\r\n  {\r\n    persist: {\r\n      paths: ['notifications'] // Persist notifications\r\n    }\r\n  }\r\n)\r\n\r\n","import { apiService } from './apiService'\r\nimport type {\r\n  Asset,\r\n  AssetDetailResponse,\r\n  GetAssetsParams,\r\n  PaginatedResponse,\r\n  SearchQuery,\r\n  SearchResponse,\r\n  BulkOperationRequest,\r\n  BulkOperationResponse\r\n} from '@/types/api'\r\nimport type {\r\n  AxiosProgressEvent,\r\n  AxiosRequestHeaders,\r\n  InternalAxiosRequestConfig\r\n} from 'axios'\r\n\r\nclass AssetService {\r\n  /**\r\n   * Get paginated list of assets\r\n   */\r\n  async getAssets(params?: GetAssetsParams): Promise<PaginatedResponse<Asset>> {\r\n    const queryParams: Record<string, string | number> = {}\r\n\r\n    if (params?.page) {\r\n      queryParams.page = params.page\r\n    }\r\n    if (params?.page_size) {\r\n      queryParams.page_size = params.page_size\r\n    }\r\n    if (params?.sort) {\r\n      queryParams.ordering = params.sort\r\n    }\r\n    if (params?.type) {\r\n      queryParams.type = params.type\r\n    }\r\n    if (params?.tags) {\r\n      queryParams.tags = params.tags\r\n    }\r\n    if (params?.search) {\r\n      queryParams.search = params.search\r\n    }\r\n\r\n    const config: InternalAxiosRequestConfig = {\r\n      params: queryParams,\r\n      headers: {} as AxiosRequestHeaders\r\n    }\r\n    return apiService.get<PaginatedResponse<Asset>>(\r\n      '/v4/dam/assets/',\r\n      config,\r\n      false // Don't cache asset lists\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Get single asset by ID\r\n   */\r\n  async getAsset(id: number): Promise<AssetDetailResponse> {\r\n    return apiService.get<AssetDetailResponse>(\r\n      `/v4/dam/assets/${id}/`,\r\n      undefined,\r\n      true // Cache asset details for 5 minutes\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Search assets with advanced query\r\n   */\r\n  async searchAssets(query: SearchQuery): Promise<SearchResponse> {\r\n    return apiService.post<SearchResponse>('/v4/dam/assets/search/', query)\r\n  }\r\n\r\n  /**\r\n   * Perform bulk operations on assets\r\n   */\r\n  async bulkOperation(\r\n    operation: BulkOperationRequest\r\n  ): Promise<BulkOperationResponse> {\r\n    return apiService.post<BulkOperationResponse>(\r\n      '/v4/dam/assets/bulk/',\r\n      operation\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Update asset metadata\r\n   */\r\n  async updateAsset(\r\n    id: number,\r\n    data: Partial<Asset>\r\n  ): Promise<AssetDetailResponse> {\r\n    return apiService.put<AssetDetailResponse>(`/v4/dam/assets/${id}/`, data)\r\n  }\r\n\r\n  /**\r\n   * Delete asset\r\n   */\r\n  async deleteAsset(id: number): Promise<void> {\r\n    return apiService.delete<void>(`/v4/dam/assets/${id}/`)\r\n  }\r\n\r\n  /**\r\n   * Upload new asset\r\n   */\r\n  async uploadAsset(\r\n    formData: FormData,\r\n    config?: {\r\n      onUploadProgress?: (event: AxiosProgressEvent) => void\r\n      signal?: AbortSignal\r\n    }\r\n  ): Promise<Asset> {\r\n    const axiosConfig: InternalAxiosRequestConfig = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      } as AxiosRequestHeaders,\r\n      onUploadProgress: config?.onUploadProgress,\r\n      signal: config?.signal\r\n    }\r\n    return apiService.post<Asset>('/v4/dam/assets/upload/', formData, axiosConfig)\r\n  }\r\n}\r\n\r\nexport const assetService = new AssetService()\r\n","import type { ApiError } from '@/types/api'\r\n\r\n/**\r\n * Format API error to user-friendly message\r\n */\r\nexport function formatApiError(error: unknown): string {\r\n  if (typeof error === 'string') return error\r\n\r\n  if (error && typeof error === 'object' && 'message' in error) {\r\n    const apiError = error as ApiError\r\n    return apiError.message || ' '\r\n  }\r\n\r\n  return '  '\r\n}\r\n\r\n/**\r\n * Check if error is network error\r\n */\r\nexport function isNetworkError(error: unknown): boolean {\r\n  if (error && typeof error === 'object' && 'code' in error) {\r\n    const apiError = error as ApiError\r\n    return (\r\n      apiError.code === 'NETWORK_ERROR' ||\r\n      apiError.code === 'TIMEOUT' ||\r\n      apiError.code === 'ECONNABORTED'\r\n    )\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * Check if error is authentication error\r\n */\r\nexport function isAuthError(error: unknown): boolean {\r\n  if (error && typeof error === 'object' && 'code' in error) {\r\n    const apiError = error as ApiError\r\n    return apiError.code === 'UNAUTHORIZED' || apiError.code === 'FORBIDDEN'\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * Check if error is server error (5xx)\r\n */\r\nexport function isServerError(error: unknown): boolean {\r\n  if (error && typeof error === 'object' && 'code' in error) {\r\n    const apiError = error as ApiError\r\n    return apiError.code === 'SERVER_ERROR'\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * Get error code from error\r\n */\r\nexport function getErrorCode(error: unknown): string | null {\r\n  if (error && typeof error === 'object' && 'code' in error) {\r\n    const apiError = error as ApiError\r\n    return apiError.code\r\n  }\r\n  return null\r\n}\r\n\r\n/**\r\n * Get error details from error\r\n */\r\nexport function getErrorDetails(error: unknown): Record<string, unknown> | null {\r\n  if (error && typeof error === 'object' && 'details' in error) {\r\n    const apiError = error as ApiError\r\n    return apiError.details || null\r\n  }\r\n  return null\r\n}\r\n\r\n\r\n","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport { assetService } from '@/services/assetService'\r\nimport type { Asset, SearchQuery, SearchResponse, Facets } from '@/types/api'\r\nimport { formatApiError } from '@/utils/errors'\r\n\r\nexport interface SavedSearch {\r\n  id: string\r\n  name: string\r\n  query: string\r\n  filters?: SearchQuery['filters']\r\n  created_at: string\r\n}\r\n\r\nexport const useSearchStore = defineStore(\r\n  'search',\r\n  () => {\r\n    // State\r\n    const query = ref<string>('')\r\n    const results = ref<Asset[]>([])\r\n    const facets = ref<Facets>({})\r\n    const totalCount = ref(0)\r\n    const isLoading = ref(false)\r\n    const error = ref<string | null>(null)\r\n    const recentSearches = ref<string[]>([])\r\n    const savedSearches = ref<SavedSearch[]>([])\r\n    const searchHistory = ref<Array<{ query: string; timestamp: Date }>>([])\r\n\r\n    // Getters\r\n    const hasResults = computed(() => results.value.length > 0)\r\n    const resultCount = computed(() => totalCount.value)\r\n    const facetsSummary = computed(() => {\r\n      const summary: Record<string, number> = {}\r\n      Object.keys(facets.value).forEach((key) => {\r\n        const facet = facets.value[key]\r\n        if (facet) {\r\n          summary[key] = Object.values(facet).reduce((sum, count) => sum + count, 0)\r\n        }\r\n      })\r\n      return summary\r\n    })\r\n\r\n    // Actions\r\n    async function performSearch(searchQuery: string, limit: number = 8) {\r\n      if (!searchQuery.trim() || searchQuery.length < 2) {\r\n        results.value = []\r\n        totalCount.value = 0\r\n        facets.value = {}\r\n        return\r\n      }\r\n\r\n      query.value = searchQuery.trim()\r\n      isLoading.value = true\r\n      error.value = null\r\n\r\n      try {\r\n        const searchParams: SearchQuery = {\r\n          q: query.value,\r\n          limit,\r\n          offset: 0\r\n        }\r\n\r\n        const response: SearchResponse = await assetService.searchAssets(searchParams)\r\n\r\n        results.value = response.results\r\n        totalCount.value = response.count\r\n        facets.value = response.facets\r\n\r\n        // Add to recent searches (max 5)\r\n        addToRecent(query.value)\r\n\r\n        // Add to search history\r\n        searchHistory.value.unshift({\r\n          query: query.value,\r\n          timestamp: new Date()\r\n        })\r\n        if (searchHistory.value.length > 50) {\r\n          searchHistory.value = searchHistory.value.slice(0, 50)\r\n        }\r\n      } catch (err) {\r\n        error.value = formatApiError(err)\r\n        results.value = []\r\n        totalCount.value = 0\r\n        facets.value = {}\r\n        throw err\r\n      } finally {\r\n        isLoading.value = false\r\n      }\r\n    }\r\n\r\n    async function advancedSearch(searchParams: SearchQuery) {\r\n      isLoading.value = true\r\n      error.value = null\r\n\r\n      try {\r\n        const response: SearchResponse = await assetService.searchAssets(searchParams)\r\n\r\n        results.value = response.results\r\n        totalCount.value = response.count\r\n        facets.value = response.facets\r\n\r\n        if (searchParams.q) {\r\n          query.value = searchParams.q\r\n          addToRecent(searchParams.q)\r\n        }\r\n      } catch (err) {\r\n        error.value = formatApiError(err)\r\n        results.value = []\r\n        totalCount.value = 0\r\n        facets.value = {}\r\n        throw err\r\n      } finally {\r\n        isLoading.value = false\r\n      }\r\n    }\r\n\r\n    function clearSearch() {\r\n      query.value = ''\r\n      results.value = []\r\n      totalCount.value = 0\r\n      facets.value = {}\r\n      error.value = null\r\n    }\r\n\r\n    function addToRecent(searchQuery: string) {\r\n      // Remove if already exists\r\n      const index = recentSearches.value.indexOf(searchQuery)\r\n      if (index !== -1) {\r\n        recentSearches.value.splice(index, 1)\r\n      }\r\n\r\n      // Add to beginning\r\n      recentSearches.value.unshift(searchQuery)\r\n\r\n      // Keep only last 5\r\n      if (recentSearches.value.length > 5) {\r\n        recentSearches.value = recentSearches.value.slice(0, 5)\r\n      }\r\n\r\n      // Persist to localStorage\r\n      localStorage.setItem('recent_searches', JSON.stringify(recentSearches.value))\r\n    }\r\n\r\n    function loadRecentSearches() {\r\n      try {\r\n        const stored = localStorage.getItem('recent_searches')\r\n        if (stored) {\r\n          recentSearches.value = JSON.parse(stored)\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load recent searches:', err)\r\n        recentSearches.value = []\r\n      }\r\n    }\r\n\r\n    function saveSearch(name: string, query: string, filters?: SearchQuery['filters']) {\r\n      const savedSearch: SavedSearch = {\r\n        id: `saved-${Date.now()}`,\r\n        name,\r\n        query,\r\n        filters,\r\n        created_at: new Date().toISOString()\r\n      }\r\n\r\n      savedSearches.value.push(savedSearch)\r\n\r\n      // Persist to localStorage (in real app, this would be API call)\r\n      try {\r\n        localStorage.setItem('saved_searches', JSON.stringify(savedSearches.value))\r\n      } catch (err) {\r\n        console.error('Failed to save search:', err)\r\n      }\r\n\r\n      return savedSearch.id\r\n    }\r\n\r\n    function deleteSavedSearch(id: string) {\r\n      savedSearches.value = savedSearches.value.filter((s) => s.id !== id)\r\n\r\n      // Persist to localStorage\r\n      try {\r\n        localStorage.setItem('saved_searches', JSON.stringify(savedSearches.value))\r\n      } catch (err) {\r\n        console.error('Failed to delete saved search:', err)\r\n      }\r\n    }\r\n\r\n    function loadSavedSearches() {\r\n      try {\r\n        const stored = localStorage.getItem('saved_searches')\r\n        if (stored) {\r\n          savedSearches.value = JSON.parse(stored)\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load saved searches:', err)\r\n        savedSearches.value = []\r\n      }\r\n    }\r\n\r\n    // Initialize on store creation\r\n    loadRecentSearches()\r\n    loadSavedSearches()\r\n\r\n    return {\r\n      // State\r\n      query,\r\n      results,\r\n      facets,\r\n      totalCount,\r\n      isLoading,\r\n      error,\r\n      recentSearches,\r\n      savedSearches,\r\n      searchHistory,\r\n      // Getters\r\n      hasResults,\r\n      resultCount,\r\n      facetsSummary,\r\n      // Actions\r\n      performSearch,\r\n      advancedSearch,\r\n      clearSearch,\r\n      addToRecent,\r\n      loadRecentSearches,\r\n      saveSearch,\r\n      deleteSavedSearch,\r\n      loadSavedSearches\r\n    }\r\n  },\r\n  {\r\n    persist: {\r\n      paths: ['recentSearches', 'savedSearches']\r\n    }\r\n  }\r\n)\r\n\r\n","/**\r\n * Format file size in bytes to human-readable string\r\n */\r\nexport function formatFileSize(bytes: number): string {\r\n  if (bytes === 0) return '0 Bytes'\r\n  \r\n  const k = 1024\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n  \r\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`\r\n}\r\n\r\n/**\r\n * Format date to readable string\r\n */\r\nexport function formatDate(date: string | Date, format: 'short' | 'long' = 'short'): string {\r\n  const d = typeof date === 'string' ? new Date(date) : date\r\n  \r\n  if (format === 'short') {\r\n    return d.toLocaleDateString('ru-RU', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit'\r\n    })\r\n  }\r\n  \r\n  return d.toLocaleDateString('ru-RU', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}\r\n\r\n/**\r\n * Format relative time (e.g., \"2 hours ago\")\r\n */\r\nexport function formatRelativeTime(date: string | Date): string {\r\n  const d = typeof date === 'string' ? new Date(date) : date\r\n  const now = new Date()\r\n  const diffInSeconds = Math.floor((now.getTime() - d.getTime()) / 1000)\r\n  \r\n  if (diffInSeconds < 60) return ' '\r\n  if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} . `\r\n  if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} . `\r\n  if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} . `\r\n  \r\n  return formatDate(d, 'short')\r\n}\r\n\r\n/**\r\n * Truncate text with ellipsis\r\n */\r\nexport function truncate(text: string, maxLength: number): string {\r\n  if (text.length <= maxLength) return text\r\n  return `${text.slice(0, maxLength)}...`\r\n}\r\n\r\n\r\n","<template>\r\n  <div class=\"search-results\">\r\n    <!-- Results List -->\r\n    <div\r\n      v-for=\"(result, index) in results\"\r\n      :key=\"result.id\"\r\n      :data-result-index=\"index\"\r\n      :class=\"[\r\n        'flex items-center gap-3 p-3 cursor-pointer transition-colors',\r\n        'hover:bg-neutral-100 dark:hover:bg-neutral-100',\r\n        index === selectedIndex ? 'bg-primary-50 dark:bg-primary-50' : ''\r\n      ]\"\r\n      @click=\"$emit('select', result.id)\"\r\n      @mouseenter=\"$emit('hover', index)\"\r\n      role=\"option\"\r\n      :aria-selected=\"index === selectedIndex\"\r\n    >\r\n      <!-- Thumbnail -->\r\n      <div class=\"flex-shrink-0 w-12 h-12 bg-neutral-100 dark:bg-neutral-100 rounded-md overflow-hidden\">\r\n        <img\r\n          v-if=\"result.thumbnail_url\"\r\n          :src=\"result.thumbnail_url\"\r\n          :alt=\"result.label\"\r\n          class=\"w-full h-full object-cover\"\r\n          @error=\"handleImageError\"\r\n        />\r\n        <div\r\n          v-else\r\n          class=\"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-200\"\r\n        >\r\n          <svg class=\"w-6 h-6 text-neutral-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Metadata -->\r\n      <div class=\"flex-1 min-w-0\">\r\n        <div class=\"text-sm font-medium text-neutral-900 dark:text-neutral-900 truncate\">\r\n          {{ result.label }}\r\n        </div>\r\n        <div class=\"flex items-center gap-2 mt-1 text-xs text-neutral-600 dark:text-neutral-600\">\r\n          <span>{{ formatFileSize(result.size) }}</span>\r\n          <span></span>\r\n          <span>{{ formatDate(result.date_added) }}</span>\r\n          <span v-if=\"result.mime_type\" class=\"ml-1\">\r\n            {{ getFileTypeLabel(result.mime_type) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Arrow Icon -->\r\n      <svg\r\n        class=\"flex-shrink-0 w-5 h-5 text-neutral-400\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        viewBox=\"0 0 24 24\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <path\r\n          stroke-linecap=\"round\"\r\n          stroke-linejoin=\"round\"\r\n          stroke-width=\"2\"\r\n          d=\"M9 5l7 7-7 7\"\r\n        />\r\n      </svg>\r\n    </div>\r\n\r\n    <!-- View All Results Link -->\r\n    <div\r\n      v-if=\"totalCount > results.length\"\r\n      class=\"border-t border-neutral-300 dark:border-neutral-300 p-3\"\r\n    >\r\n      <button\r\n        class=\"w-full text-center text-sm text-primary-500 hover:text-primary-600 font-medium transition-colors\"\r\n        @click=\"$emit('view-all')\"\r\n      >\r\n           ({{ totalCount }})\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport type { Asset } from '@/types/api'\r\nimport { formatFileSize, formatDate } from '@/utils/formatters'\r\n\r\ninterface Props {\r\n  results: Asset[]\r\n  selectedIndex: number\r\n  totalCount: number\r\n}\r\n\r\ndefineProps<Props>()\r\n\r\nconst emit = defineEmits<{\r\n  select: [assetId: number]\r\n  'view-all': []\r\n  hover: [index: number]\r\n}>()\r\n\r\nfunction handleImageError(event: Event) {\r\n  const img = event.target as HTMLImageElement\r\n  img.style.display = 'none'\r\n}\r\n\r\nfunction getFileTypeLabel(mimeType: string): string {\r\n  if (mimeType.startsWith('image/')) return ''\r\n  if (mimeType.startsWith('video/')) return ''\r\n  if (mimeType.startsWith('audio/')) return ''\r\n  if (mimeType.includes('pdf')) return 'PDF'\r\n  if (mimeType.includes('word') || mimeType.includes('document')) return ''\r\n  return ''\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.search-results {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n\r\n","<template>\n  <div class=\"relative\" ref=\"searchContainer\">\n    <div class=\"relative\">\n      <input\n        ref=\"searchInput\"\n        v-model=\"localQuery\"\n        type=\"text\"\n        :placeholder=\"placeholder\"\n        :class=\"[\n          'w-full pl-10 pr-4 py-2 bg-neutral-100 dark:bg-neutral-100 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm',\n          'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent',\n          'transition-all duration-fast',\n          isFocused ? 'ring-2 ring-primary-500' : ''\n        ]\"\n        @input=\"handleInput\"\n        @focus=\"handleFocus\"\n        @blur=\"handleBlur\"\n        @keydown.esc=\"handleEscape\"\n        @keydown.arrow-down.prevent=\"handleArrowDown\"\n        @keydown.arrow-up.prevent=\"handleArrowUp\"\n        @keydown.enter.prevent=\"handleEnter\"\n        aria-label=\" \"\n        aria-autocomplete=\"list\"\n        :aria-expanded=\"showResults\"\n        :aria-controls=\"`search-results-${searchId}`\"\n      />\n      <svg\n        class=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-neutral-400 pointer-events-none\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        viewBox=\"0 0 24 24\"\n        aria-hidden=\"true\"\n      >\n        <path\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          stroke-width=\"2\"\n          d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n        />\n      </svg>\n      <button\n        v-if=\"localQuery\"\n        class=\"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-600 rounded transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center\"\n        @click=\"clearSearch\"\n        aria-label=\" \"\n        type=\"button\"\n      >\n        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M6 18L18 6M6 6l12 12\"\n          />\n        </svg>\n      </button>\n    </div>\n\n    <!-- Instant Results Dropdown -->\n    <Transition\n      enter-active-class=\"transition ease-out duration-200\"\n      enter-from-class=\"opacity-0 scale-95\"\n      enter-to-class=\"opacity-100 scale-100\"\n      leave-active-class=\"transition ease-in duration-150\"\n      leave-from-class=\"opacity-100 scale-100\"\n      leave-to-class=\"opacity-0 scale-95\"\n    >\n      <div\n        v-if=\"showResults\"\n        :id=\"`search-results-${searchId}`\"\n        class=\"absolute z-50 mt-2 w-full bg-neutral-0 dark:bg-neutral-0 border border-neutral-300 dark:border-neutral-300 rounded-md shadow-lg max-h-96 overflow-y-auto\"\n        role=\"listbox\"\n        aria-label=\" \"\n      >\n        <!-- Loading State -->\n        <div v-if=\"searchStore.isLoading\" class=\"p-4 text-center\">\n          <div class=\"animate-spin h-6 w-6 mx-auto text-primary-500\"></div>\n          <p class=\"mt-2 text-sm text-neutral-600 dark:text-neutral-600\">...</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-else-if=\"searchStore.error\" class=\"p-4 text-center\">\n          <p class=\"text-sm text-error\">{{ searchStore.error }}</p>\n        </div>\n\n        <!-- Results -->\n        <div v-else-if=\"searchStore.hasResults\">\n          <SearchResults\n            :results=\"searchStore.results\"\n            :selected-index=\"selectedIndex\"\n            :total-count=\"searchStore.totalCount\"\n            @select=\"handleResultSelect\"\n            @view-all=\"handleViewAll\"\n          />\n        </div>\n\n        <!-- No Results -->\n        <div\n          v-else-if=\"debouncedQuery && !searchStore.isLoading\"\n          class=\"p-4 text-center text-sm text-neutral-600 dark:text-neutral-600\"\n        >\n          <p>  </p>\n          <p class=\"mt-1 text-xs\">  </p>\n        </div>\n\n        <!-- Recent Searches (when input is focused but empty) -->\n        <div\n          v-else-if=\"isFocused && !debouncedQuery && searchStore.recentSearches.length > 0\"\n          class=\"p-2\"\n        >\n          <div class=\"px-3 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider\">\n             \n          </div>\n          <button\n            v-for=\"(recentQuery, index) in searchStore.recentSearches\"\n            :key=\"index\"\n            :class=\"[\n              'w-full text-left px-3 py-2 text-sm rounded-md transition-colors min-h-[44px]',\n              'hover:bg-neutral-100 dark:hover:bg-neutral-100',\n              'text-neutral-700 dark:text-neutral-700'\n            ]\"\n            @click=\"selectRecentSearch(recentQuery)\"\n            type=\"button\"\n            :aria-label=\"` : ${recentQuery}`\"\n          >\n            <div class=\"flex items-center gap-2\">\n              <svg class=\"w-4 h-4 text-neutral-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n                />\n              </svg>\n              <span>{{ recentQuery }}</span>\n            </div>\n          </button>\n        </div>\n      </div>\n    </Transition>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted, onUnmounted, nextTick } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useSearchStore } from '@/stores/searchStore'\nimport { useDebounce } from '@/composables/useDebounce'\nimport { onClickOutside } from '@vueuse/core'\nimport SearchResults from './SearchResults.vue'\n\ninterface Props {\n  placeholder?: string\n  autofocus?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  placeholder: '... (Ctrl+K)',\n  autofocus: false\n})\n\nconst emit = defineEmits<{\n  search: [query: string]\n  'result-selected': [assetId: number]\n}>()\n\nconst router = useRouter()\nconst searchStore = useSearchStore()\n\nconst searchContainer = ref<HTMLElement | null>(null)\nconst searchInput = ref<HTMLInputElement | null>(null)\nconst localQuery = ref('')\nconst isFocused = ref(false)\nconst selectedIndex = ref(-1)\n\n// Unique ID for accessibility\nconst searchId = ref(`search-${Math.random().toString(36).substring(2, 9)}`)\n\n// Debounce search query (300ms)\nconst debouncedQuery = useDebounce(localQuery, 300)\n\n// Show results when there's a query and input is focused\nconst showResults = computed(() => {\n  return (\n    isFocused.value &&\n    (debouncedQuery.value.length >= 2 || searchStore.recentSearches.length > 0) &&\n    !searchStore.error\n  )\n})\n\n// Watch debounced query and perform search\nwatch(debouncedQuery, async (newQuery) => {\n  if (newQuery && newQuery.length >= 2) {\n    await searchStore.performSearch(newQuery, 8) // Limit to 8 for instant results\n    emit('search', newQuery)\n  } else {\n    searchStore.clearSearch()\n  }\n})\n\n// Initialize with store query if exists\nwatch(\n  () => searchStore.query,\n  (newQuery) => {\n    if (newQuery && !localQuery.value) {\n      localQuery.value = newQuery\n    }\n  },\n  { immediate: true }\n)\n\nfunction handleInput() {\n  selectedIndex.value = -1\n}\n\nfunction handleFocus() {\n  isFocused.value = true\n  // Load recent searches if needed\n  if (!debouncedQuery.value) {\n    searchStore.loadRecentSearches()\n  }\n}\n\nfunction handleBlur() {\n  // Delay to allow click events on results\n  setTimeout(() => {\n    isFocused.value = false\n  }, 200)\n}\n\nfunction handleEscape() {\n  localQuery.value = ''\n  searchStore.clearSearch()\n  searchInput.value?.blur()\n  isFocused.value = false\n}\n\nfunction clearSearch() {\n  localQuery.value = ''\n  searchStore.clearSearch()\n  searchInput.value?.focus()\n}\n\nfunction handleArrowDown() {\n  if (!showResults.value || searchStore.results.length === 0) return\n\n  selectedIndex.value = Math.min(selectedIndex.value + 1, searchStore.results.length - 1)\n  scrollToSelected()\n}\n\nfunction handleArrowUp() {\n  if (!showResults.value) return\n\n  if (selectedIndex.value <= 0) {\n    selectedIndex.value = -1\n  } else {\n    selectedIndex.value--\n    scrollToSelected()\n  }\n}\n\nfunction handleEnter() {\n  if (selectedIndex.value >= 0 && selectedIndex.value < searchStore.results.length) {\n    handleResultSelect(searchStore.results[selectedIndex.value].id)\n  } else if (debouncedQuery.value) {\n    // Navigate to full search page\n    handleViewAll()\n  }\n}\n\nfunction handleResultSelect(assetId: number) {\n  emit('result-selected', assetId)\n  router.push(`/dam/assets/${assetId}`)\n  localQuery.value = ''\n  searchStore.clearSearch()\n  isFocused.value = false\n  searchInput.value?.blur()\n}\n\nfunction handleViewAll() {\n  if (debouncedQuery.value) {\n    router.push({\n      path: '/dam/search',\n      query: { q: debouncedQuery.value }\n    })\n    isFocused.value = false\n    searchInput.value?.blur()\n  }\n}\n\nfunction selectRecentSearch(query: string) {\n  localQuery.value = query\n  searchInput.value?.focus()\n}\n\nfunction scrollToSelected() {\n  nextTick(() => {\n    const resultsContainer = document.getElementById(`search-results-${searchId.value}`)\n    if (resultsContainer && selectedIndex.value >= 0) {\n      const selectedElement = resultsContainer.querySelector(\n        `[data-result-index=\"${selectedIndex.value}\"]`\n      )\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' })\n      }\n    }\n  })\n}\n\n// Keyboard shortcut: Ctrl+K\nfunction handleKeyDown(event: KeyboardEvent) {\n  if ((event.ctrlKey || event.metaKey) && event.key === 'k') {\n    event.preventDefault()\n    searchInput.value?.focus()\n  }\n}\n\n// Click outside to close\nonClickOutside(searchContainer, () => {\n  isFocused.value = false\n})\n\nonMounted(() => {\n  document.addEventListener('keydown', handleKeyDown)\n  if (props.autofocus) {\n    searchInput.value?.focus()\n  }\n})\n\nonUnmounted(() => {\n  document.removeEventListener('keydown', handleKeyDown)\n})\n</script>\n\n<style scoped>\n/* Additional styles if needed */\n</style>\n\n","import { ref, watch, onUnmounted, type Ref } from 'vue'\r\n\r\n/**\r\n * Debounce composable for delaying function execution\r\n * @param value - The value to debounce\r\n * @param delay - Delay in milliseconds (default: 300ms)\r\n * @returns Debounced value\r\n */\r\nexport function useDebounce<T>(value: Ref<T>, delay: number = 300) {\r\n  const debouncedValue = ref<T>(value.value) as Ref<T>\r\n  let timeoutId: ReturnType<typeof setTimeout> | null = null\r\n\r\n  const updateDebouncedValue = () => {\r\n    if (timeoutId) {\r\n      clearTimeout(timeoutId)\r\n    }\r\n    timeoutId = setTimeout(() => {\r\n      debouncedValue.value = value.value\r\n    }, delay)\r\n  }\r\n\r\n  watch(value, updateDebouncedValue, { immediate: true })\r\n\r\n  onUnmounted(() => {\r\n    if (timeoutId) {\r\n      clearTimeout(timeoutId)\r\n    }\r\n  })\r\n\r\n  return debouncedValue\r\n}\r\n\r\n","<template>\n  <header\n    class=\"fixed top-0 left-0 right-0 h-16 bg-neutral-0 dark:bg-neutral-0 border-b border-neutral-300 dark:border-neutral-300 z-50 flex items-center px-4\"\n  >\n    <!-- Left: Logo -->\n    <div class=\"flex-shrink-0 w-48\">\n      <router-link\n        to=\"/\"\n        class=\"flex items-center gap-2 text-lg font-semibold text-neutral-900 dark:text-neutral-900 hover:text-primary-500 transition-colors\"\n      >\n        <svg\n          class=\"w-8 h-8 text-primary-500\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n          />\n        </svg>\n        <span class=\"hidden sm:inline\">DAM System</span>\n      </router-link>\n    </div>\n\n    <!-- Center: Search -->\n    <div class=\"flex-1 max-w-2xl mx-4\">\n      <SearchBar\n        @search=\"handleSearch\"\n        @result-selected=\"handleResultSelected\"\n      />\n    </div>\n\n    <!-- Right: Actions -->\n    <div class=\"flex items-center gap-2 flex-shrink-0\">\n      <!-- Upload Button -->\n      <button\n        class=\"px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 transition-colors text-sm font-medium hidden sm:flex items-center gap-2 min-h-[44px] min-w-[44px]\"\n        @click=\"handleUpload\"\n        aria-label=\" \"\n        type=\"button\"\n      >\n        <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M12 4v16m8-8H4\"\n          />\n        </svg>\n        <span class=\"hidden md:inline\"></span>\n      </button>\n\n      <!-- Filters Toggle -->\n      <button\n        class=\"p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center\"\n        @click=\"handleFilterToggle\"\n        aria-label=\"\"\n        type=\"button\"\n      >\n        <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"\n          />\n        </svg>\n      </button>\n\n      <!-- Notifications -->\n      <button\n        class=\"relative p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center\"\n        @click=\"handleNotifications\"\n        :aria-label=\"`${unreadCount > 0 ? ` (${unreadCount} )` : ''}`\"\n        type=\"button\"\n      >\n        <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n          />\n        </svg>\n        <span\n          v-if=\"unreadCount > 0\"\n          class=\"absolute top-0 right-0 w-2 h-2 bg-error rounded-full\"\n          aria-label=\": {{ unreadCount }}\"\n        ></span>\n      </button>\n\n      <!-- User Menu -->\n      <div class=\"relative\" ref=\"userMenuRef\">\n        <button\n          class=\"flex items-center gap-2 p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px]\"\n          @click=\"toggleUserMenu\"\n          aria-label=\" \"\n          :aria-expanded=\"isUserMenuOpen\"\n          type=\"button\"\n        >\n          <div class=\"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center text-white text-sm font-medium\">\n            {{ userInitials }}\n          </div>\n          <svg\n            class=\"w-4 h-4 hidden sm:inline\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              d=\"M19 9l-7 7-7-7\"\n            />\n          </svg>\n        </button>\n\n        <!-- User Menu Dropdown -->\n        <div\n          v-if=\"isUserMenuOpen\"\n          class=\"absolute right-0 mt-2 w-48 bg-neutral-0 dark:bg-neutral-0 border border-neutral-300 dark:border-neutral-300 rounded-md shadow-lg py-1 z-50\"\n          @click.stop\n        >\n          <router-link\n            to=\"/settings/profile\"\n            class=\"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-100\"\n            @click=\"closeUserMenu\"\n          >\n            \n          </router-link>\n          <router-link\n            to=\"/settings\"\n            class=\"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-100\"\n            @click=\"closeUserMenu\"\n          >\n            \n          </router-link>\n          <hr class=\"my-1 border-neutral-300 dark:border-neutral-300\" />\n          <button\n            class=\"block w-full text-left px-4 py-2 text-sm text-error hover:bg-neutral-100 dark:hover:bg-neutral-100 min-h-[44px]\"\n            @click=\"handleLogout\"\n            type=\"button\"\n            aria-label=\"  \"\n          >\n            \n          </button>\n        </div>\n      </div>\n\n      <!-- Mobile Menu Toggle -->\n      <button\n        class=\"p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors sm:hidden min-w-[44px] min-h-[44px] flex items-center justify-center\"\n        @click=\"handleMobileMenuToggle\"\n        aria-label=\"\"\n        :aria-expanded=\"false\"\n        type=\"button\"\n      >\n        <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M4 6h16M4 12h16M4 18h16\"\n          />\n        </svg>\n      </button>\n    </div>\n  </header>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuthStore } from '@/stores/authStore'\nimport { useNotificationStore } from '@/stores/notificationStore'\nimport SearchBar from '@/components/DAM/SearchBar.vue'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst notificationStore = useNotificationStore()\n\nconst isUserMenuOpen = ref(false)\nconst userMenuRef = ref<HTMLElement | null>(null)\n\nconst unreadCount = computed(() => notificationStore.unreadCount)\nconst userInitials = computed(() => {\n  const user = authStore.user\n  if (!user) return 'U'\n  const name = user.first_name || user.username || ''\n  return name.charAt(0).toUpperCase() || 'U'\n})\n\nfunction handleSearch(query: string) {\n  emit('search', query)\n}\n\nfunction handleResultSelected(assetId: number) {\n  emit('result-selected', assetId)\n}\n\nfunction handleUpload() {\n  emit('upload')\n}\n\nfunction handleFilterToggle() {\n  emit('filter-toggle')\n}\n\nfunction handleNotifications() {\n  emit('notifications')\n}\n\nfunction toggleUserMenu() {\n  isUserMenuOpen.value = !isUserMenuOpen.value\n}\n\nfunction closeUserMenu() {\n  isUserMenuOpen.value = false\n}\n\nfunction handleLogout() {\n  authStore.logout()\n  router.push('/login')\n  closeUserMenu()\n}\n\nfunction handleMobileMenuToggle() {\n  emit('mobile-menu-toggle')\n}\n\n// Keyboard shortcut: Ctrl+K is handled by SearchBar component\n\n// Click outside to close user menu\nfunction handleClickOutside(event: MouseEvent) {\n  if (userMenuRef.value && !userMenuRef.value.contains(event.target as Node)) {\n    isUserMenuOpen.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\n\nconst emit = defineEmits<{\n  search: [query: string]\n  'result-selected': [assetId: number]\n  'filter-toggle': []\n  upload: []\n  notifications: []\n  'mobile-menu-toggle': []\n}>()\n</script>\n\n","<template>\n  <aside\n    :class=\"[\n      'fixed left-0 top-16 bottom-0 bg-neutral-0 dark:bg-neutral-0 border-r border-neutral-300 dark:border-neutral-300 transition-all duration-300 ease-in-out z-40 overflow-y-auto',\n      isExpanded ? 'w-70' : 'w-16'\n    ]\"\n  >\n    <!-- Toggle Button -->\n    <button\n      class=\"absolute top-4 right-2 p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center\"\n      @click=\"toggleSidebar\"\n      :aria-label=\"isExpanded ? '  ' : '  '\"\n      :aria-expanded=\"isExpanded\"\n      type=\"button\"\n    >\n      <svg\n        class=\"w-5 h-5\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path\n          v-if=\"isExpanded\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          stroke-width=\"2\"\n          d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\"\n        />\n        <path\n          v-else\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          stroke-width=\"2\"\n          d=\"M13 5l7 7-7 7M5 5l7 7-7 7\"\n        />\n      </svg>\n    </button>\n\n    <!-- Navigation -->\n    <nav class=\"pt-16 px-2\">\n      <ul class=\"space-y-1\">\n        <li v-for=\"item in navigationItems\" :key=\"item.path\">\n          <router-link\n            :to=\"item.path\"\n            :class=\"[\n              'flex items-center gap-3 px-3 py-2 rounded-md transition-colors',\n              isActive(item.path)\n                ? 'bg-primary-50 dark:bg-primary-50 text-primary-600 dark:text-primary-600'\n                : 'text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100'\n            ]\"\n            @click=\"handleNavigate(item.path)\"\n          >\n            <component :is=\"item.icon\" class=\"w-5 h-5 flex-shrink-0\" />\n            <span v-if=\"isExpanded\" class=\"text-sm font-medium\">\n              {{ item.label }}\n            </span>\n          </router-link>\n        </li>\n      </ul>\n    </nav>\n\n    <!-- Collections Section -->\n    <div v-if=\"isExpanded\" class=\"mt-6 px-2\">\n      <div class=\"flex items-center justify-between px-3 mb-2\">\n        <h3 class=\"text-xs font-semibold text-neutral-500 dark:text-neutral-500 uppercase\">\n          \n        </h3>\n      </div>\n      <ul class=\"space-y-1\">\n        <li v-for=\"collection in collections\" :key=\"collection.id\">\n          <router-link\n            :to=\"collection.path\"\n            :class=\"[\n              'flex items-center gap-3 px-3 py-2 rounded-md transition-colors',\n              isActive(collection.path)\n                ? 'bg-primary-50 dark:bg-primary-50 text-primary-600 dark:text-primary-600'\n                : 'text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100'\n            ]\"\n          >\n            <component :is=\"collection.icon\" class=\"w-5 h-5 flex-shrink-0\" />\n            <span class=\"text-sm\">{{ collection.label }}</span>\n          </router-link>\n        </li>\n      </ul>\n    </div>\n\n    <!-- Quick Actions -->\n    <div class=\"mt-auto px-2 pb-4\">\n      <button\n        class=\"w-full flex items-center gap-3 px-3 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 transition-colors min-h-[44px]\"\n        @click=\"handleNewFolder\"\n        type=\"button\"\n        aria-label=\"  \"\n      >\n        <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M12 4v16m8-8H4\"\n          />\n        </svg>\n        <span v-if=\"isExpanded\" class=\"text-sm font-medium\"> </span>\n      </button>\n    </div>\n  </aside>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useUIStore } from '@/stores/uiStore'\n\nconst route = useRoute()\nconst uiStore = useUIStore()\n\nconst isExpanded = computed(() => uiStore.sidebarExpanded)\n\n// Icon components (   @heroicons/vue)\nconst DashboardIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n    </svg>\n  `\n}\n\nconst DAMIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n    </svg>\n  `\n}\n\nconst DistributionIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\n    </svg>\n  `\n}\n\nconst SettingsIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n    </svg>\n  `\n}\n\nconst UploadIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n    </svg>\n  `\n}\n\nconst HeartIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n    </svg>\n  `\n}\n\nconst ClockIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n    </svg>\n  `\n}\n\nconst ShareIcon = {\n  template: `\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\n    </svg>\n  `\n}\n\nconst navigationItems = [\n  { path: '/', label: 'Dashboard', icon: DashboardIcon },\n  { path: '/dam', label: 'DAM Gallery', icon: DAMIcon },\n  { path: '/distribution', label: 'Distribution', icon: DistributionIcon },\n  { path: '/settings', label: 'Settings', icon: SettingsIcon }\n]\n\nconst collections = [\n  { id: 1, path: '/dam/my-uploads', label: ' ', icon: UploadIcon },\n  { id: 2, path: '/dam/favorites', label: '', icon: HeartIcon },\n  { id: 3, path: '/dam/recent', label: '', icon: ClockIcon },\n  { id: 4, path: '/dam/shared', label: ' ', icon: ShareIcon }\n]\n\nfunction toggleSidebar() {\n  uiStore.toggleSidebar()\n}\n\nfunction isActive(path: string): boolean {\n  return route.path === path || route.path.startsWith(path + '/')\n}\n\nfunction handleNavigate(path: string) {\n  emit('navigate', path)\n}\n\nfunction handleNewFolder() {\n  emit('new-folder')\n}\n\nconst emit = defineEmits<{\n  navigate: [path: string]\n  'sidebar-toggle': []\n  'new-folder': []\n}>()\n</script>\n\n<style scoped>\n.w-70 {\n  width: 280px;\n}\n</style>\n\n","<template>\r\n  <main\r\n    :class=\"[\r\n      'transition-all duration-300 ease-in-out',\r\n      sidebarExpanded ? 'ml-70' : 'ml-16',\r\n      'mt-16 min-h-[calc(100vh-4rem)]'\r\n    ]\"\r\n  >\r\n    <div class=\"p-4 md:p-6 lg:p-8\">\r\n      <slot />\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue'\r\nimport { useUIStore } from '@/stores/uiStore'\r\n\r\nconst uiStore = useUIStore()\r\nconst sidebarExpanded = computed(() => uiStore.sidebarExpanded)\r\n</script>\r\n\r\n<style scoped>\r\n.ml-70 {\r\n  margin-left: 280px;\r\n}\r\n</style>\r\n\r\n","<template>\r\n  <div :class=\"cardClasses\">\r\n    <div v-if=\"$slots.header\" class=\"px-4 py-3 border-b border-neutral-300 dark:border-neutral-300\">\r\n      <slot name=\"header\" />\r\n    </div>\r\n    <div :class=\"bodyClasses\">\r\n      <slot />\r\n    </div>\r\n    <div v-if=\"$slots.footer\" class=\"px-4 py-3 border-t border-neutral-300 dark:border-neutral-300\">\r\n      <slot name=\"footer\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue'\r\n\r\ninterface Props {\r\n  variant?: 'default' | 'elevated' | 'outlined'\r\n  padding?: 'none' | 'sm' | 'md' | 'lg'\r\n  hover?: boolean\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  variant: 'default',\r\n  padding: 'md',\r\n  hover: false\r\n})\r\n\r\nconst cardClasses = computed(() => {\r\n  const base = 'bg-neutral-0 dark:bg-neutral-0 rounded-lg border border-neutral-300 dark:border-neutral-300 transition-all duration-fast'\r\n  \r\n  const variants = {\r\n    default: 'shadow-sm',\r\n    elevated: 'shadow-md',\r\n    outlined: 'shadow-none'\r\n  }\r\n  \r\n  const hoverClass = props.hover ? 'hover:shadow-lg cursor-pointer' : ''\r\n  \r\n  return `${base} ${variants[props.variant]} ${hoverClass}`\r\n})\r\n\r\nconst bodyClasses = computed(() => {\r\n  const paddings = {\r\n    none: '',\r\n    sm: 'p-3',\r\n    md: 'p-4',\r\n    lg: 'p-6'\r\n  }\r\n  \r\n  return paddings[props.padding]\r\n})\r\n</script>\r\n\r\n\r\n","<template>\n  <button\n    :type=\"type\"\n    :disabled=\"disabled || loading\"\n    :class=\"buttonClasses\"\n    :aria-label=\"$attrs['aria-label']\"\n    :aria-busy=\"loading\"\n    :aria-disabled=\"disabled || loading\"\n    @click=\"$emit('click', $event)\"\n  >\n    <span v-if=\"loading\" class=\"mr-2\">\n      <svg\n        class=\"animate-spin h-4 w-4\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n      >\n        <circle\n          class=\"opacity-25\"\n          cx=\"12\"\n          cy=\"12\"\n          r=\"10\"\n          stroke=\"currentColor\"\n          stroke-width=\"4\"\n        ></circle>\n        <path\n          class=\"opacity-75\"\n          fill=\"currentColor\"\n          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n        ></path>\n      </svg>\n    </span>\n    <slot />\n  </button>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport type { ButtonVariant, ButtonSize } from '@/types'\n\ninterface Props {\n  variant?: ButtonVariant\n  size?: ButtonSize\n  disabled?: boolean\n  loading?: boolean\n  type?: 'button' | 'submit' | 'reset'\n  fullWidth?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  variant: 'primary',\n  size: 'md',\n  disabled: false,\n  loading: false,\n  type: 'button',\n  fullWidth: false\n})\n\ndefineEmits<{\n  click: [event: MouseEvent]\n}>()\n\nconst buttonClasses = computed(() => {\n  const base = 'inline-flex items-center justify-center font-medium rounded-base transition-all duration-fast focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed'\n  \n  const variants = {\n    primary: 'bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500',\n    secondary: 'bg-neutral-100 text-neutral-900 hover:bg-neutral-300 focus:ring-neutral-500 dark:bg-neutral-100 dark:text-neutral-900 dark:hover:bg-neutral-300',\n    outline: 'border-2 border-primary-500 text-primary-500 hover:bg-primary-50 focus:ring-primary-500 dark:border-primary-500 dark:text-primary-500 dark:hover:bg-primary-50',\n    ghost: 'text-neutral-900 hover:bg-neutral-100 focus:ring-neutral-500 dark:text-neutral-900 dark:hover:bg-neutral-100',\n    danger: 'bg-error text-white hover:bg-red-600 focus:ring-error'\n  }\n  \n  const sizes = {\n    sm: 'px-3 py-1.5 text-sm min-h-[44px] min-w-[44px]',\n    md: 'px-4 py-2 text-base min-h-[44px] min-w-[44px]',\n    lg: 'px-6 py-3 text-lg min-h-[48px] min-w-[48px]'\n  }\n  \n  return [\n    base,\n    variants[props.variant],\n    sizes[props.size],\n    props.fullWidth ? 'w-full' : ''\n  ].filter(Boolean).join(' ')\n})\n</script>\n\n\n","<template>\r\n  <div>\r\n    <!-- Normal content when no error -->\r\n    <slot v-if=\"!hasError\" />\r\n\r\n    <!-- Error fallback UI -->\r\n    <div\r\n      v-else\r\n      class=\"error-boundary\"\r\n      role=\"alert\"\r\n      aria-live=\"assertive\"\r\n      tabindex=\"-1\"\r\n      ref=\"errorContainer\"\r\n    >\r\n      <Card class=\"max-w-2xl mx-auto\">\r\n        <div class=\"text-center py-8 px-6\">\r\n          <!-- Error Icon -->\r\n          <div class=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 dark:bg-red-900/20 mb-6\">\r\n            <svg\r\n              class=\"h-8 w-8 text-red-600 dark:text-red-400\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n\r\n          <!-- Error Title -->\r\n          <h2 class=\"text-2xl font-semibold text-neutral-900 dark:text-neutral-100 mb-2\">\r\n            {{ title }}\r\n          </h2>\r\n\r\n          <!-- Error Message -->\r\n          <p class=\"text-neutral-600 dark:text-neutral-400 mb-6 max-w-md mx-auto\">\r\n            {{ message }}\r\n          </p>\r\n\r\n          <!-- Error Details (Development Only) -->\r\n          <details\r\n            v-if=\"isDevelopment && errorDetails\"\r\n            class=\"mb-6 text-left bg-neutral-50 dark:bg-neutral-800 rounded-lg p-4 max-w-2xl mx-auto\"\r\n          >\r\n            <summary class=\"cursor-pointer text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2\">\r\n              Error Details (Development)\r\n            </summary>\r\n            <pre class=\"text-xs text-neutral-600 dark:text-neutral-400 whitespace-pre-wrap overflow-auto max-h-64\">{{ errorDetails }}</pre>\r\n          </details>\r\n\r\n          <!-- Action Buttons -->\r\n          <div class=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n            <Button\r\n              variant=\"primary\"\r\n              @click=\"handleRetry\"\r\n              :loading=\"retrying\"\r\n              :disabled=\"retryCount >= maxRetries\"\r\n            >\r\n              {{ retryButtonText }}\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              @click=\"handleReload\"\r\n            >\r\n              Reload Page\r\n            </Button>\r\n\r\n            <Button\r\n              v-if=\"isDevelopment\"\r\n              variant=\"ghost\"\r\n              @click=\"handleReportError\"\r\n              class=\"text-neutral-600 dark:text-neutral-400\"\r\n            >\r\n              Report Issue\r\n            </Button>\r\n          </div>\r\n\r\n          <!-- Retry Progress -->\r\n          <div v-if=\"retrying && retryCount > 0\" class=\"mt-4\">\r\n            <div class=\"text-sm text-neutral-500 dark:text-neutral-400 mb-2\">\r\n              Retrying... ({{ retryCount }}/{{ maxRetries }})\r\n            </div>\r\n            <div class=\"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2\">\r\n              <div\r\n                class=\"bg-primary-600 h-2 rounded-full transition-all duration-300\"\r\n                :style=\"{ width: `${(retryCount / maxRetries) * 100}%` }\"\r\n              ></div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Auto-retry countdown -->\r\n          <div v-if=\"showAutoRetry\" class=\"mt-4 text-sm text-neutral-500 dark:text-neutral-400\">\r\n            Auto-retrying in {{ autoRetryCountdown }}s...\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/**\r\n * Global Error Boundary Component\r\n *\r\n * Catches and handles all unhandled errors in the component tree.\r\n * Provides user-friendly error UI with retry functionality.\r\n * Supports both development (detailed) and production (safe) modes.\r\n */\r\n\r\nimport { ref, computed, watch, nextTick, onMounted, onUnmounted } from 'vue'\r\nimport Card from '@/components/Common/Card.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\n// Simple error logging - avoid circular dependency\r\nconst logError = (error: Error, context?: any) => {\r\n  console.error('ErrorBoundary caught error:', error, context)\r\n\r\n  // Send to external logging if available\r\n  if (window.Sentry) {\r\n    window.Sentry.captureException(error, { extra: context })\r\n  }\r\n}\r\n\r\nconst shouldRetry = (error: Error): boolean => {\r\n  // Simple retry logic - retry network and server errors\r\n  return error.name === 'TypeError' || (error as any).status >= 500\r\n}\r\n\r\n// Props\r\ninterface Props {\r\n  /** Custom error title */\r\n  title?: string\r\n  /** Custom error message */\r\n  message?: string\r\n  /** Maximum retry attempts */\r\n  maxRetries?: number\r\n  /** Auto-retry delay in seconds */\r\n  autoRetryDelay?: number\r\n  /** Show auto-retry countdown */\r\n  showAutoRetry?: boolean\r\n  /** Custom retry handler */\r\n  onRetry?: (attempt: number) => Promise<void> | void\r\n  /** Custom error handler */\r\n  onError?: (error: Error, instance: any, info: string) => void\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  title: 'Something went wrong',\r\n  message: 'We encountered an unexpected error. Please try again.',\r\n  maxRetries: 3,\r\n  autoRetryDelay: 5,\r\n  showAutoRetry: true\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits<{\r\n  error: [error: Error, instance: any, info: string]\r\n  retry: [attempt: number]\r\n  recovered: []\r\n}>()\r\n\r\n// Composables - imported at module level\r\n\r\n// Reactive state\r\nconst hasError = ref(false)\r\nconst error = ref<Error | null>(null)\r\nconst errorInfo = ref('')\r\nconst errorInstance = ref<any>(null)\r\nconst retrying = ref(false)\r\nconst retryCount = ref(0)\r\nconst autoRetryCountdown = ref(0)\r\nconst autoRetryTimer = ref<number | null>(null)\r\nconst errorContainer = ref<HTMLElement>()\r\n\r\n// Computed properties\r\nconst isDevelopment = computed(() => import.meta.env.DEV)\r\n\r\nconst errorDetails = computed(() => {\r\n  if (!error.value) return null\r\n\r\n  return `\r\nError: ${error.value.message}\r\nStack: ${error.value.stack}\r\nComponent: ${errorInstance.value?.$?.type?.name || 'Unknown'}\r\nInfo: ${errorInfo.value}\r\nTimestamp: ${new Date().toISOString()}\r\nUserAgent: ${navigator.userAgent}\r\nURL: ${window.location.href}\r\n  `.trim()\r\n})\r\n\r\nconst retryButtonText = computed(() => {\r\n  if (retryCount.value >= props.maxRetries) {\r\n    return 'Max Retries Reached'\r\n  }\r\n  if (retrying.value) {\r\n    return 'Retrying...'\r\n  }\r\n  return retryCount.value > 0 ? `Retry (${retryCount.value}/${props.maxRetries})` : 'Try Again'\r\n})\r\n\r\n/**\r\n * Handle component error (Vue error boundary)\r\n */\r\nconst handleError = (err: Error, instance: any, info: string) => {\r\n  // Prevent infinite loops\r\n  if (hasError.value) return\r\n\r\n  hasError.value = true\r\n  error.value = err\r\n  errorInfo.value = info\r\n  errorInstance.value = instance\r\n\r\n  // Log error\r\n  logError(err, {\r\n    component: instance?.$?.type?.name || 'Unknown',\r\n    info,\r\n    stack: err.stack,\r\n    url: window.location.href,\r\n    timestamp: new Date().toISOString()\r\n  })\r\n\r\n  // Custom error handler\r\n  props.onError?.(err, instance, info)\r\n\r\n  // Emit error event\r\n  emit('error', err, instance, info)\r\n\r\n  // Focus error container for accessibility\r\n  nextTick(() => {\r\n    errorContainer.value?.focus()\r\n  })\r\n\r\n  // Start auto-retry countdown if enabled and should retry\r\n  if (props.showAutoRetry && shouldRetry(err)) {\r\n    startAutoRetryCountdown()\r\n  }\r\n}\r\n\r\n/**\r\n * Handle manual retry\r\n */\r\nconst handleRetry = async () => {\r\n  if (retrying.value || retryCount.value >= props.maxRetries) return\r\n\r\n  retrying.value = true\r\n  retryCount.value++\r\n\r\n  try {\r\n    // Stop auto-retry if running\r\n    stopAutoRetry()\r\n\r\n    // Custom retry handler or default reload\r\n    if (props.onRetry) {\r\n      await props.onRetry(retryCount.value)\r\n    } else {\r\n      // Default: reload the page\r\n      window.location.reload()\r\n    }\r\n\r\n    // Emit retry event\r\n    emit('retry', retryCount.value)\r\n\r\n  } catch (retryError) {\r\n    console.error('Retry failed:', retryError)\r\n    // Continue showing error UI\r\n  } finally {\r\n    retrying.value = false\r\n  }\r\n}\r\n\r\n/**\r\n * Handle page reload\r\n */\r\nconst handleReload = () => {\r\n  window.location.reload()\r\n}\r\n\r\n/**\r\n * Handle error reporting (development only)\r\n */\r\nconst handleReportError = () => {\r\n  const reportData = {\r\n    error: error.value?.message,\r\n    stack: error.value?.stack,\r\n    component: errorInstance.value?.$?.type?.name,\r\n    info: errorInfo.value,\r\n    url: window.location.href,\r\n    userAgent: navigator.userAgent,\r\n    timestamp: new Date().toISOString()\r\n  }\r\n\r\n  // Copy to clipboard\r\n  navigator.clipboard.writeText(JSON.stringify(reportData, null, 2))\r\n    .then(() => {\r\n      alert('Error details copied to clipboard')\r\n    })\r\n    .catch(() => {\r\n      console.log('Error report:', reportData)\r\n      alert('Error details logged to console')\r\n    })\r\n}\r\n\r\n/**\r\n * Start auto-retry countdown\r\n */\r\nconst startAutoRetryCountdown = () => {\r\n  if (!props.showAutoRetry) return\r\n\r\n  autoRetryCountdown.value = props.autoRetryDelay\r\n\r\n  autoRetryTimer.value = window.setInterval(() => {\r\n    autoRetryCountdown.value--\r\n\r\n    if (autoRetryCountdown.value <= 0) {\r\n      stopAutoRetry()\r\n      // Auto-retry\r\n      handleRetry()\r\n    }\r\n  }, 1000)\r\n}\r\n\r\n/**\r\n * Stop auto-retry countdown\r\n */\r\nconst stopAutoRetry = () => {\r\n  if (autoRetryTimer.value) {\r\n    clearInterval(autoRetryTimer.value)\r\n    autoRetryTimer.value = null\r\n  }\r\n  autoRetryCountdown.value = 0\r\n}\r\n\r\n/**\r\n * Reset error state\r\n */\r\nconst resetError = () => {\r\n  hasError.value = false\r\n  error.value = null\r\n  errorInfo.value = ''\r\n  errorInstance.value = null\r\n  retryCount.value = 0\r\n  stopAutoRetry()\r\n}\r\n\r\n/**\r\n * Vue 3 Error Boundary API\r\n * This will be called when a child component throws an error\r\n */\r\nconst errorCaptured = (err: Error, instance: any, info: string) => {\r\n  handleError(err, instance, info)\r\n  return false // Don't propagate the error\r\n}\r\n\r\n// Watch for error changes\r\nwatch(hasError, (newHasError) => {\r\n  if (!newHasError) {\r\n    emit('recovered')\r\n  }\r\n})\r\n\r\n// Cleanup on unmount\r\nonUnmounted(() => {\r\n  stopAutoRetry()\r\n})\r\n\r\n// Expose methods for parent components\r\ndefineExpose({\r\n  resetError,\r\n  hasError,\r\n  error: error.value,\r\n  retryCount\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.error-boundary:focus {\r\n  outline: 2px solid var(--color-primary-600);\r\n  outline-offset: 2px;\r\n}\r\n\r\n/* Ensure error UI is above other content */\r\n.error-boundary {\r\n  z-index: 9999;\r\n  position: relative;\r\n}\r\n</style>\r\n","<template>\r\n  <div id=\"app\" class=\"min-h-screen bg-neutral-0 dark:bg-neutral-0\">\r\n    <ErrorBoundary\r\n      :max-retries=\"3\"\r\n      :auto-retry-delay=\"5\"\r\n      :show-auto-retry=\"true\"\r\n      @error=\"handleGlobalError\"\r\n      @retry=\"handleRetry\"\r\n      @recovered=\"handleRecovered\"\r\n    >\r\n      <!-- Layout for authenticated routes -->\r\n      <template v-if=\"showLayout\">\r\n        <Header\r\n          @search=\"handleSearch\"\r\n          @filter-toggle=\"handleFilterToggle\"\r\n          @upload=\"handleUpload\"\r\n          @notifications=\"handleNotifications\"\r\n          @mobile-menu-toggle=\"handleMobileMenuToggle\"\r\n        />\r\n        <Sidebar\r\n          @navigate=\"handleNavigate\"\r\n          @sidebar-toggle=\"handleSidebarToggle\"\r\n          @new-folder=\"handleNewFolder\"\r\n        />\r\n        <MainContent>\r\n          <RouterView />\r\n        </MainContent>\r\n      </template>\r\n\r\n      <!-- Simple layout for auth pages -->\r\n      <template v-else>\r\n        <RouterView />\r\n      </template>\r\n    </ErrorBoundary>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted } from 'vue'\r\nimport { RouterView, useRoute } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/authStore'\r\nimport { useUIStore } from '@/stores/uiStore'\r\nimport { setupGlobalErrorHandlers, logError } from '@/composables/useErrorBoundary'\r\nimport Header from '@/components/Layout/Header.vue'\r\nimport Sidebar from '@/components/Layout/Sidebar.vue'\r\nimport MainContent from '@/components/Layout/MainContent.vue'\r\nimport ErrorBoundary from '@/components/ErrorBoundary.vue'\r\n\r\nconst route = useRoute()\r\nconst authStore = useAuthStore()\r\n\r\nconst showLayout = computed(() => {\r\n  // Don't show layout on login/home pages\r\n  return route.name !== 'login' && route.name !== 'home'\r\n})\r\n\r\nonMounted(async () => {\r\n  // Setup global error handlers\r\n  const cleanup = setupGlobalErrorHandlers()\r\n\r\n  // Check authentication on app mount\r\n  await authStore.checkAuth()\r\n\r\n  // Cleanup on unmount\r\n  return cleanup\r\n})\r\n\r\nfunction handleSearch(query: string) {\r\n  // TODO: Implement search\r\n  console.log('Search:', query)\r\n}\r\n\r\nfunction handleFilterToggle() {\r\n  // TODO: Toggle filters panel\r\n  console.log('Toggle filters')\r\n}\r\n\r\nfunction handleUpload() {\r\n  // TODO: Open upload modal\r\n  const uiStore = useUIStore()\r\n  uiStore.openModal('upload')\r\n}\r\n\r\nfunction handleNotifications() {\r\n  // TODO: Open notifications center\r\n  const uiStore = useUIStore()\r\n  uiStore.openModal('notifications')\r\n}\r\n\r\nfunction handleMobileMenuToggle() {\r\n  const uiStore = useUIStore()\r\n  uiStore.toggleMobileMenu()\r\n}\r\n\r\nfunction handleNavigate(path: string) {\r\n  // Navigation handled by router-link in Sidebar\r\n}\r\n\r\nfunction handleSidebarToggle() {\r\n  const uiStore = useUIStore()\r\n  uiStore.toggleSidebar()\r\n}\r\n\r\nfunction handleNewFolder() {\r\n  // TODO: Open create folder modal\r\n  const uiStore = useUIStore()\r\n  uiStore.openModal('create-folder')\r\n}\r\n\r\n// Error Boundary handlers\r\nfunction handleGlobalError(error: Error, instance: any, info: string) {\r\n  console.error('Global error caught:', { error, instance, info })\r\n\r\n  // Log to external services\r\n  logError(error, {\r\n    component: instance?.$?.type?.name,\r\n    info,\r\n    route: route.name,\r\n    path: route.path\r\n  })\r\n}\r\n\r\nfunction handleRetry(attempt: number) {\r\n  console.log(`Retrying operation (attempt ${attempt})`)\r\n\r\n  // Refresh current route data if needed\r\n  if (route.name) {\r\n    // Trigger a soft reload of current route\r\n    window.location.reload()\r\n  }\r\n}\r\n\r\nfunction handleRecovered() {\r\n  console.log('Application recovered from error')\r\n\r\n  // Clear any cached error state\r\n  // Reset loading states if needed\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#app {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;\r\n}\r\n</style>\r\n\r\n\r\n","import { createRouter, createWebHistory } from 'vue-router'\nimport type { RouteRecordRaw } from 'vue-router'\nimport { useAuthStore } from '@/stores/authStore'\nimport { useUIStore } from '@/stores/uiStore'\n\nconst routes: RouteRecordRaw[] = [\n  {\n    path: '/',\n    name: 'home',\n    component: () => import('@/pages/DashboardPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/dashboard',\n    name: 'dashboard',\n    component: () => import('@/pages/DashboardPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: () => import('@/pages/LoginPage.vue'),\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/auth/forgot-password',\n    name: 'forgot-password',\n    component: () => import('@/pages/auth/ForgotPasswordPage.vue'),\n    meta: { requiresAuth: false, title: 'Forgot Password' }\n  },\n  {\n    path: '/auth/2fa',\n    name: 'two-factor-auth',\n    component: () => import('@/pages/Login2FAPage.vue'),\n    meta: { requiresAuth: false, title: 'Two-Factor Authentication' }\n  },\n  {\n    path: '/auth/reset-password',\n    name: 'reset-password',\n    component: () => import('@/pages/auth/ResetPasswordPage.vue'),\n    meta: { requiresAuth: false, title: 'Reset Password' }\n  },\n  {\n    path: '/dam',\n    name: 'dam',\n    component: () => import('@/pages/DAMPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/dam/gallery',\n    name: 'dam-gallery',\n    component: () => import('@/pages/DAMPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/dam/search',\n    name: 'dam-search',\n    component: () => import('@/pages/AdvancedSearchPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/dam/assets/:id',\n    name: 'asset-detail',\n    component: () => import('@/pages/AssetDetailPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/settings',\n    name: 'settings',\n    component: () => import('@/pages/SettingsPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/settings/profile',\n    name: 'settings-profile',\n    component: () => import('@/pages/SettingsPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/distribution',\n    name: 'distribution',\n    component: () => import('@/pages/DistributionPage.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/distribution/publications/:id',\n    name: 'publication-detail',\n    component: () => import('@/pages/PublicationDetailPage.vue'),\n    meta: {\n      requiresAuth: true,\n      breadcrumb: 'Publication Detail',\n      title: 'Publication Detail'\n    },\n    props: true\n  },\n  // Admin routes (nested structure)\n  {\n    path: '/admin',\n    component: () => import('@/pages/AdminPage.vue'),\n    meta: {\n      requiresAuth: true,\n      requiresRole: 'admin',\n      requiresPermission: 'admin.access',\n      breadcrumb: 'Administration'\n    },\n    redirect: '/admin/users',\n    children: [\n      {\n        path: 'users',\n        name: 'admin-users',\n        component: () => import('@/pages/admin/UserManagementPage.vue'),\n        meta: {\n          requiresAuth: true,\n          requiresPermission: 'admin.user_manage',\n          breadcrumb: 'User Management',\n          title: 'User Management - Admin'\n        }\n      },\n      {\n        path: 'schemas',\n        name: 'admin-metadata-schemas',\n        component: () => import('@/pages/admin/MetadataSchemaPage.vue'),\n        meta: {\n          requiresAuth: true,\n          requiresPermission: 'admin.schema_manage',\n          breadcrumb: 'Metadata Schemas',\n          title: 'Metadata Schemas - Admin'\n        }\n      },\n      {\n        path: 'workflows',\n        name: 'admin-workflows',\n        component: () => import('@/pages/admin/WorkflowDesignerPage.vue'),\n        meta: {\n          requiresAuth: true,\n          requiresPermission: 'admin.workflow_manage',\n          breadcrumb: 'Workflow Designer',\n          title: 'Workflow Designer - Admin'\n        }\n      },\n      {\n        path: 'reports',\n        name: 'admin-reports',\n        component: () => import('@/pages/admin/AdminReportsPage.vue'),\n        meta: {\n          requiresAuth: true,\n          requiresPermission: 'admin.reports_view',\n          breadcrumb: 'Reports',\n          title: 'Admin Reports'\n        }\n      }\n    ]\n  },\n  {\n    path: '/collections',\n    name: 'collections',\n    component: () => import('@/pages/CollectionsPage.vue'),\n    meta: {\n      requiresAuth: true,\n      breadcrumb: 'Collections',\n      title: 'Collections'\n    }\n  },\n  {\n    path: '/collections/:id',\n    name: 'collection-detail',\n    component: () => import('@/pages/CollectionsPage.vue'),\n    meta: {\n      requiresAuth: true,\n      breadcrumb: 'Collection Detail',\n      title: 'Collection Detail'\n    }\n  },\n  {\n    path: '/forbidden',\n    name: 'forbidden',\n    component: () => import('../pages/ForbiddenPage.vue'),\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/:pathMatch(.*)*',\n    name: 'not-found',\n    component: () => import('@/pages/NotFoundPage.vue')\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes\n})\n\n// Navigation guards\nrouter.beforeEach(async (to, _from, next) => {\n  const authStore = useAuthStore()\n  const uiStore = useUIStore()\n\n  // Check authentication status\n  if (!authStore.isAuthenticated) {\n    const token = localStorage.getItem('auth_token')\n    if (token) {\n      // Try to restore session\n      const isAuthenticated = await authStore.checkAuth()\n      if (!isAuthenticated) {\n        // Token invalid, clear it\n        localStorage.removeItem('auth_token')\n      }\n    }\n  }\n\n  // Check if route requires authentication\n  if (to.meta.requiresAuth && !authStore.isAuthenticated) {\n    // Redirect to login with return URL\n    next({\n      name: 'login',\n      query: { returnTo: to.fullPath }\n    })\n    return\n  }\n\n  // Check 2FA status for authenticated users\n  if (authStore.isAuthenticated && to.name !== 'two-factor-auth') {\n    // Check if 2FA is enabled and not verified\n    if (authStore.requiresTwoFactor && !authStore.isTwoFactorVerified) {\n      // Redirect to 2FA verification\n      next({\n        name: 'two-factor-auth',\n        query: { returnTo: to.fullPath }\n      })\n      return\n    }\n  }\n\n  // Check if route requires specific permission\n  if (to.meta.requiresPermission) {\n    const permission = to.meta.requiresPermission as string\n    // hasPermission is a computed that returns a function\n    // Type assertion needed because Pinia computed types in router context\n    const checkPermission = (authStore.hasPermission as unknown as { value: (p: string) => boolean }).value\n    if (!checkPermission(permission)) {\n      console.warn(\n        `Access denied: User ${authStore.user?.id} attempted ${to.path}, required: ${permission}`\n      )\n      // Redirect to forbidden page with context\n      next({\n        name: 'forbidden',\n        query: {\n          returnTo: to.fullPath,\n          requiredPermission: permission\n        }\n      })\n      return\n    }\n  }\n\n  // Check role-based access\n  if (to.meta.requiresRole) {\n    const requiredRole = to.meta.requiresRole as string\n    // hasRole is a computed that returns a function\n    const checkRole = (authStore.hasRole as unknown as { value: (r: string) => boolean }).value\n    if (!checkRole(requiredRole)) {\n      console.warn(\n        `Access denied: User ${authStore.user?.id} with role ${authStore.user?.role} attempted ${to.path}, required role: ${requiredRole}`\n      )\n      // Redirect to forbidden page\n      next({\n        name: 'forbidden',\n        query: {\n          returnTo: to.fullPath,\n          requiredRole: requiredRole\n        }\n      })\n      return\n    }\n  }\n\n  // Redirect authenticated users away from login page\n  if (to.name === 'login' && authStore.isAuthenticated && authStore.isTwoFactorVerified) {\n    const returnTo = (to.query.returnTo as string) || '/'\n    next(returnTo)\n    return\n  }\n\n  // Allow access to 2FA page for authenticated users who need it\n  if (to.name === 'two-factor-auth' && authStore.isAuthenticated) {\n    next()\n    return\n  }\n\n  // Update breadcrumbs\n  const breadcrumbs = generateBreadcrumbs(to)\n  uiStore.setBreadcrumbs(breadcrumbs)\n\n  next()\n})\n\nfunction generateBreadcrumbs(to: any) {\n  const breadcrumbs: Array<{ label: string; path: string }> = [\n    { label: '', path: '/' }\n  ]\n\n  if (to.path !== '/') {\n    const pathParts = to.path.split('/').filter(Boolean)\n    let currentPath = ''\n\n    pathParts.forEach((part: string) => {\n      currentPath += `/${part}`\n      const label = part\n        .split('-')\n        .map((p: string) => p.charAt(0).toUpperCase() + p.slice(1))\n        .join(' ')\n      breadcrumbs.push({ label, path: currentPath })\n    })\n  }\n\n  return breadcrumbs\n}\n\nexport default router\n\n\n","import { createApp } from 'vue'\r\nimport { createPinia } from 'pinia'\r\nimport piniaPluginPersistedstate from 'pinia-plugin-persistedstate'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport './styles/index.css'\r\n\r\nconst app = createApp(App)\r\n\r\n// Setup Pinia with persistence\r\nconst pinia = createPinia()\r\npinia.use(piniaPluginPersistedstate)\r\n\r\napp.use(pinia)\r\napp.use(router)\r\n\r\napp.mount('#app')\r\n\r\n\r\n"],"file":"assets/index-Bkz-5-QE.js"}