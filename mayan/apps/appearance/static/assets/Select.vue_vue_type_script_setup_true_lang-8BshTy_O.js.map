{"version":3,"file":"Select.vue_vue_type_script_setup_true_lang-8BshTy_O.js","sources":["../../src/components/Common/Select.vue"],"sourcesContent":["<template>\r\n  <div class=\"relative\" ref=\"selectRef\">\r\n    <!-- Select Button -->\r\n    <button\r\n      :type=\"type\"\r\n      :disabled=\"disabled\"\r\n      :class=\"selectClasses\"\r\n      @click=\"toggleDropdown\"\r\n      @keydown.enter.prevent=\"toggleDropdown\"\r\n      @keydown.space.prevent=\"toggleDropdown\"\r\n      @keydown.escape=\"closeDropdown\"\r\n      :aria-expanded=\"isOpen\"\r\n      :aria-haspopup=\"true\"\r\n      :aria-label=\"label || placeholder\"\r\n    >\r\n      <span v-if=\"selectedLabel\" class=\"text-neutral-900 dark:text-neutral-900\">\r\n        {{ selectedLabel }}\r\n      </span>\r\n      <span v-else class=\"text-neutral-500 dark:text-neutral-500\">\r\n        {{ placeholder }}\r\n      </span>\r\n      <svg\r\n        :class=\"[\r\n          'w-5 h-5 transition-transform',\r\n          isOpen ? 'transform rotate-180' : ''\r\n        ]\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        viewBox=\"0 0 24 24\"\r\n      >\r\n        <path\r\n          stroke-linecap=\"round\"\r\n          stroke-linejoin=\"round\"\r\n          stroke-width=\"2\"\r\n          d=\"M19 9l-7 7-7-7\"\r\n        />\r\n      </svg>\r\n    </button>\r\n\r\n    <!-- Dropdown -->\r\n    <Transition\r\n      enter-active-class=\"transition ease-out duration-100\"\r\n      enter-from-class=\"opacity-0 scale-95\"\r\n      enter-to-class=\"opacity-100 scale-100\"\r\n      leave-active-class=\"transition ease-in duration-75\"\r\n      leave-from-class=\"opacity-100 scale-100\"\r\n      leave-to-class=\"opacity-0 scale-95\"\r\n    >\r\n      <div\r\n        v-if=\"isOpen\"\r\n        class=\"absolute z-50 mt-1 w-full bg-neutral-0 dark:bg-neutral-0 border border-neutral-300 dark:border-neutral-300 rounded-md shadow-lg max-h-60 overflow-auto\"\r\n        @click.stop\r\n      >\r\n        <!-- Search Input (if searchable) -->\r\n        <div v-if=\"searchable\" class=\"p-2 border-b border-neutral-300 dark:border-neutral-300\">\r\n          <input\r\n            v-model=\"searchQuery\"\r\n            type=\"text\"\r\n            placeholder=\"Поиск...\"\r\n            class=\"w-full px-3 py-2 text-sm border border-neutral-300 dark:border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n            @click.stop\r\n            @keydown.escape.stop=\"closeDropdown\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Options List -->\r\n        <ul class=\"py-1\" role=\"listbox\">\r\n          <li\r\n            v-for=\"option in filteredOptions\"\r\n            :key=\"getOptionValue(option)\"\r\n            :class=\"[\r\n              'px-3 py-2 text-sm cursor-pointer transition-colors',\r\n              isSelected(option)\r\n                ? 'bg-primary-50 dark:bg-primary-50 text-primary-600 dark:text-primary-600'\r\n                : 'text-neutral-700 dark:text-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-100'\r\n            ]\"\r\n            role=\"option\"\r\n            :aria-selected=\"isSelected(option)\"\r\n            @click=\"selectOption(option)\"\r\n            @keydown.enter.prevent=\"selectOption(option)\"\r\n            @keydown.space.prevent=\"selectOption(option)\"\r\n          >\r\n            <div class=\"flex items-center gap-2\">\r\n              <input\r\n                v-if=\"multiple\"\r\n                type=\"checkbox\"\r\n                :checked=\"isSelected(option)\"\r\n                class=\"w-4 h-4 text-primary-500 rounded border-neutral-300 focus:ring-primary-500\"\r\n                @click.stop\r\n              />\r\n              <span>{{ getOptionLabel(option) }}</span>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n\r\n        <!-- Empty State -->\r\n        <div\r\n          v-if=\"filteredOptions.length === 0\"\r\n          class=\"px-3 py-2 text-sm text-neutral-500 dark:text-neutral-500 text-center\"\r\n        >\r\n          Нет вариантов\r\n        </div>\r\n      </div>\r\n    </Transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, onUnmounted, watch } from 'vue'\r\n\r\ninterface Option {\r\n  value: string | number\r\n  label: string\r\n  disabled?: boolean\r\n}\r\n\r\ninterface Props {\r\n  modelValue?: string | number | (string | number)[]\r\n  options: Option[] | string[]\r\n  placeholder?: string\r\n  label?: string\r\n  disabled?: boolean\r\n  multiple?: boolean\r\n  searchable?: boolean\r\n  type?: 'button' | 'submit' | 'reset'\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  placeholder: 'Выберите...',\r\n  disabled: false,\r\n  multiple: false,\r\n  searchable: false,\r\n  type: 'button'\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  'update:modelValue': [value: string | number | (string | number)[]]\r\n  change: [value: string | number | (string | number)[]]\r\n}>()\r\n\r\nconst selectRef = ref<HTMLElement | null>(null)\r\nconst isOpen = ref(false)\r\nconst searchQuery = ref('')\r\n\r\nconst selectClasses = computed(() => {\r\n  return [\r\n    'w-full',\r\n    'px-3',\r\n    'py-2',\r\n    'text-sm',\r\n    'text-left',\r\n    'bg-neutral-0',\r\n    'dark:bg-neutral-0',\r\n    'border',\r\n    'border-neutral-300',\r\n    'dark:border-neutral-300',\r\n    'rounded-md',\r\n    'focus:outline-none',\r\n    'focus:ring-2',\r\n    'focus:ring-primary-500',\r\n    'focus:border-transparent',\r\n    'flex',\r\n    'items-center',\r\n    'justify-between',\r\n    'gap-2',\r\n    props.disabled\r\n      ? 'opacity-50 cursor-not-allowed'\r\n      : 'cursor-pointer hover:border-neutral-400 dark:hover:border-neutral-400'\r\n  ].filter(Boolean).join(' ')\r\n})\r\n\r\nconst normalizedOptions = computed(() => {\r\n  return props.options.map((opt) => {\r\n    if (typeof opt === 'string') {\r\n      return { value: opt, label: opt }\r\n    }\r\n    return opt\r\n  })\r\n})\r\n\r\nconst filteredOptions = computed(() => {\r\n  if (!props.searchable || !searchQuery.value) {\r\n    return normalizedOptions.value\r\n  }\r\n  const query = searchQuery.value.toLowerCase()\r\n  return normalizedOptions.value.filter((opt) =>\r\n    opt.label.toLowerCase().includes(query)\r\n  )\r\n})\r\n\r\nconst selectedLabel = computed(() => {\r\n  if (props.multiple) {\r\n    const selected = (props.modelValue as (string | number)[]) || []\r\n    if (selected.length === 0) return ''\r\n    if (selected.length === 1) {\r\n      const opt = normalizedOptions.value.find(\r\n        (o) => o.value === selected[0]\r\n      )\r\n      return opt?.label || ''\r\n    }\r\n    return `Выбрано: ${selected.length}`\r\n  } else {\r\n    const value = props.modelValue\r\n    if (!value) return ''\r\n    const opt = normalizedOptions.value.find((o) => o.value === value)\r\n    return opt?.label || ''\r\n  }\r\n})\r\n\r\nfunction getOptionValue(option: Option): string | number {\r\n  return option.value\r\n}\r\n\r\nfunction getOptionLabel(option: Option): string {\r\n  return option.label\r\n}\r\n\r\nfunction isSelected(option: Option): boolean {\r\n  if (props.multiple) {\r\n    const selected = (props.modelValue as (string | number)[]) || []\r\n    return selected.includes(option.value)\r\n  } else {\r\n    return props.modelValue === option.value\r\n  }\r\n}\r\n\r\nfunction selectOption(option: Option) {\r\n  if (option.disabled) return\r\n\r\n  if (props.multiple) {\r\n    const current = (props.modelValue as (string | number)[]) || []\r\n    const index = current.indexOf(option.value)\r\n    let newValue: (string | number)[]\r\n    if (index === -1) {\r\n      newValue = [...current, option.value]\r\n    } else {\r\n      newValue = current.filter((v) => v !== option.value)\r\n    }\r\n    emit('update:modelValue', newValue)\r\n    emit('change', newValue)\r\n  } else {\r\n    emit('update:modelValue', option.value)\r\n    emit('change', option.value)\r\n    closeDropdown()\r\n  }\r\n}\r\n\r\nfunction toggleDropdown() {\r\n  if (props.disabled) return\r\n  isOpen.value = !isOpen.value\r\n  if (isOpen.value) {\r\n    searchQuery.value = ''\r\n  }\r\n}\r\n\r\nfunction closeDropdown() {\r\n  isOpen.value = false\r\n  searchQuery.value = ''\r\n}\r\n\r\nfunction handleClickOutside(event: MouseEvent) {\r\n  if (selectRef.value && !selectRef.value.contains(event.target as Node)) {\r\n    closeDropdown()\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  document.addEventListener('click', handleClickOutside)\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('click', handleClickOutside)\r\n})\r\n</script>\r\n\r\n"],"names":["props","__props","emit","__emit","selectRef","ref","isOpen","searchQuery","selectClasses","computed","disabled","filter","Boolean","join","normalizedOptions","options","map","opt","value","label","filteredOptions","searchable","query","toLowerCase","includes","selectedLabel","multiple","selected","modelValue","length","find","o","getOptionValue","option","getOptionLabel","isSelected","selectOption","current","newValue","indexOf","v","closeDropdown","toggleDropdown","handleClickOutside","event","contains","target","onMounted","document","addEventListener","onUnmounted","removeEventListener","_createElementBlock","class","_createElementVNode","type","onClick","onKeydown","placeholder","_hoisted_2","_toDisplayString","_hoisted_3","_normalizeClass","fill","stroke","viewBox","d","_createVNode","_Transition","_openBlock","_hoisted_4","$event","_hoisted_6","_Fragment","_renderList","key","role","_withKeys","_withModifiers","_hoisted_8","checked","_hoisted_10"],"mappings":"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"}