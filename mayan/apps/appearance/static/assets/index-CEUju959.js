const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-DzscEweA.js","assets/vue-vendor-B11yH1L4.js","assets/assetStore-A1gGqTWA.js","assets/utils-vendor-BYNnTNyD.js","assets/DashboardPage-BmBLHrHc.css","assets/LoginPage-DzqBjuAv.js","assets/Input.vue_vue_type_script_setup_true_lang--8g8gQXi.js","assets/ForgotPasswordPage-BPjUa3sk.js","assets/ForgotPasswordPage-pYzLAD4h.css","assets/Login2FAPage-DPolDAx7.js","assets/ResetPasswordPage-Bad7F0pP.js","assets/ResetPasswordPage-BVDOx-Kd.css","assets/DAMPage-DJgtnZeh.js","assets/TagInput-DMflVXC-.js","assets/Badge.vue_vue_type_script_setup_true_lang-Bp_czRtF.js","assets/TagInput-CyQAcG2N.css","assets/Modal.vue_vue_type_script_setup_true_lang-Cpe0tIsY.js","assets/Pagination.vue_vue_type_script_setup_true_lang-DJgozKuc.js","assets/DAMPage-D3tTT_uJ.css","assets/AdvancedSearchPage-CqTnTRpT.js","assets/DateRangePicker-DQgDC4j3.js","assets/DateRangePicker-BiRnqEPr.css","assets/AdvancedSearchPage-E4nHbCFW.css","assets/AssetDetailPage-BobnOf4R.js","assets/AssetDetailPage-CM1kqbfd.css","assets/SettingsPage-DuZVh-nv.js","assets/Select.vue_vue_type_script_setup_true_lang-8BshTy_O.js","assets/SettingsPage-Cgn37Il_.css","assets/DistributionPage-DDyHlIps.js","assets/distributionStore-C9m_opz9.js","assets/DistributionPage-ql1i5DVG.css","assets/PublicationDetailPage-B1P7ATRM.js","assets/DeleteConfirmModal-FrXl2jew.js","assets/DeleteConfirmModal-B7iYZxHz.css","assets/PublicationDetailPage-JD27Pxzc.css","assets/AdminPage-CXPhJYLW.js","assets/Breadcrumbs-CYyEtqIv.js","assets/Breadcrumbs-CVoSpyqq.css","assets/AdminPage-BbceU3Fa.css","assets/UserManagementPage-ChViErh3.js","assets/adminStore-BAcaV1Pb.js","assets/UserManagementPage--D1IupTt.css","assets/MetadataSchemaPage-D7YMHMPB.js","assets/MetadataSchemaPage-LTqTOoQ_.css","assets/WorkflowDesignerPage-DHAlsbUd.js","assets/WorkflowDesignerPage-YmYDmfRb.css","assets/AdminReportsPage-DTcQImp3.js","assets/errorHandling-B5S82HA9.js","assets/AdminReportsPage-Djw36-YB.css","assets/CollectionsPage-CdRC1CLp.js","assets/CollectionsPage-B9IXtks1.css","assets/ForbiddenPage-DtxzxZIf.js","assets/ForbiddenPage-CdM_wlbr.css","assets/NotFoundPage-B5cQRc5s.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,s=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))o.call(t,r)&&l(e,r,t[r]);return e},i=(e,a)=>t(e,r(a)),u=(e,t,r)=>l(e,"symbol"!=typeof t?t+"":t,r),c=(e,t,r)=>new Promise((a,n)=>{var o=e=>{try{s(r.next(e))}catch(t){n(t)}},l=e=>{try{s(r.throw(e))}catch(t){n(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,l);s((r=r.apply(e,t)).next())});import{d,r as m,c as p,w as h,a as v,b as f,e as g,f as y,F as b,h as k,i as w,t as x,j as _,n as A,u as E,k as P,l as S,m as R,v as C,p as j,q as T,T as D,s as M,x as O,y as $,z as I,A as L,B as q,C as B,D as z,E as F,G as V,R as N,H as U,I as W,J as K,K as H}from"./vue-vendor-B11yH1L4.js";import{a as J,o as G}from"./utils-vendor-BYNnTNyD.js";function X(e,t){var r;return e="object"==typeof(r=e)&&null!==r?e:Object.create(null),new Proxy(e,{get:(e,r,a)=>"key"===r?Reflect.get(e,r,a):Reflect.get(e,r,a)||Reflect.get(t,r,a)})}function Q(e,{storage:t,serializer:r,key:a,debug:n}){try{const n=null==t?void 0:t.getItem(a);n&&e.$patch(null==r?void 0:r.deserialize(n))}catch(o){}}function Y(e,{storage:t,serializer:r,key:a,paths:n,debug:o}){try{const o=Array.isArray(n)?function(e,t){return t.reduce((t,r)=>{const a=r.split(".");return function(e,t,r){return t.slice(0,-1).reduce((e,t)=>/^(__proto__)$/.test(t)?{}:e[t]=e[t]||{},e)[t[t.length-1]]=r,e}(t,a,function(e,t){return t.reduce((e,t)=>null==e?void 0:e[t],e)}(e,a))},{})}(e,n):e;t.setItem(a,r.serialize(o))}catch(l){}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Z=function(e={}){return t=>{const{auto:r=!1}=e,{options:{persist:a=r},store:n,pinia:o}=t;if(!a)return;if(!(n.$id in o.state.value)){const e=o._s.get(n.$id.replace("__hot:",""));return void(e&&Promise.resolve().then(()=>e.$persist()))}const l=(Array.isArray(a)?a.map(t=>X(t,e)):[X(a,e)]).map(function(e,t){return r=>{var a;try{const{storage:n=localStorage,beforeRestore:o,afterRestore:l,serializer:s={serialize:JSON.stringify,deserialize:JSON.parse},key:i=t.$id,paths:u=null,debug:c=!1}=r;return{storage:n,beforeRestore:o,afterRestore:l,serializer:s,key:(null!=(a=e.key)?a:e=>e)("string"==typeof i?i:i(t.$id)),paths:u,debug:c}}catch(n){return r.debug,null}}}(e,n)).filter(Boolean);n.$persist=()=>{l.forEach(e=>{Y(n.$state,e)})},n.$hydrate=({runHooks:e=!0}={})=>{l.forEach(r=>{const{beforeRestore:a,afterRestore:o}=r;e&&(null==a||a(t)),Q(n,r),e&&(null==o||o(t))})},l.forEach(e=>{const{beforeRestore:r,afterRestore:a}=e;null==r||r(t),Q(n,e),null==a||a(t),n.$subscribe((t,r)=>{Y(r,e)},{detached:!0})})}}();const ee=new class{constructor(){u(this,"cache",new Map),u(this,"defaultTTL",3e5)}get(e){const t=this.cache.get(e);if(!t)return null;return Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data}set(e,t,r){this.cache.set(e,{data:t,timestamp:Date.now(),ttl:r||this.defaultTTL})}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}clearExpired(){const e=Date.now();for(const[t,r]of this.cache.entries())e-r.timestamp>r.ttl&&this.cache.delete(t)}size(){return this.cache.size}has(e){const t=this.cache.get(e);if(!t)return!1;return!(Date.now()-t.timestamp>t.ttl)||(this.cache.delete(e),!1)}};"undefined"!=typeof window&&setInterval(()=>{ee.clearExpired()},6e4);const te=new class{constructor(){u(this,"client"),this.client=J.create({baseURL:"http://localhost:8000/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(e=>{var t;const r=null==(t=document.querySelector('meta[name="csrf-token"]'))?void 0:t.content;r&&e.headers&&(e.headers["X-CSRFToken"]=r);const a=localStorage.getItem("auth_token");return a&&e.headers&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>(e.data,e),e=>c(this,null,function*(){var t,r,a,n;const o=e.config;if(401===(null==(t=e.response)?void 0:t.status))return localStorage.removeItem("auth_token"),window.location.href="/login",Promise.reject(e);if(403===(null==(r=e.response)?void 0:r.status)){const t={code:"FORBIDDEN",message:"Доступ запрещен",details:e.response.data};return Promise.reject(t)}if((e=>{if(!e.response)return!0;const t=e.response.status;return t>=500&&t<600})(e)&&o&&!o._retry&&(o._retry=!0,o._retryCount=(o._retryCount||0)+1,o._retryCount<=3)){const e=1e3*Math.pow(2,o._retryCount-1);return yield(l=e,new Promise(e=>setTimeout(e,l))),this.client.request(o)}var l;if(null==(n=null==(a=e.response)?void 0:a.data)?void 0:n.error){const t={code:e.response.data.error.code||"UNKNOWN_ERROR",message:e.response.data.error.message||"Произошла ошибка",details:e.response.data.error.details};return Promise.reject(t)}if(!e.response){const t={code:"NETWORK_ERROR",message:"Ошибка сети. Проверьте подключение к интернету.",details:{originalError:e.message}};return Promise.reject(t)}if(e.response.status>=500){const t={code:"SERVER_ERROR",message:"Ошибка сервера. Попробуйте позже.",details:{status:e.response.status}};return Promise.reject(t)}return Promise.reject(e)}))}get(e,t,r=!0){return c(this,null,function*(){if(r&&void 0===(null==t?void 0:t.method)){const r=this.getCacheKey(e,null==t?void 0:t.params),a=ee.get(r);if(null!==a)return a}const a=yield this.client.get(e,t),n=a.data.data||a.data;if(r&&void 0===(null==t?void 0:t.method)){const r=this.getCacheKey(e,null==t?void 0:t.params);ee.set(r,n)}return n})}post(e,t,r){return c(this,null,function*(){const a=yield this.client.post(e,t,r);return a.data.data||a.data})}put(e,t,r){return c(this,null,function*(){const a=yield this.client.put(e,t,r);return a.data.data||a.data})}delete(e,t){return c(this,null,function*(){const r=yield this.client.delete(e,t);return r.data.data||r.data})}getCacheKey(e,t){if(!t)return e;return`${e}?${JSON.stringify(t)}`}clearCache(e){ee.clear()}},re="/api/auth/password/";const ae=new class{login(e,t){return c(this,null,function*(){return te.post("/v4/auth/login/",{email:e,password:t})})}logout(){return c(this,null,function*(){return te.post("/v4/auth/logout/")})}refreshToken(){return c(this,null,function*(){return te.post("/v4/auth/refresh/")})}getCurrentUser(){return c(this,null,function*(){return te.get("/v4/auth/me/")})}register(e){return c(this,null,function*(){return te.post("/v4/auth/register/",e)})}requestPasswordReset(e){return c(this,null,function*(){return te.post(`${re}forgot/`,{email:e})})}changePassword(e){return c(this,null,function*(){return te.post(`${re}change/`,{old_password:e.oldPassword,new_password:e.newPassword})})}resetPassword(e){return c(this,null,function*(){return te.post(`${re}reset/`,{token:e.token,new_password:e.newPassword,confirm_password:e.confirmPassword})})}getTwoFactorStatus(){return c(this,null,function*(){return te.get("/v4/auth/me/2fa/")})}enableTwoFactor(){return c(this,null,function*(){return te.post("/v4/auth/me/2fa/enable/")})}verifyTwoFactor(e,t="totp"){return c(this,null,function*(){const r={token:e,method:t};return te.post("/v4/auth/me/2fa/verify/",r)})}disableTwoFactor(){return c(this,null,function*(){return te.post("/v4/auth/me/2fa/disable/")})}regenerateBackupCodes(){return c(this,null,function*(){return te.post("/v4/auth/me/2fa/regenerate-backup/")})}},ne=d("auth",()=>{const e=m(null),t=m(null),r=m(!1),a=m([]),n=m(null),o=m(null),l=m(!1),s=m(null),i=p(()=>t=>{var r,n;return a.value.includes(t)||(null==(n=null==(r=e.value)?void 0:r.permissions)?void 0:n.includes(t))||!1}),u=p(()=>t=>{var r;return(null==(r=e.value)?void 0:r.role)===t}),d=p(()=>{var e;return!0===(null==(e=o.value)?void 0:e.enabled)}),h=p(()=>!l.value&&r.value);function v(){return c(this,null,function*(){try{yield ae.logout()}catch(i){}finally{t.value=null,e.value=null,r.value=!1,a.value=[],n.value=null,o.value=null,l.value=!1,s.value=null,localStorage.removeItem("auth_token")}})}return{user:e,token:t,isAuthenticated:r,permissions:a,lastActivity:n,twoFactorStatus:o,twoFactorPending:l,twoFactorSetup:s,hasPermission:i,hasRole:u,requiresTwoFactor:d,isTwoFactorVerified:h,login:function(s,i){return c(this,null,function*(){try{const c=yield ae.login(s,i);t.value=c.token,e.value=c.user,r.value=!0,a.value=c.permissions||[],n.value=new Date,t.value&&localStorage.setItem("auth_token",t.value);try{const e=yield ae.getTwoFactorStatus();o.value=e,e.enabled&&(l.value=!0)}catch(u){}return{success:!0}}catch(u){throw r.value=!1,u}})},logout:v,refreshToken:function(){return c(this,null,function*(){try{const e=yield ae.refreshToken();return t.value=e.token,t.value&&localStorage.setItem("auth_token",t.value),{success:!0}}catch(e){throw yield v(),e}})},checkAuth:function(){return c(this,null,function*(){const s=localStorage.getItem("auth_token");if(!s)return r.value=!1,!1;try{const u=yield ae.getCurrentUser();t.value=s,e.value=u.user,r.value=!0,a.value=u.permissions||[],n.value=new Date;try{const e=yield ae.getTwoFactorStatus();o.value=e,e.enabled&&(l.value=!0)}catch(i){}return!0}catch(i){return yield v(),!1}})},updateActivity:function(){n.value=new Date},checkTwoFactorStatus:function(){return c(this,null,function*(){try{const e=yield ae.getTwoFactorStatus();return o.value=e,e}catch(e){throw o.value=null,e}})},enableTwoFactor:function(){return c(this,null,function*(){try{const e=yield ae.enableTwoFactor();return s.value=e,e}catch(e){throw e}})},verifyTwoFactor:function(t,r="totp"){return c(this,null,function*(){try{const a=yield ae.verifyTwoFactor(t,r);return a.success&&a.user&&(e.value=a.user,l.value=!1,o.value={enabled:!0,method:r}),a}catch(a){throw a}})},disableTwoFactor:function(){return c(this,null,function*(){try{const e=yield ae.disableTwoFactor();return e.success&&(o.value={enabled:!1},s.value=null),e}catch(e){throw e}})},regenerateBackupCodes:function(){return c(this,null,function*(){try{const e=yield ae.regenerateBackupCodes();return s.value&&(s.value.backup_codes=e.backup_codes),e}catch(e){throw e}})},setTwoFactorPending:function(e){l.value=e},clearTwoFactorSetup:function(){s.value=null}}},{persist:{paths:["user","isAuthenticated","permissions","twoFactorStatus"]}}),oe=d("ui",()=>{const e=m(!0),t=m("light"),r=m(null),a=m(!1),n=m([]),o=m([]),l=p(()=>"auto"===t.value?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"===t.value);function s(){l.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}return s(),{sidebarExpanded:e,theme:t,activeModal:r,mobileMenuOpen:a,breadcrumbs:n,notifications:o,isDarkMode:l,toggleSidebar:function(){e.value=!e.value},setTheme:function(e){t.value=e,s()},applyTheme:s,openModal:function(e){r.value=e},closeModal:function(){r.value=null},toggleMobileMenu:function(){a.value=!a.value},setBreadcrumbs:function(e){n.value=e},addNotification:function(e){o.value.unshift(e),setTimeout(()=>{const t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1)},5e3)},removeNotification:function(e){const t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1)}}},{persist:{paths:["sidebarExpanded","theme"]}}),le=e=>{if("TypeError"===e.name&&e.message.includes("fetch"))return!0;if("AbortError"===e.name)return!1;if(e instanceof se&&e.retryable)return!0;if("status"in e&&"number"==typeof e.status){const t=e.status;return t>=500||408===t||429===t}return!1};class se extends Error{constructor(e,t,r=!1,a){super(e),u(this,"status"),u(this,"retryable"),u(this,"code"),this.name="ApiError",this.status=t,this.retryable=r,this.code=a}}const ie=(e,t,r,a,n)=>{const o=t*Math.pow(a,e-1),l=Math.min(o,r);if(n){const e=.25*l;return l+(2*Math.random()-1)*e}return l},ue=(e,t)=>new Promise((r,a)=>{if(null==t?void 0:t.aborted)return void a(new Error("Operation cancelled"));const n=setTimeout(r,e);t&&t.addEventListener("abort",()=>{clearTimeout(n),a(new Error("Operation cancelled"))})});function ce(e){return c(this,arguments,function*(e,t={}){const{maxAttempts:r=3,initialDelay:a=1e3,maxDelay:n=3e4,backoffFactor:o=2,jitter:l=!0,retryCondition:s=le,onRetry:i,signal:u}=t,c=Date.now();let d;for(let h=1;h<=r;h++)try{if(null==u?void 0:u.aborted)throw new Error("Operation cancelled");return{success:!0,data:yield e(),attempts:h,totalDuration:Date.now()-c}}catch(m){if(d=m instanceof Error?m:new Error(String(m)),h===r)break;if(!s(d))break;const e=ie(h,a,n,o,l);null==i||i(h,d,e);try{yield ue(e,u)}catch(p){return{success:!1,error:p instanceof Error?p:new Error("Operation cancelled"),attempts:h,totalDuration:Date.now()-c}}}return{success:!1,error:d,attempts:r,totalDuration:Date.now()-c}})}const de=m([]);function me(e,t={}){const r=crypto.randomUUID(),a=function(e){return"TypeError"===e.name&&e.message.includes("fetch")?"network":e instanceof se?401===e.status?"authentication":403===e.status?"authorization":422===e.status?"validation":"api":e.message.includes("unauthorized")||e.message.includes("authentication")?"authentication":e.message.includes("forbidden")||e.message.includes("permission")?"authorization":e.message.includes("validation")||e.message.includes("invalid")?"validation":"unknown"}(e),n={id:r,type:a,message:e.message,context:i(s({},t),{userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString()}),timestamp:new Date,userAgent:navigator.userAgent,resolved:!1};return de.value.unshift(n),de.value.length>100&&(de.value=de.value.slice(0,100)),function(){c(this,null,function*(){const e=void 0,t=void 0;try{e&&window.Sentry,t&&window.LogRocket}catch(r){}})}(),r}p(()=>function(){const e=de.value.length,t=de.value.filter(e=>e.resolved).length;return{total:e,resolved:t,unresolved:e-t,byType:de.value.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})}}()),p(()=>de.value.slice(0,10));const pe=d("notification",()=>{const e=m([]),t=m(!1),r=p(()=>e.value.filter(e=>!e.read).length),a=p(()=>e.value.filter(e=>!e.read));function n(t){const r=e.value.findIndex(e=>e.id===t);-1!==r&&e.value.splice(r,1)}return{notifications:e,wsConnected:t,unreadCount:r,unreadNotifications:a,addNotification:function(t){const r=i(s({},t),{id:`notif-${Date.now()}-${Math.random()}`,timestamp:new Date,read:!1});return e.value.unshift(r),"success"!==t.type&&"info"!==t.type||setTimeout(()=>{n(r.id)},5e3),r.id},removeNotification:n,markAsRead:function(t){const r=e.value.find(e=>e.id===t);r&&(r.read=!0)},markAllAsRead:function(){e.value.forEach(e=>{e.read=!0})},clearAll:function(){e.value=[]},connectWebSocket:function(){t.value=!0},disconnectWebSocket:function(){t.value=!1}}},{persist:{paths:["notifications"]}});const he=new class{getAssets(e){return c(this,null,function*(){const t={};(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.page_size)&&(t.page_size=e.page_size),(null==e?void 0:e.sort)&&(t.ordering=e.sort),(null==e?void 0:e.type)&&(t.type=e.type),(null==e?void 0:e.tags)&&(t.tags=e.tags),(null==e?void 0:e.search)&&(t.search=e.search);const r={params:t,headers:{}};return te.get("/v4/dam/assets/",r,!1)})}getAsset(e){return c(this,null,function*(){return te.get(`/v4/dam/assets/${e}/`,void 0,!0)})}searchAssets(e){return c(this,null,function*(){return te.post("/v4/dam/assets/search/",e)})}bulkOperation(e){return c(this,null,function*(){return te.post("/v4/dam/assets/bulk/",e)})}updateAsset(e,t){return c(this,null,function*(){return te.put(`/v4/dam/assets/${e}/`,t)})}deleteAsset(e){return c(this,null,function*(){return te.delete(`/v4/dam/assets/${e}/`)})}uploadAsset(e,t){return c(this,null,function*(){const r={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:null==t?void 0:t.onUploadProgress,signal:null==t?void 0:t.signal};return te.post("/v4/dam/assets/upload/",e,r)})}};function ve(e){if("string"==typeof e)return e;if(e&&"object"==typeof e&&"message"in e){return e.message||"Произошла ошибка"}return"Произошла неизвестная ошибка"}const fe=d("search",()=>{const e=m(""),t=m([]),r=m({}),a=m(0),n=m(!1),o=m(null),l=m([]),s=m([]),i=m([]),u=p(()=>t.value.length>0),d=p(()=>a.value),h=p(()=>{const e={};return Object.keys(r.value).forEach(t=>{const a=r.value[t];a&&(e[t]=Object.values(a).reduce((e,t)=>e+t,0))}),e});function v(e){const t=l.value.indexOf(e);-1!==t&&l.value.splice(t,1),l.value.unshift(e),l.value.length>5&&(l.value=l.value.slice(0,5)),localStorage.setItem("recent_searches",JSON.stringify(l.value))}function f(){try{const e=localStorage.getItem("recent_searches");e&&(l.value=JSON.parse(e))}catch(e){l.value=[]}}function g(){try{const e=localStorage.getItem("saved_searches");e&&(s.value=JSON.parse(e))}catch(e){s.value=[]}}return f(),g(),{query:e,results:t,facets:r,totalCount:a,isLoading:n,error:o,recentSearches:l,savedSearches:s,searchHistory:i,hasResults:u,resultCount:d,facetsSummary:h,performSearch:function(l,s=8){return c(this,null,function*(){if(!l.trim()||l.length<2)return t.value=[],a.value=0,void(r.value={});e.value=l.trim(),n.value=!0,o.value=null;try{const n={q:e.value,limit:s,offset:0},o=yield he.searchAssets(n);t.value=o.results,a.value=o.count,r.value=o.facets,v(e.value),i.value.unshift({query:e.value,timestamp:new Date}),i.value.length>50&&(i.value=i.value.slice(0,50))}catch(u){throw o.value=ve(u),t.value=[],a.value=0,r.value={},u}finally{n.value=!1}})},advancedSearch:function(l){return c(this,null,function*(){n.value=!0,o.value=null;try{const n=yield he.searchAssets(l);t.value=n.results,a.value=n.count,r.value=n.facets,l.q&&(e.value=l.q,v(l.q))}catch(s){throw o.value=ve(s),t.value=[],a.value=0,r.value={},s}finally{n.value=!1}})},clearSearch:function(){e.value="",t.value=[],a.value=0,r.value={},o.value=null},addToRecent:v,loadRecentSearches:f,saveSearch:function(e,t,r){const a={id:`saved-${Date.now()}`,name:e,query:t,filters:r,created_at:(new Date).toISOString()};s.value.push(a);try{localStorage.setItem("saved_searches",JSON.stringify(s.value))}catch(n){}return a.id},deleteSavedSearch:function(e){s.value=s.value.filter(t=>t.id!==e);try{localStorage.setItem("saved_searches",JSON.stringify(s.value))}catch(t){}},loadSavedSearches:g}},{persist:{paths:["recentSearches","savedSearches"]}});function ge(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB","TB"][t]}`}function ye(e,t="short"){const r="string"==typeof e?new Date(e):e;return"short"===t?r.toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"}):r.toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function be(e){const t="string"==typeof e?new Date(e):e,r=new Date,a=Math.floor((r.getTime()-t.getTime())/1e3);return a<60?"только что":a<3600?`${Math.floor(a/60)} мин. назад`:a<86400?`${Math.floor(a/3600)} ч. назад`:a<604800?`${Math.floor(a/86400)} дн. назад`:ye(t,"short")}function ke(e,t){return e.length<=t?e:`${e.slice(0,t)}...`}const we={class:"search-results"},xe=["data-result-index","onClick","onMouseenter","aria-selected"],_e={class:"flex-shrink-0 w-12 h-12 bg-neutral-100 dark:bg-neutral-100 rounded-md overflow-hidden"},Ae=["src","alt"],Ee={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-200"},Pe={class:"flex-1 min-w-0"},Se={class:"text-sm font-medium text-neutral-900 dark:text-neutral-900 truncate"},Re={class:"flex items-center gap-2 mt-1 text-xs text-neutral-600 dark:text-neutral-600"},Ce={key:0,class:"ml-1"},je={key:0,class:"border-t border-neutral-300 dark:border-neutral-300 p-3"},Te=(e,t)=>{const r=e.__vccOpts||e;for(const[a,n]of t)r[a]=n;return r},De=Te(f({__name:"SearchResults",props:{results:{},selectedIndex:{},totalCount:{}},emits:["select","view-all","hover"],setup(e,{emit:t}){function r(e){e.target.style.display="none"}return(t,a)=>(_(),g("div",we,[(_(!0),g(b,null,k(e.results,(n,o)=>{return _(),g("div",{key:n.id,"data-result-index":o,class:A(["flex items-center gap-3 p-3 cursor-pointer transition-colors","hover:bg-neutral-100 dark:hover:bg-neutral-100",o===e.selectedIndex?"bg-primary-50 dark:bg-primary-50":""]),onClick:e=>t.$emit("select",n.id),onMouseenter:e=>t.$emit("hover",o),role:"option","aria-selected":o===e.selectedIndex},[w("div",_e,[n.thumbnail_url?(_(),g("img",{key:0,src:n.thumbnail_url,alt:n.label,class:"w-full h-full object-cover",onError:r},null,40,Ae)):(_(),g("div",Ee,[...a[1]||(a[1]=[w("svg",{class:"w-6 h-6 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]))]),w("div",Pe,[w("div",Se,x(n.label),1),w("div",Re,[w("span",null,x(E(ge)(n.size)),1),a[2]||(a[2]=w("span",null,"•",-1)),w("span",null,x(E(ye)(n.date_added)),1),n.mime_type?(_(),g("span",Ce,x((l=n.mime_type,l.startsWith("image/")?"Изображение":l.startsWith("video/")?"Видео":l.startsWith("audio/")?"Аудио":l.includes("pdf")?"PDF":l.includes("word")||l.includes("document")?"Документ":"Файл")),1)):y("",!0)])]),a[3]||(a[3]=w("svg",{class:"flex-shrink-0 w-5 h-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],42,xe);var l}),128)),e.totalCount>e.results.length?(_(),g("div",je,[w("button",{class:"w-full text-center text-sm text-primary-500 hover:text-primary-600 font-medium transition-colors",onClick:a[0]||(a[0]=e=>t.$emit("view-all"))}," Показать все результаты ("+x(e.totalCount)+") ",1)])):y("",!0)]))}}),[["__scopeId","data-v-7805758d"]]),Me={class:"relative"},Oe=["placeholder","onKeydown","aria-expanded","aria-controls"],$e=["id"],Ie={key:0,class:"p-4 text-center"},Le={key:1,class:"p-4 text-center"},qe={class:"text-sm text-error"},Be={key:2},ze={key:3,class:"p-4 text-center text-sm text-neutral-600 dark:text-neutral-600"},Fe={key:4,class:"p-2"},Ve=["onClick","aria-label"],Ne={class:"flex items-center gap-2"},Ue=Te(f({__name:"SearchBar",props:{placeholder:{default:"Поиск... (Ctrl+K)"},autofocus:{type:Boolean,default:!1}},emits:["search","result-selected"],setup(e,{emit:t}){const r=e,a=t,n=O(),o=fe(),l=m(null),s=m(null),i=m(""),u=m(!1),d=m(-1),f=m(`search-${Math.random().toString(36).substring(2,9)}`),I=function(e,t=300){const r=m(e.value);let a=null;return h(e,()=>{a&&clearTimeout(a),a=setTimeout(()=>{r.value=e.value},t)},{immediate:!0}),v(()=>{a&&clearTimeout(a)}),r}(i,300),L=p(()=>u.value&&(I.value.length>=2||o.recentSearches.length>0)&&!o.error);function q(){d.value=-1}function B(){u.value=!0,I.value||o.loadRecentSearches()}function z(){setTimeout(()=>{u.value=!1},200)}function F(){var e;i.value="",o.clearSearch(),null==(e=s.value)||e.blur(),u.value=!1}function V(){var e;i.value="",o.clearSearch(),null==(e=s.value)||e.focus()}function N(){L.value&&0!==o.results.length&&(d.value=Math.min(d.value+1,o.results.length-1),J())}function U(){L.value&&(d.value<=0?d.value=-1:(d.value--,J()))}function W(){d.value>=0&&d.value<o.results.length?K(o.results[d.value].id):I.value&&H()}function K(e){var t;a("result-selected",e),n.push(`/dam/assets/${e}`),i.value="",o.clearSearch(),u.value=!1,null==(t=s.value)||t.blur()}function H(){var e;I.value&&(n.push({path:"/dam/search",query:{q:I.value}}),u.value=!1,null==(e=s.value)||e.blur())}function J(){$(()=>{const e=document.getElementById(`search-results-${f.value}`);if(e&&d.value>=0){const t=e.querySelector(`[data-result-index="${d.value}"]`);t&&t.scrollIntoView({block:"nearest",behavior:"smooth"})}})}function X(e){var t;(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),null==(t=s.value)||t.focus())}return h(I,e=>c(this,null,function*(){e&&e.length>=2?(yield o.performSearch(e,8),a("search",e)):o.clearSearch()})),h(()=>o.query,e=>{e&&!i.value&&(i.value=e)},{immediate:!0}),G(l,()=>{u.value=!1}),P(()=>{var e;document.addEventListener("keydown",X),r.autofocus&&(null==(e=s.value)||e.focus())}),v(()=>{document.removeEventListener("keydown",X)}),(t,r)=>(_(),g("div",{class:"relative",ref_key:"searchContainer",ref:l},[w("div",Me,[R(w("input",{ref_key:"searchInput",ref:s,"onUpdate:modelValue":r[0]||(r[0]=e=>i.value=e),type:"text",placeholder:e.placeholder,class:A(["w-full pl-10 pr-4 py-2 bg-neutral-100 dark:bg-neutral-100 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-all duration-fast",u.value?"ring-2 ring-primary-500":""]),onInput:q,onFocus:B,onBlur:z,onKeydown:[j(F,["esc"]),j(T(N,["prevent"]),["arrow-down"]),j(T(U,["prevent"]),["arrow-up"]),j(T(W,["prevent"]),["enter"])],"aria-label":"Поиск активов","aria-autocomplete":"list","aria-expanded":L.value,"aria-controls":`search-results-${f.value}`},null,42,Oe),[[C,i.value]]),r[2]||(r[2]=w("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-neutral-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),i.value?(_(),g("button",{key:0,class:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-600 rounded transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",onClick:V,"aria-label":"Очистить поиск",type:"button"},[...r[1]||(r[1]=[w("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):y("",!0)]),S(D,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:M(()=>[L.value?(_(),g("div",{key:0,id:`search-results-${f.value}`,class:"absolute z-50 mt-2 w-full bg-neutral-0 dark:bg-neutral-0 border border-neutral-300 dark:border-neutral-300 rounded-md shadow-lg max-h-96 overflow-y-auto",role:"listbox","aria-label":"Результаты поиска"},[E(o).isLoading?(_(),g("div",Ie,[...r[3]||(r[3]=[w("div",{class:"animate-spin h-6 w-6 mx-auto text-primary-500"},null,-1),w("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-600"},"Поиск...",-1)])])):E(o).error?(_(),g("div",Le,[w("p",qe,x(E(o).error),1)])):E(o).hasResults?(_(),g("div",Be,[S(De,{results:E(o).results,"selected-index":d.value,"total-count":E(o).totalCount,onSelect:K,onViewAll:H},null,8,["results","selected-index","total-count"])])):E(I)&&!E(o).isLoading?(_(),g("div",ze,[...r[4]||(r[4]=[w("p",null,"Ничего не найдено",-1),w("p",{class:"mt-1 text-xs"},"Попробуйте изменить запрос",-1)])])):u.value&&!E(I)&&E(o).recentSearches.length>0?(_(),g("div",Fe,[r[6]||(r[6]=w("div",{class:"px-3 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider"}," Недавние поиски ",-1)),(_(!0),g(b,null,k(E(o).recentSearches,(e,t)=>(_(),g("button",{key:t,class:A(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors min-h-[44px]","hover:bg-neutral-100 dark:hover:bg-neutral-100","text-neutral-700 dark:text-neutral-700"]),onClick:t=>{return r=e,i.value=r,void(null==(a=s.value)||a.focus());var r,a},type:"button","aria-label":`Выбрать поиск: ${e}`},[w("div",Ne,[r[5]||(r[5]=w("svg",{class:"w-4 h-4 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),w("span",null,x(e),1)])],8,Ve))),128))])):y("",!0)],8,$e)):y("",!0)]),_:1})],512))}}),[["__scopeId","data-v-84c44302"]]),We={class:"fixed top-0 left-0 right-0 h-16 bg-neutral-0 dark:bg-neutral-0 border-b border-neutral-300 dark:border-neutral-300 z-50 flex items-center px-4"},Ke={class:"flex-shrink-0 w-48"},He={class:"flex-1 max-w-2xl mx-4"},Je={class:"flex items-center gap-2 flex-shrink-0"},Ge=["aria-label"],Xe={key:0,class:"absolute top-0 right-0 w-2 h-2 bg-error rounded-full","aria-label":"Непрочитанных: {{ unreadCount }}"},Qe=["aria-expanded"],Ye={class:"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center text-white text-sm font-medium"},Ze=f({__name:"Header",emits:["search","result-selected","filter-toggle","upload","notifications","mobile-menu-toggle"],setup(e,{emit:t}){const r=O(),a=ne(),n=pe(),o=m(!1),l=m(null),s=p(()=>n.unreadCount),i=p(()=>{const e=a.user;if(!e)return"U";return(e.first_name||e.username||"").charAt(0).toUpperCase()||"U"});function u(e){C("search",e)}function c(e){C("result-selected",e)}function d(){C("upload")}function h(){C("filter-toggle")}function f(){C("notifications")}function b(){o.value=!o.value}function k(){o.value=!1}function A(){a.logout(),r.push("/login"),k()}function E(){C("mobile-menu-toggle")}function R(e){l.value&&!l.value.contains(e.target)&&(o.value=!1)}P(()=>{document.addEventListener("click",R)}),v(()=>{document.removeEventListener("click",R)});const C=t;return(e,t)=>{const r=I("router-link");return _(),g("header",We,[w("div",Ke,[S(r,{to:"/",class:"flex items-center gap-2 text-lg font-semibold text-neutral-900 dark:text-neutral-900 hover:text-primary-500 transition-colors"},{default:M(()=>[...t[1]||(t[1]=[w("svg",{class:"w-8 h-8 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),w("span",{class:"hidden sm:inline"},"DAM System",-1)])]),_:1})]),w("div",He,[S(Ue,{onSearch:u,onResultSelected:c})]),w("div",Je,[w("button",{class:"px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 transition-colors text-sm font-medium hidden sm:flex items-center gap-2 min-h-[44px] min-w-[44px]",onClick:d,"aria-label":"Загрузить файл",type:"button"},[...t[2]||(t[2]=[w("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),w("span",{class:"hidden md:inline"},"Загрузить",-1)])]),w("button",{class:"p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",onClick:h,"aria-label":"Фильтры",type:"button"},[...t[3]||(t[3]=[w("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)])]),w("button",{class:"relative p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",onClick:f,"aria-label":"Уведомления"+(s.value>0?` (${s.value} непрочитанных)`:""),type:"button"},[t[4]||(t[4]=w("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s.value>0?(_(),g("span",Xe)):y("",!0)],8,Ge),w("div",{class:"relative",ref_key:"userMenuRef",ref:l},[w("button",{class:"flex items-center gap-2 p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px]",onClick:b,"aria-label":"Меню пользователя","aria-expanded":o.value,type:"button"},[w("div",Ye,x(i.value),1),t[5]||(t[5]=w("svg",{class:"w-4 h-4 hidden sm:inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],8,Qe),o.value?(_(),g("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-neutral-0 dark:bg-neutral-0 border border-neutral-300 dark:border-neutral-300 rounded-md shadow-lg py-1 z-50",onClick:t[0]||(t[0]=T(()=>{},["stop"]))},[S(r,{to:"/settings/profile",class:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-100",onClick:k},{default:M(()=>[...t[6]||(t[6]=[L(" Профиль ",-1)])]),_:1}),S(r,{to:"/settings",class:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-100",onClick:k},{default:M(()=>[...t[7]||(t[7]=[L(" Настройки ",-1)])]),_:1}),t[8]||(t[8]=w("hr",{class:"my-1 border-neutral-300 dark:border-neutral-300"},null,-1)),w("button",{class:"block w-full text-left px-4 py-2 text-sm text-error hover:bg-neutral-100 dark:hover:bg-neutral-100 min-h-[44px]",onClick:A,type:"button","aria-label":"Выйти из системы"}," Выйти ")])):y("",!0)],512),w("button",{class:"p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors sm:hidden min-w-[44px] min-h-[44px] flex items-center justify-center",onClick:E,"aria-label":"Меню","aria-expanded":!1,type:"button"},[...t[9]||(t[9]=[w("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])])])}}}),et=["aria-label","aria-expanded"],tt={class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},at={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 5l7 7-7 7M5 5l7 7-7 7"},nt={class:"pt-16 px-2"},ot={class:"space-y-1"},lt={key:0,class:"text-sm font-medium"},st={key:0,class:"mt-6 px-2"},it={class:"space-y-1"},ut={class:"text-sm"},ct={class:"mt-auto px-2 pb-4"},dt={key:0,class:"text-sm font-medium"},mt=Te(f({__name:"Sidebar",emits:["navigate","sidebar-toggle","new-folder"],setup(e,{emit:t}){const r=q(),a=oe(),n=p(()=>a.sidebarExpanded),o=[{path:"/",label:"Dashboard",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />\n    </svg>\n  '}},{path:"/dam",label:"DAM Gallery",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />\n    </svg>\n  '}},{path:"/distribution",label:"Distribution",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />\n    </svg>\n  '}},{path:"/settings",label:"Settings",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />\n    </svg>\n  '}}],l=[{id:1,path:"/dam/my-uploads",label:"Мои загрузки",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />\n    </svg>\n  '}},{id:2,path:"/dam/favorites",label:"Избранное",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />\n    </svg>\n  '}},{id:3,path:"/dam/recent",label:"Недавние",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />\n    </svg>\n  '}},{id:4,path:"/dam/shared",label:"Доступные мне",icon:{template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />\n    </svg>\n  '}}];function s(){a.toggleSidebar()}function i(e){return r.path===e||r.path.startsWith(e+"/")}function u(){c("new-folder")}const c=t;return(e,t)=>{const r=I("router-link");return _(),g("aside",{class:A(["fixed left-0 top-16 bottom-0 bg-neutral-0 dark:bg-neutral-0 border-r border-neutral-300 dark:border-neutral-300 transition-all duration-300 ease-in-out z-40 overflow-y-auto",n.value?"w-70":"w-16"])},[w("button",{class:"absolute top-4 right-2 p-2 text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100 rounded-md transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",onClick:s,"aria-label":n.value?"Свернуть боковую панель":"Развернуть боковую панель","aria-expanded":n.value,type:"button"},[(_(),g("svg",tt,[n.value?(_(),g("path",rt)):(_(),g("path",at))]))],8,et),w("nav",nt,[w("ul",ot,[(_(),g(b,null,k(o,e=>w("li",{key:e.path},[S(r,{to:e.path,class:A(["flex items-center gap-3 px-3 py-2 rounded-md transition-colors",i(e.path)?"bg-primary-50 dark:bg-primary-50 text-primary-600 dark:text-primary-600":"text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100"]),onClick:t=>{return r=e.path,void c("navigate",r);var r}},{default:M(()=>[(_(),B(z(e.icon),{class:"w-5 h-5 flex-shrink-0"})),n.value?(_(),g("span",lt,x(e.label),1)):y("",!0)]),_:2},1032,["to","class","onClick"])])),64))])]),n.value?(_(),g("div",st,[t[0]||(t[0]=w("div",{class:"flex items-center justify-between px-3 mb-2"},[w("h3",{class:"text-xs font-semibold text-neutral-500 dark:text-neutral-500 uppercase"}," Коллекции ")],-1)),w("ul",it,[(_(),g(b,null,k(l,e=>w("li",{key:e.id},[S(r,{to:e.path,class:A(["flex items-center gap-3 px-3 py-2 rounded-md transition-colors",i(e.path)?"bg-primary-50 dark:bg-primary-50 text-primary-600 dark:text-primary-600":"text-neutral-600 dark:text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-100"])},{default:M(()=>[(_(),B(z(e.icon),{class:"w-5 h-5 flex-shrink-0"})),w("span",ut,x(e.label),1)]),_:2},1032,["to","class"])])),64))])])):y("",!0),w("div",ct,[w("button",{class:"w-full flex items-center gap-3 px-3 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 transition-colors min-h-[44px]",onClick:u,type:"button","aria-label":"Создать новую папку"},[t[1]||(t[1]=w("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),n.value?(_(),g("span",dt,"Новая папка")):y("",!0)])])],2)}}}),[["__scopeId","data-v-b5b4742d"]]),pt={class:"p-4 md:p-6 lg:p-8"},ht=Te(f({__name:"MainContent",setup(e){const t=oe(),r=p(()=>t.sidebarExpanded);return(e,t)=>(_(),g("main",{class:A(["transition-all duration-300 ease-in-out",r.value?"ml-70":"ml-16","mt-16 min-h-[calc(100vh-4rem)]"])},[w("div",pt,[F(e.$slots,"default",{},void 0,!0)])],2))}}),[["__scopeId","data-v-eabdf541"]]),vt={key:0,class:"px-4 py-3 border-b border-neutral-300 dark:border-neutral-300"},ft={key:1,class:"px-4 py-3 border-t border-neutral-300 dark:border-neutral-300"},gt=f({__name:"Card",props:{variant:{default:"default"},padding:{default:"md"},hover:{type:Boolean,default:!1}},setup(e){const t=e,r=p(()=>{const e=t.hover?"hover:shadow-lg cursor-pointer":"";return`bg-neutral-0 dark:bg-neutral-0 rounded-lg border border-neutral-300 dark:border-neutral-300 transition-all duration-fast ${{default:"shadow-sm",elevated:"shadow-md",outlined:"shadow-none"}[t.variant]} ${e}`}),a=p(()=>({none:"",sm:"p-3",md:"p-4",lg:"p-6"}[t.padding]));return(e,t)=>(_(),g("div",{class:A(r.value)},[e.$slots.header?(_(),g("div",vt,[F(e.$slots,"header")])):y("",!0),w("div",{class:A(a.value)},[F(e.$slots,"default")],2),e.$slots.footer?(_(),g("div",ft,[F(e.$slots,"footer")])):y("",!0)],2))}}),yt=["type","disabled","aria-label","aria-busy","aria-disabled"],bt={key:0,class:"mr-2"},kt=f({__name:"Button",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},type:{default:"button"},fullWidth:{type:Boolean,default:!1}},emits:["click"],setup(e){const t=e,r=p(()=>["inline-flex items-center justify-center font-medium rounded-base transition-all duration-fast focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-neutral-100 text-neutral-900 hover:bg-neutral-300 focus:ring-neutral-500 dark:bg-neutral-100 dark:text-neutral-900 dark:hover:bg-neutral-300",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-50 focus:ring-primary-500 dark:border-primary-500 dark:text-primary-500 dark:hover:bg-primary-50",ghost:"text-neutral-900 hover:bg-neutral-100 focus:ring-neutral-500 dark:text-neutral-900 dark:hover:bg-neutral-100",danger:"bg-error text-white hover:bg-red-600 focus:ring-error"}[t.variant],{sm:"px-3 py-1.5 text-sm min-h-[44px] min-w-[44px]",md:"px-4 py-2 text-base min-h-[44px] min-w-[44px]",lg:"px-6 py-3 text-lg min-h-[48px] min-w-[48px]"}[t.size],t.fullWidth?"w-full":""].filter(Boolean).join(" "));return(t,a)=>(_(),g("button",{type:e.type,disabled:e.disabled||e.loading,class:A(r.value),"aria-label":t.$attrs["aria-label"],"aria-busy":e.loading,"aria-disabled":e.disabled||e.loading,onClick:a[0]||(a[0]=e=>t.$emit("click",e))},[e.loading?(_(),g("span",bt,[...a[1]||(a[1]=[w("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):y("",!0),F(t.$slots,"default")],10,yt))}}),wt={class:"text-center py-8 px-6"},xt={class:"text-2xl font-semibold text-neutral-900 dark:text-neutral-100 mb-2"},_t={class:"text-neutral-600 dark:text-neutral-400 mb-6 max-w-md mx-auto"},At={key:0,class:"mb-6 text-left bg-neutral-50 dark:bg-neutral-800 rounded-lg p-4 max-w-2xl mx-auto"},Et={class:"text-xs text-neutral-600 dark:text-neutral-400 whitespace-pre-wrap overflow-auto max-h-64"},Pt={class:"flex flex-col sm:flex-row gap-3 justify-center"},St={key:1,class:"mt-4"},Rt={class:"text-sm text-neutral-500 dark:text-neutral-400 mb-2"},Ct={class:"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2"},jt={key:2,class:"mt-4 text-sm text-neutral-500 dark:text-neutral-400"},Tt=Te(f({__name:"ErrorBoundary",props:{title:{default:"Something went wrong"},message:{default:"We encountered an unexpected error. Please try again."},maxRetries:{default:3},autoRetryDelay:{default:5},showAutoRetry:{type:Boolean,default:!0},onRetry:{},onError:{}},emits:["error","retry","recovered"],setup(e,{expose:t,emit:r}){const a=e,n=r,o=m(!1),l=m(null),s=m(""),i=m(null),u=m(!1),d=m(0),f=m(0),b=m(null),k=m(),A=p(()=>!1),E=p(()=>{var e,t,r;return l.value?`\nError: ${l.value.message}\nStack: ${l.value.stack}\nComponent: ${(null==(r=null==(t=null==(e=i.value)?void 0:e.$)?void 0:t.type)?void 0:r.name)||"Unknown"}\nInfo: ${s.value}\nTimestamp: ${(new Date).toISOString()}\nUserAgent: ${navigator.userAgent}\nURL: ${window.location.href}\n  `.trim():null}),P=p(()=>d.value>=a.maxRetries?"Max Retries Reached":u.value?"Retrying...":d.value>0?`Retry (${d.value}/${a.maxRetries})`:"Try Again"),R=()=>c(this,null,function*(){if(!(u.value||d.value>=a.maxRetries)){u.value=!0,d.value++;try{T(),a.onRetry?yield a.onRetry(d.value):window.location.reload(),n("retry",d.value)}catch(e){}finally{u.value=!1}}}),C=()=>{window.location.reload()},j=()=>{var e,t,r,a,n;const o={error:null==(e=l.value)?void 0:e.message,stack:null==(t=l.value)?void 0:t.stack,component:null==(n=null==(a=null==(r=i.value)?void 0:r.$)?void 0:a.type)?void 0:n.name,info:s.value,url:window.location.href,userAgent:navigator.userAgent,timestamp:(new Date).toISOString()};navigator.clipboard.writeText(JSON.stringify(o,null,2)).then(()=>{alert("Error details copied to clipboard")}).catch(()=>{alert("Error details logged to console")})},T=()=>{b.value&&(clearInterval(b.value),b.value=null),f.value=0};return h(o,e=>{e||n("recovered")}),v(()=>{T()}),t({resetError:()=>{o.value=!1,l.value=null,s.value="",i.value=null,d.value=0,T()},hasError:o,error:l.value,retryCount:d}),(t,r)=>(_(),g("div",null,[o.value?(_(),g("div",{key:1,class:"error-boundary",role:"alert","aria-live":"assertive",tabindex:"-1",ref_key:"errorContainer",ref:k},[S(gt,{class:"max-w-2xl mx-auto"},{default:M(()=>[w("div",wt,[r[3]||(r[3]=w("div",{class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 dark:bg-red-900/20 mb-6"},[w("svg",{class:"h-8 w-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),w("h2",xt,x(e.title),1),w("p",_t,x(e.message),1),A.value&&E.value?(_(),g("details",At,[r[0]||(r[0]=w("summary",{class:"cursor-pointer text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"}," Error Details (Development) ",-1)),w("pre",Et,x(E.value),1)])):y("",!0),w("div",Pt,[S(kt,{variant:"primary",onClick:R,loading:u.value,disabled:d.value>=e.maxRetries},{default:M(()=>[L(x(P.value),1)]),_:1},8,["loading","disabled"]),S(kt,{variant:"outline",onClick:C},{default:M(()=>[...r[1]||(r[1]=[L(" Reload Page ",-1)])]),_:1}),A.value?(_(),B(kt,{key:0,variant:"ghost",onClick:j,class:"text-neutral-600 dark:text-neutral-400"},{default:M(()=>[...r[2]||(r[2]=[L(" Report Issue ",-1)])]),_:1})):y("",!0)]),u.value&&d.value>0?(_(),g("div",St,[w("div",Rt," Retrying... ("+x(d.value)+"/"+x(e.maxRetries)+") ",1),w("div",Ct,[w("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:V({width:d.value/e.maxRetries*100+"%"})},null,4)])])):y("",!0),e.showAutoRetry?(_(),g("div",jt," Auto-retrying in "+x(f.value)+"s... ",1)):y("",!0)])]),_:1})],512)):F(t.$slots,"default",{key:0},void 0,!0)]))}}),[["__scopeId","data-v-0da9f424"]]),Dt={id:"app",class:"min-h-screen bg-neutral-0 dark:bg-neutral-0"},Mt=Te(f({__name:"App",setup(e){const t=q(),r=ne(),a=p(()=>"login"!==t.name&&"home"!==t.name);function n(e){}function o(){}function l(){oe().openModal("upload")}function s(){oe().openModal("notifications")}function i(){oe().toggleMobileMenu()}function u(e){}function d(){oe().toggleSidebar()}function m(){oe().openModal("create-folder")}function h(e,r,a){var n,o;me(e,{component:null==(o=null==(n=null==r?void 0:r.$)?void 0:n.type)?void 0:o.name,info:a,route:t.name,path:t.path})}function v(e){t.name&&window.location.reload()}function f(){}return P(()=>c(this,null,function*(){const e=function(){const e=e=>{me(e.reason instanceof Error?e.reason:new Error(String(e.reason)),{type:"unhandled_promise_rejection",originalReason:e.reason}),e.preventDefault()},t=e=>{me(e.error||new Error(e.message),{type:"unhandled_error",filename:e.filename,lineno:e.lineno,colno:e.colno}),e.preventDefault()};return window.addEventListener("unhandledrejection",e),window.addEventListener("error",t),()=>{window.removeEventListener("unhandledrejection",e),window.removeEventListener("error",t)}}();return yield r.checkAuth(),e})),(e,t)=>(_(),g("div",Dt,[S(Tt,{"max-retries":3,"auto-retry-delay":5,"show-auto-retry":!0,onError:h,onRetry:v,onRecovered:f},{default:M(()=>[a.value?(_(),g(b,{key:0},[S(Ze,{onSearch:n,onFilterToggle:o,onUpload:l,onNotifications:s,onMobileMenuToggle:i}),S(mt,{onNavigate:u,onSidebarToggle:d,onNewFolder:m}),S(ht,null,{default:M(()=>[S(E(N))]),_:1})],64)):(_(),B(E(N),{key:1}))]),_:1})]))}}),[["__scopeId","data-v-4592e517"]]),Ot={},$t=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Ot)return;Ot[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},It=[{path:"/",name:"home",component:()=>$t(()=>import("./DashboardPage-DzscEweA.js"),__vite__mapDeps([0,1,2,3,4])),meta:{requiresAuth:!0}},{path:"/dashboard",name:"dashboard",component:()=>$t(()=>import("./DashboardPage-DzscEweA.js"),__vite__mapDeps([0,1,2,3,4])),meta:{requiresAuth:!0}},{path:"/login",name:"login",component:()=>$t(()=>import("./LoginPage-DzqBjuAv.js"),__vite__mapDeps([5,1,6,3])),meta:{requiresAuth:!1}},{path:"/auth/forgot-password",name:"forgot-password",component:()=>$t(()=>import("./ForgotPasswordPage-BPjUa3sk.js"),__vite__mapDeps([7,1,3,8])),meta:{requiresAuth:!1,title:"Forgot Password"}},{path:"/auth/2fa",name:"two-factor-auth",component:()=>$t(()=>import("./Login2FAPage-DPolDAx7.js"),__vite__mapDeps([9,1,6,3])),meta:{requiresAuth:!1,title:"Two-Factor Authentication"}},{path:"/auth/reset-password",name:"reset-password",component:()=>$t(()=>import("./ResetPasswordPage-Bad7F0pP.js"),__vite__mapDeps([10,1,3,11])),meta:{requiresAuth:!1,title:"Reset Password"}},{path:"/dam",name:"dam",component:()=>$t(()=>import("./DAMPage-DJgtnZeh.js"),__vite__mapDeps([12,1,2,13,14,3,15,16,17,18])),meta:{requiresAuth:!0}},{path:"/dam/gallery",name:"dam-gallery",component:()=>$t(()=>import("./DAMPage-DJgtnZeh.js"),__vite__mapDeps([12,1,2,13,14,3,15,16,17,18])),meta:{requiresAuth:!0}},{path:"/dam/search",name:"dam-search",component:()=>$t(()=>import("./AdvancedSearchPage-CqTnTRpT.js"),__vite__mapDeps([19,1,14,13,3,15,20,21,17,22])),meta:{requiresAuth:!0}},{path:"/dam/assets/:id",name:"asset-detail",component:()=>$t(()=>import("./AssetDetailPage-BobnOf4R.js"),__vite__mapDeps([23,1,2,14,3,24])),meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:()=>$t(()=>import("./SettingsPage-DuZVh-nv.js"),__vite__mapDeps([25,1,6,26,3,27])),meta:{requiresAuth:!0}},{path:"/settings/profile",name:"settings-profile",component:()=>$t(()=>import("./SettingsPage-DuZVh-nv.js"),__vite__mapDeps([25,1,6,26,3,27])),meta:{requiresAuth:!0}},{path:"/distribution",name:"distribution",component:()=>$t(()=>import("./DistributionPage-DDyHlIps.js"),__vite__mapDeps([28,1,29,6,26,16,17,14,3,30])),meta:{requiresAuth:!0}},{path:"/distribution/publications/:id",name:"publication-detail",component:()=>$t(()=>import("./PublicationDetailPage-B1P7ATRM.js"),__vite__mapDeps([31,1,29,14,32,16,33,3,34])),meta:{requiresAuth:!0,breadcrumb:"Publication Detail",title:"Publication Detail"},props:!0},{path:"/admin",component:()=>$t(()=>import("./AdminPage-CXPhJYLW.js"),__vite__mapDeps([35,1,36,37,3,38])),meta:{requiresAuth:!0,requiresRole:"admin",requiresPermission:"admin.access",breadcrumb:"Administration"},redirect:"/admin/users",children:[{path:"users",name:"admin-users",component:()=>$t(()=>import("./UserManagementPage-ChViErh3.js"),__vite__mapDeps([39,1,40,6,26,14,17,16,32,33,3,41])),meta:{requiresAuth:!0,requiresPermission:"admin.user_manage",breadcrumb:"User Management",title:"User Management - Admin"}},{path:"schemas",name:"admin-metadata-schemas",component:()=>$t(()=>import("./MetadataSchemaPage-D7YMHMPB.js"),__vite__mapDeps([42,1,40,6,14,26,32,16,33,3,43])),meta:{requiresAuth:!0,requiresPermission:"admin.schema_manage",breadcrumb:"Metadata Schemas",title:"Metadata Schemas - Admin"}},{path:"workflows",name:"admin-workflows",component:()=>$t(()=>import("./WorkflowDesignerPage-DHAlsbUd.js"),__vite__mapDeps([44,1,40,6,26,32,16,33,3,45])),meta:{requiresAuth:!0,requiresPermission:"admin.workflow_manage",breadcrumb:"Workflow Designer",title:"Workflow Designer - Admin"}},{path:"reports",name:"admin-reports",component:()=>$t(()=>import("./AdminReportsPage-DTcQImp3.js"),__vite__mapDeps([46,1,3,47,26,20,21,17,48])),meta:{requiresAuth:!0,requiresPermission:"admin.reports_view",breadcrumb:"Reports",title:"Admin Reports"}}]},{path:"/collections",name:"collections",component:()=>$t(()=>import("./CollectionsPage-CdRC1CLp.js"),__vite__mapDeps([49,1,47,36,37,16,6,26,32,33,3,50])),meta:{requiresAuth:!0,breadcrumb:"Collections",title:"Collections"}},{path:"/collections/:id",name:"collection-detail",component:()=>$t(()=>import("./CollectionsPage-CdRC1CLp.js"),__vite__mapDeps([49,1,47,36,37,16,6,26,32,33,3,50])),meta:{requiresAuth:!0,breadcrumb:"Collection Detail",title:"Collection Detail"}},{path:"/forbidden",name:"forbidden",component:()=>$t(()=>import("./ForbiddenPage-DtxzxZIf.js"),__vite__mapDeps([51,1,3,52])),meta:{requiresAuth:!1}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>$t(()=>import("./NotFoundPage-B5cQRc5s.js"),__vite__mapDeps([53,1,3]))}],Lt=U({history:W("/"),routes:It});Lt.beforeEach((e,t,r)=>c(void 0,null,function*(){const t=ne(),a=oe();if(!t.isAuthenticated){if(localStorage.getItem("auth_token")){(yield t.checkAuth())||localStorage.removeItem("auth_token")}}if(e.meta.requiresAuth&&!t.isAuthenticated)return void r({name:"login",query:{returnTo:e.fullPath}});if(t.isAuthenticated&&"two-factor-auth"!==e.name&&t.requiresTwoFactor&&!t.isTwoFactorVerified)return void r({name:"two-factor-auth",query:{returnTo:e.fullPath}});if(e.meta.requiresPermission){const a=e.meta.requiresPermission;if(!(0,t.hasPermission.value)(a))return void r({name:"forbidden",query:{returnTo:e.fullPath,requiredPermission:a}})}if(e.meta.requiresRole){const a=e.meta.requiresRole;if(!(0,t.hasRole.value)(a))return void r({name:"forbidden",query:{returnTo:e.fullPath,requiredRole:a}})}if("login"===e.name&&t.isAuthenticated&&t.isTwoFactorVerified){const t=e.query.returnTo||"/";return void r(t)}if("two-factor-auth"===e.name&&t.isAuthenticated)return void r();const n=function(e){const t=[{label:"Главная",path:"/"}];if("/"!==e.path){const r=e.path.split("/").filter(Boolean);let a="";r.forEach(e=>{a+=`/${e}`;const r=e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push({label:r,path:a})})}return t}(e);a.setBreadcrumbs(n),r()}));const qt=K(Mt),Bt=H();Bt.use(Z),qt.use(Bt),qt.use(Lt),qt.mount("#app");export{Ue as S,gt as _,te as a,ye as b,be as c,Te as d,kt as e,ve as f,ae as g,he as h,fe as i,ge as j,oe as k,pe as l,$t as m,ke as t,ne as u,ce as w};
//# sourceMappingURL=index-CEUju959.js.map
