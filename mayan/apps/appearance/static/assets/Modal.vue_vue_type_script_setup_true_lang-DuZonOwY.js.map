{"version":3,"file":"Modal.vue_vue_type_script_setup_true_lang-DuZonOwY.js","sources":["../../src/components/Common/Modal.vue","../../src/composables/useFocusTrap.ts"],"sourcesContent":["<template>\r\n  <Teleport to=\"body\">\r\n    <Transition\r\n      enter-active-class=\"transition-opacity duration-normal ease-out\"\r\n      enter-from-class=\"opacity-0\"\r\n      enter-to-class=\"opacity-100\"\r\n      leave-active-class=\"transition-opacity duration-normal ease-in\"\r\n      leave-from-class=\"opacity-100\"\r\n      leave-to-class=\"opacity-0\"\r\n    >\r\n      <div\r\n        v-if=\"isOpen\"\r\n        class=\"fixed inset-0 z-50 overflow-y-auto\"\r\n        @click.self=\"handleBackdropClick\"\r\n      >\r\n        <!-- Backdrop -->\r\n        <div class=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity\"></div>\r\n\r\n        <!-- Modal container -->\r\n        <div class=\"flex min-h-full items-center justify-center p-4\">\r\n          <Transition\r\n            enter-active-class=\"transition-all duration-normal ease-out\"\r\n            enter-from-class=\"opacity-0 scale-95 translate-y-4\"\r\n            enter-to-class=\"opacity-100 scale-100 translate-y-0\"\r\n            leave-active-class=\"transition-all duration-normal ease-in\"\r\n            leave-from-class=\"opacity-100 scale-100 translate-y-0\"\r\n            leave-to-class=\"opacity-0 scale-95 translate-y-4\"\r\n          >\r\n            <div\r\n              v-if=\"isOpen\"\r\n              ref=\"modalRef\"\r\n              :class=\"modalClasses\"\r\n              @click.stop\r\n              tabindex=\"-1\"\r\n              role=\"dialog\"\r\n              aria-modal=\"true\"\r\n              :aria-labelledby=\"title ? 'modal-title' : undefined\"\r\n            >\r\n              <!-- Header -->\r\n              <div v-if=\"title || $slots.header\" class=\"flex items-center justify-between px-6 py-4 border-b border-neutral-300 dark:border-neutral-300\">\r\n                <h3 v-if=\"title\" id=\"modal-title\" class=\"text-xl font-semibold text-neutral-900 dark:text-neutral-900\">\r\n                  {{ title }}\r\n                </h3>\r\n                <slot name=\"header\" />\r\n                <button\r\n                  v-if=\"closable\"\r\n                  @click=\"handleClose\"\r\n                  class=\"ml-4 text-neutral-600 hover:text-neutral-900 dark:text-neutral-600 dark:hover:text-neutral-900 transition-colors\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n\r\n              <!-- Body -->\r\n              <div class=\"px-6 py-4\">\r\n                <slot />\r\n              </div>\r\n\r\n              <!-- Footer -->\r\n              <div v-if=\"$slots.footer\" class=\"flex items-center justify-end gap-3 px-6 py-4 border-t border-neutral-300 dark:border-neutral-300\">\r\n                <slot name=\"footer\" />\r\n              </div>\r\n            </div>\r\n          </Transition>\r\n        </div>\r\n      </div>\r\n    </Transition>\r\n  </Teleport>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, watch, ref } from 'vue'\r\nimport { useFocusTrap } from '@/composables/useFocusTrap'\r\n\r\ninterface Props {\r\n  isOpen: boolean\r\n  title?: string\r\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full'\r\n  closable?: boolean\r\n  closeOnBackdrop?: boolean\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  size: 'md',\r\n  closable: true,\r\n  closeOnBackdrop: true\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  'update:isOpen': [value: boolean]\r\n  close: []\r\n}>()\r\n\r\nconst modalRef = ref<HTMLElement | null>(null)\r\nconst isActive = ref(false)\r\n\r\n// Focus trap\r\nconst { activate, deactivate } = useFocusTrap(modalRef, isActive)\r\n\r\nconst modalClasses = computed(() => {\r\n  const base = 'relative bg-neutral-0 dark:bg-neutral-0 rounded-lg shadow-xl w-full max-h-[90vh] overflow-hidden flex flex-col'\r\n  \r\n  const sizes = {\r\n    sm: 'max-w-md',\r\n    md: 'max-w-lg',\r\n    lg: 'max-w-2xl',\r\n    xl: 'max-w-4xl',\r\n    full: 'max-w-full mx-4'\r\n  }\r\n  \r\n  return `${base} ${sizes[props.size]}`\r\n})\r\n\r\nfunction handleClose() {\r\n  emit('update:isOpen', false)\r\n  emit('close')\r\n}\r\n\r\nfunction handleBackdropClick() {\r\n  if (props.closeOnBackdrop) {\r\n    handleClose()\r\n  }\r\n}\r\n\r\n// Close on Escape key and manage focus trap\r\nwatch(() => props.isOpen, (isOpen) => {\r\n  isActive.value = isOpen\r\n  \r\n  if (isOpen) {\r\n    // Activate focus trap\r\n    activate()\r\n    \r\n    // Close on Escape\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && props.closable) {\r\n        handleClose()\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEscape)\r\n    \r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape)\r\n      deactivate()\r\n    }\r\n  } else {\r\n    deactivate()\r\n  }\r\n})\r\n</script>\r\n\r\n\r\n","import { onMounted, onUnmounted, Ref } from 'vue'\r\n\r\n/**\r\n * Focus trap composable for modals and dialogs\r\n * Traps focus within the specified element\r\n */\r\nexport function useFocusTrap(elementRef: Ref<HTMLElement | null>, isActive: Ref<boolean>) {\r\n  let previousActiveElement: HTMLElement | null = null\r\n\r\n  function getFocusableElements(): HTMLElement[] {\r\n    if (!elementRef.value) return []\r\n\r\n    const focusableSelectors = [\r\n      'a[href]',\r\n      'button:not([disabled])',\r\n      'textarea:not([disabled])',\r\n      'input:not([disabled])',\r\n      'select:not([disabled])',\r\n      '[tabindex]:not([tabindex=\"-1\"])'\r\n    ].join(', ')\r\n\r\n    return Array.from(\r\n      elementRef.value.querySelectorAll<HTMLElement>(focusableSelectors)\r\n    ).filter((el) => {\r\n      // Filter out hidden elements\r\n      const style = window.getComputedStyle(el)\r\n      return style.display !== 'none' && style.visibility !== 'hidden'\r\n    })\r\n  }\r\n\r\n  function trapFocus(event: KeyboardEvent) {\r\n    if (!isActive.value || !elementRef.value) return\r\n\r\n    const focusableElements = getFocusableElements()\r\n    if (focusableElements.length === 0) return\r\n\r\n    const firstElement = focusableElements[0]\r\n    const lastElement = focusableElements[focusableElements.length - 1]\r\n\r\n    if (!firstElement || !lastElement) return\r\n\r\n    // Tab key\r\n    if (event.key === 'Tab') {\r\n      if (event.shiftKey) {\r\n        // Shift + Tab\r\n        if (document.activeElement === firstElement) {\r\n          event.preventDefault()\r\n          lastElement.focus()\r\n        }\r\n      } else {\r\n        // Tab\r\n        if (document.activeElement === lastElement) {\r\n          event.preventDefault()\r\n          firstElement.focus()\r\n        }\r\n      }\r\n    }\r\n\r\n    // Escape key handled by parent component\r\n  }\r\n\r\n  function activate() {\r\n    if (!elementRef.value) return\r\n\r\n    // Store current active element\r\n    previousActiveElement = document.activeElement as HTMLElement\r\n\r\n    // Focus first focusable element\r\n    const focusableElements = getFocusableElements()\r\n    if (focusableElements.length > 0 && focusableElements[0]) {\r\n      focusableElements[0].focus()\r\n    } else {\r\n      // If no focusable elements, focus the container\r\n      elementRef.value.focus()\r\n    }\r\n\r\n    // Add event listener\r\n    document.addEventListener('keydown', trapFocus)\r\n  }\r\n\r\n  function deactivate() {\r\n    // Remove event listener\r\n    document.removeEventListener('keydown', trapFocus)\r\n\r\n    // Restore previous focus\r\n    if (previousActiveElement && previousActiveElement instanceof HTMLElement) {\r\n      previousActiveElement.focus()\r\n    }\r\n  }\r\n\r\n  onMounted(() => {\r\n    if (isActive.value) {\r\n      activate()\r\n    }\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    deactivate()\r\n  })\r\n\r\n  return {\r\n    activate,\r\n    deactivate\r\n  }\r\n}\r\n\r\n"],"names":["props","__props","emit","__emit","modalRef","ref","isActive","activate","deactivate","elementRef","previousActiveElement","getFocusableElements","value","focusableSelectors","join","Array","from","querySelectorAll","filter","el","style","window","getComputedStyle","display","visibility","trapFocus","event","focusableElements","length","firstElement","lastElement","key","shiftKey","document","activeElement","preventDefault","focus","addEventListener","removeEventListener","HTMLElement","onMounted","onUnmounted","useFocusTrap","modalClasses","computed","sm","md","lg","xl","full","size","handleClose","handleBackdropClick","closeOnBackdrop","watch","isOpen","handleEscape","e","closable","_createBlock","_Teleport","to","_createVNode","_Transition","_createElementBlock","class","onClick","_createElementVNode","_hoisted_1","tabindex","role","title","$slots","header","_openBlock","_hoisted_3","_hoisted_4","_toDisplayString","_renderSlot","_ctx","fill","stroke","viewBox","d","_hoisted_5","footer","_hoisted_6"],"mappings":"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"}