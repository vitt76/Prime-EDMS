var e=(e,a,n)=>new Promise((s,t)=>{var r=e=>{try{o(n.next(e))}catch(a){t(a)}},i=e=>{try{o(n.throw(e))}catch(a){t(a)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,i);o((n=n.apply(e,a)).next())});import{b as a,r as n,c as s,e as t,i as r,F as i,h as o,j as l,n as u,C as d,D as c,t as m,w as v,k as h,x as p,l as b,z as g,B as w}from"./vue-vendor-FOQ7SlVG.js";import{u as k,d as f}from"./index-Bkz-5-QE.js";import{B as _}from"./Breadcrumbs-3P1BhmQZ.js";import"./utils-vendor-C6ZCcsv1.js";const x={class:"admin-tabs"},y={class:"admin-tabs__nav",role:"tablist","aria-label":"Administration Navigation"},M=["aria-selected","aria-controls","onClick","onKeydown"],P={class:"admin-tabs__label"},j={class:"admin-tabs__mobile"},C=["value"],B=["value"],q=f(a({__name:"AdminNavigationTabs",props:{currentTab:{}},emits:["tab-change"],setup(e,{emit:a}){const v=a,h=k(),p=n([]),b=[{id:"users",label:"Users",icon:"users",requiresPermission:"admin.user_manage"},{id:"schemas",label:"Metadata Schemas",icon:"database",requiresPermission:"admin.schema_manage"},{id:"workflows",label:"Workflows",icon:"flow",requiresPermission:"admin.workflow_manage"},{id:"integrations",label:"Integrations",icon:"plug",requiresPermission:"admin.integrations_manage"},{id:"reports",label:"Reports",icon:"chart-bar",requiresPermission:"admin.reports_view"}],g=s(()=>b.filter(e=>!e.requiresPermission||h.hasPermission.value(e.requiresPermission))),w={template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />\n    </svg>\n  '},f={template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />\n    </svg>\n  '},_={template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />\n    </svg>\n  '},q={template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z" />\n    </svg>\n  '},z={template:'\n    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />\n    </svg>\n  '},T=e=>{v("tab-change",e)},A=e=>{const a=e.target;v("tab-change",a.value)};return(a,n)=>(l(),t("div",x,[r("nav",y,[(l(!0),t(i,null,o(g.value,(a,n)=>{return l(),t("button",{key:a.id,ref_for:!0,ref:e=>((e,a)=>{e&&(p.value[a]=e)})(e,n),class:u(["admin-tabs__tab",{"admin-tabs__tab--active":e.currentTab===a.id}]),"aria-selected":e.currentTab===a.id,"aria-controls":`panel-${a.id}`,role:"tab",type:"button",tabindex:"0",onClick:e=>T(a.id),onKeydown:e=>((e,a,n)=>{if("Enter"===e.key||" "===e.key)return" "===e.key&&e.preventDefault(),void T(a);const s=g.value;if(0===s.length)return;let t=null;if("ArrowLeft"===e.key?t=n>0?n-1:s.length-1:"ArrowRight"===e.key&&(t=n<s.length-1?n+1:0),null!==t&&t>=0&&t<s.length){e.preventDefault();const a=s[t];a&&(v("tab-change",a.id),setTimeout(()=>{const e=p.value[t];e&&e.focus()},0))}})(e,a.id,n)},[(l(),d(c((s=a.icon,{users:w,database:f,flow:_,plug:q,"chart-bar":z}[s]||w)),{class:"admin-tabs__icon","aria-hidden":"true"})),r("span",P,m(a.label),1)],42,M);var s}),128))]),r("div",j,[r("select",{value:e.currentTab,class:"admin-tabs__select","aria-label":"Select administration section",onChange:A},[(l(!0),t(i,null,o(g.value,e=>(l(),t("option",{key:e.id,value:e.id},m(e.label),9,B))),128))],40,C)])]))}}),[["__scopeId","data-v-b9356220"]]),z={class:"admin-page"},T={class:"admin-content"},A=f(a({__name:"AdminPage",setup(a){const i=p(),o=w(),u=k(),d=n("users"),c=s(()=>{const e=[{label:"Home",to:"/"},{label:"Administration",to:"/admin"}],a=f(d.value);return a&&e.push({label:a,to:null}),e}),m=a=>e(this,null,function*(){d.value=a,yield i.push(`/admin/${a}`)}),f=e=>({users:"User Management",schemas:"Metadata Schemas",workflows:"Workflow Designer",integrations:"Integrations",reports:"Reports"}[e]||e),x=()=>{const e=o.path.split("/").filter(Boolean),a=e.indexOf("admin");-1!==a&&e[a+1]?d.value=e[a+1]:d.value="users"};return v(()=>o.path,()=>{x()},{immediate:!0}),h(()=>e(this,null,function*(){u.hasPermission.value("admin.access")?x():yield i.push({name:"forbidden"})})),(e,a)=>{const n=g("RouterView");return l(),t("div",z,[b(_,{items:c.value},null,8,["items"]),b(q,{"current-tab":d.value,onTabChange:m},null,8,["current-tab"]),r("div",T,[b(n)])])}}}),[["__scopeId","data-v-1e914595"]]);export{A as default};
//# sourceMappingURL=AdminPage-CWGlTdsJ.js.map
