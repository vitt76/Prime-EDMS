{"version":3,"mappings":";ipCAiLO,MAAMA,EAAiB,IA/J9B,MAIQ,cAAAC,CAAeC,GAAmD,OAAAC,EAAAC,KAAA,iBACtE,MAAMC,EAAsC,CAC1CC,MAAOJ,EAAUK,UACjBC,IAAKN,EAAUO,SAGjB,OAAOC,EAAWC,IAChB,qBACA,CAAEC,OAAQP,IACV,EAEJ,GAKM,iBAAAQ,CACJX,GAC2B,OAAAC,EAAAC,KAAA,iBAC3B,MAAMC,EAAsC,CAC1CC,MAAOJ,EAAUK,UACjBC,IAAKN,EAAUO,SAGjB,OAAOC,EAAWC,IAChB,yBACA,CAAEC,OAAQP,IACV,EAEJ,GAKM,iBAAAS,CACJZ,EACAa,GACyB,OAAAZ,EAAAC,KAAA,iBACzB,MAAMC,EAA+C,CACnDC,MAAOJ,EAAUK,UACjBC,IAAKN,EAAUO,SAOjB,OAJIM,IACFV,EAAYU,MAAQA,GAGfL,EAAWC,IAChB,wBACA,CAAEC,OAAQP,IACV,EAEJ,GAKM,gBAAAW,CACJd,GAC6B,OAAAC,EAAAC,KAAA,iBAC7B,MAAMC,EAAsC,CAC1CC,MAAOJ,EAAUK,UACjBC,IAAKN,EAAUO,SAGjB,OAAOC,EAAWC,IAChB,uBACA,CAAEC,OAAQP,IACV,EAEJ,GAKM,YAAAY,CAAaC,EAAkBC,GAAqC,OAAAhB,EAAAC,KAAA,iBAExE,MAAMgB,SAASC,EAAA,IAAAlB,EAAAC,KAAA,uBAAAkB,QAAAC,SAAMC,OAAO,8BAAOC,KAAAC,KAAAC,GAAA,OAAAL,QAAAC,EAAA,GAAAK,yBAAGN,QAChCO,EAAQC,aAAaC,QAAQ,cAcnC,aAXuBX,EAAMT,IAC3B,wCAA8BO,YAC9B,CACEN,OAAQ,CAAEO,UACVa,aAAc,OACdC,QAAS,CACPC,cAAeL,EAAQ,UAAUA,IAAU,OAKjCM,IAClB,GAKM,aAAAC,CAAcxB,GAA8C,OAAAT,EAAAC,KAAA,iBAChE,MAAMC,EAA+C,GAmBrD,aAjBIO,WAAQyB,QACVhC,EAAYgC,KAAOzB,EAAOyB,aAExBzB,WAAQV,aACVG,EAAYC,MAAQM,EAAOV,UAAUK,UACrCF,EAAYG,IAAMI,EAAOV,UAAUO,gBAEjCG,WAAQ0B,WACVjC,EAAYiC,QAAU1B,EAAO0B,gBAE3B1B,WAAQ2B,QACVlC,EAAYkC,KAAO3B,EAAO2B,aAExB3B,WAAQ4B,aACVnC,EAAYmC,UAAY5B,EAAO4B,WAG1B9B,EAAWC,IAChB,eACA,CAAEC,OAAQP,IACV,EAEJ,GAKM,UAAAoC,CAAWC,GAAiC,OAAAvC,EAAAC,KAAA,iBAEhD,IAAKsC,EAAOC,MAAsC,IAA9BD,EAAOC,KAAKC,OAAOC,OACrC,MAAM,IAAIC,MAAM,2BAElB,GAAIJ,EAAOC,KAAKE,OAAS,IACvB,MAAM,IAAIC,MAAM,8CAGlB,OAAOpC,EAAWqC,KAAa,eAAgBL,EACjD,GAKM,SAAAM,CAAUC,GAA6B,OAAA9C,EAAAC,KAAA,iBAC3C,OAAOM,EAAWC,IAAY,eAAesC,UAAO,GAAW,EACjE,GAKM,YAAAC,CAAaD,GAA2B,OAAA9C,EAAAC,KAAA,iBAC5C,OAAOM,EAAWyC,OAAa,eAAeF,KAChD,KC1JIG,EAAsC,CAC1Cf,KAAM,QACN9B,UAAW,GACXE,QAAS,IAGE4C,EAAkBC,EAC7B,UACA,KACE,MAAMC,EAAYC,IACZC,EAAUC,IAEVC,EAAmBC,EAAI,CAC3BC,MAAO,EACPC,UAAW,EACXC,SAAU,EACVC,QAAS,IAGLC,EACJC,UAEA,MAAMC,GAAU,OAAAC,EAAAT,EAAiBU,MAAMH,MAAQ,GAAK,QAKpD,OAJAP,EAAiBU,SAAQC,EAAA,GACpBX,EAAiBU,aADG,CAEvBH,CAACA,GAAMC,MAEFA,GAGHI,EAAwB,CAC5BL,EACAjB,IACYU,EAAiBU,MAAMH,KAASjB,EAExCuB,EAAiB,CAACC,EAAiBC,KACvC,MAAMC,EAAUC,EAAeF,GACzBG,EAAOC,EAAiBJ,GAQ9B,OANAjB,EAAQsB,gBAAgB,CACtB1C,KAAM,QACN2C,MAAO,GAAGP,UACVE,UACAM,KAAMJ,EAAO,CAAEA,aAAS,IAEnBF,GAIHO,EAAUtB,EAAc,IACxBuB,EAAgBvB,EAAmB,MACnCwB,EAAexB,EAAmB,IAClCyB,EAAgBzB,EAA0B,MAG1C1D,EAAY0D,EAAqBU,EAAA,GAAKlB,IAGtCkC,EAAe1B,EAAyB,MACxC2B,EAAkB3B,EAAsB,IACxC4B,EAAiB5B,EAAoB,IACrC6B,EAAmB7B,EAAwB,IAG3C8B,EAAY9B,EAAsB,MAGlC+B,EAAY/B,GAAI,GAChBc,EAAQd,EAAmB,MAG3BgC,EAAcC,EAAS,IACA,OAApBH,EAAUrB,OAAkBqB,EAAUrB,MAAMyB,SAASjD,OAAS,GAGjEkD,EAAiBF,EAAS,IACC,OAAxBV,EAAcd,OAGjB2B,EAAmBH,EAAS,KAChC,GAA6B,WAAzB3F,EAAUmE,MAAMhC,KAAmB,CACrC,GAAInC,EAAUmE,MAAM9D,WAAaL,EAAUmE,MAAM5D,QAAS,CACxD,MAAMH,EAAQ,IAAI2F,KAAK/F,EAAUmE,MAAM9D,WACjCC,EAAM,IAAIyF,KAAK/F,EAAUmE,MAAM5D,SACrC,MAAO,GAAGyF,EAAW5F,QAAY4F,EAAW1F,IAC9C,CACA,MAAO,cACT,CAEA,MAAM2F,MAAUF,KAChB,OAAQ/F,EAAUmE,MAAMhC,MACtB,IAAK,QACH,OAAO6D,EAAWC,GACpB,IAAK,OACH,MAAMC,EAAU,IAAIH,KAAKE,GAEzB,OADAC,EAAQC,QAAQF,EAAIG,UAAY,GACzB,GAAGJ,EAAWE,QAAcF,EAAWC,KAChD,IAAK,QACH,OAAOI,EAAYJ,GACrB,IAAK,UACH,OAAOK,EAAcL,GACvB,QACE,MAAO,kBAKPD,EAAcO,GACXA,EAAKC,mBAAmB,QAAS,CACtCC,MAAO,OACPC,IAAK,UACLC,KAAM,YAIJN,EAAeE,GACZA,EAAKC,mBAAmB,QAAS,CACtCC,MAAO,OACPE,KAAM,YAIJL,EAAiBC,GAEd,IADSK,KAAKC,MAAMN,EAAKO,WAAa,GAAK,KAC5BP,EAAKQ,gBAGvBC,EAAsBC,IAC1B,MAAMhB,MAAUF,KAChB,IAAI3F,EACAE,EAAY,IAAIyF,KAAKE,GAEzB,OAAQgB,EAAM9E,MACZ,IAAK,QACH/B,EAAQ,IAAI2F,KAAKE,GACjB7F,EAAM8G,SAAS,EAAG,EAAG,EAAG,GACxB5G,EAAI4G,SAAS,GAAI,GAAI,GAAI,KACzB,MACF,IAAK,OACH9G,EAAQ,IAAI2F,KAAKE,GACjB7F,EAAM+F,QAAQF,EAAIG,UAAY,GAC9BhG,EAAM8G,SAAS,EAAG,EAAG,EAAG,GACxB,MACF,IAAK,QACH9G,EAAQ,IAAI2F,KAAKE,EAAIc,cAAed,EAAIa,WAAY,GACpD1G,EAAM8G,SAAS,EAAG,EAAG,EAAG,GACxB5G,EAAM,IAAIyF,KAAKE,EAAIc,cAAed,EAAIa,WAAa,EAAG,GACtDxG,EAAI4G,SAAS,GAAI,GAAI,GAAI,KACzB,MACF,IAAK,UACH,MAAMC,EAAUP,KAAKC,MAAMZ,EAAIa,WAAa,GAC5C1G,EAAQ,IAAI2F,KAAKE,EAAIc,cAAyB,EAAVI,EAAa,GACjD/G,EAAM8G,SAAS,EAAG,EAAG,EAAG,GACxB5G,EAAM,IAAIyF,KAAKE,EAAIc,cAA+B,GAAfI,EAAU,GAAQ,GACrD7G,EAAI4G,SAAS,GAAI,GAAI,GAAI,KACzB,MACF,IAAK,SACH9G,EAAQ,IAAI2F,KAAKkB,EAAM5G,WACvBC,EAAM,IAAIyF,KAAKkB,EAAM1G,SACrB,MACF,QACEH,EAAQ,IAAI2F,KAAKE,GACjB7F,EAAMgH,SAASnB,EAAIa,WAAa,GAGpC,MAAO,CACL1G,MAAOA,EAAMiH,cACb/G,IAAKA,EAAI+G,gBAKb,SAAeC,EAAiBL,GAAwC,OAAAhH,EAAAC,KAAA,iBACtE,MAAM8D,EAA2C,QAC3CuD,EAAYxD,EAAmBC,GACrCyB,EAAUtB,OAAQ,EAClBK,EAAML,MAAQ,KAEd,IACE,MAAMqD,EAAcP,GAASjH,EAAUmE,OACjC/D,MAAEA,EAAAE,IAAOA,GAAQ0G,EAAmBQ,GAEpCC,QAAgB3H,EAAeC,eAAe,CAClDoC,KAAMqF,EAAYrF,KAClB9B,UAAWD,EACXG,QAASD,IAGX,IAAK+D,EAAsBL,EAAKuD,GAC9B,OAGFnC,EAAajB,MAAQsD,EAEjBA,EAAQC,eACVnC,EAAiBpB,MAAQ,CACvB,CACEwD,SAAU,SACVC,KAAM,EACNC,MAAOJ,EAAQC,aAAaI,OAC5BC,WAAY,GAEd,CACEJ,SAAU,SACVC,KAAM,EACNC,MAAOJ,EAAQC,aAAaM,OAC5BD,WAAY,GAEd,CACEJ,SAAU,YACVC,KAAM,EACNC,MAAOJ,EAAQC,aAAaO,UAC5BF,WAAY,GAEd,CACEJ,SAAU,QACVC,KAAM,EACNC,MAAOJ,EAAQC,aAAaQ,MAC5BH,WAAY,GAEd,CACEJ,SAAU,QACVC,KAAM,EACNC,MAAOJ,EAAQC,aAAaS,MAC5BJ,WAAY,KAKlBvC,EAAUrB,MAAQiE,EAAyB7C,EAAiBpB,MAC9D,OAASkE,GACP,IAAKhE,EAAsBL,EAAKuD,GAC9B,OAEF,MAAM9C,EAAUH,EAAe,qBAAsB+D,GAKrD,MAJA7D,EAAML,MAAQM,EACdW,EAAajB,MAAQ,KACrBoB,EAAiBpB,MAAQ,GACzBqB,EAAUrB,MAAQ,KACZkE,CACR,SACMhE,EAAsBL,EAAKuD,KAC7B9B,EAAUtB,OAAQ,EAEtB,CACF,GAEA,SAAemE,EAAoBrB,GAAwC,OAAAhH,EAAAC,KAAA,iBACzE,MAAM8D,EAA2C,YAC3CuD,EAAYxD,EAAmBC,GACrCyB,EAAUtB,OAAQ,EAClBK,EAAML,MAAQ,KAEd,IACE,MAAMqD,EAAcP,GAASjH,EAAUmE,OACjC/D,MAAEA,EAAAE,IAAOA,GAAQ0G,EAAmBQ,GAEpCC,QAAgB3H,EAAea,kBAAkB,CACrDwB,KAAMqF,EAAYrF,KAClB9B,UAAWD,EACXG,QAASD,IAGX,IAAK+D,EAAsBL,EAAKuD,GAC9B,OAGFlC,EAAgBlB,MAAQsD,EACxBjC,EAAUrB,MAAQoE,EAA0Bd,EAC9C,OAASY,GACP,IAAKhE,EAAsBL,EAAKuD,GAC9B,OAEF,MAAM9C,EAAUH,EAAe,wBAAyB+D,GAIxD,MAHA7D,EAAML,MAAQM,EACdY,EAAgBlB,MAAQ,GACxBqB,EAAUrB,MAAQ,KACZkE,CACR,SACMhE,EAAsBL,EAAKuD,KAC7B9B,EAAUtB,OAAQ,EAEtB,CACF,GAEA,SAAeqE,EACbvB,EACApG,EAAgB,IACD,OAAAZ,EAAAC,KAAA,iBACf,MAAM8D,EAA2C,WAC3CuD,EAAYxD,EAAmBC,GACrCyB,EAAUtB,OAAQ,EAClBK,EAAML,MAAQ,KAEd,IACE,MAAMqD,EAAcP,GAASjH,EAAUmE,OACjC/D,MAAEA,EAAAE,IAAOA,GAAQ0G,EAAmBQ,GAEpCiB,QAAmB3I,EAAec,kBACtC,CACEuB,KAAMqF,EAAYrF,KAClB9B,UAAWD,EACXG,QAASD,GAEXO,GAGF,IAAKwD,EAAsBL,EAAKuD,GAC9B,OAGFjC,EAAenB,MAAQsE,CACzB,OAASJ,GACP,IAAKhE,EAAsBL,EAAKuD,GAC9B,OAEF,MAAM9C,EAAUH,EAAe,wBAAyB+D,GAGxD,MAFA7D,EAAML,MAAQM,EACda,EAAenB,MAAQ,GACjBkE,CACR,SACMhE,EAAsBL,EAAKuD,KAC7B9B,EAAUtB,OAAQ,EAEtB,CACF,GAEA,SAAeuE,EAAmBzB,GAAwC,OAAAhH,EAAAC,KAAA,iBACxE,MAAM8D,EAA2C,UAC3CuD,EAAYxD,EAAmBC,GACrCyB,EAAUtB,OAAQ,EAClBK,EAAML,MAAQ,KAEd,IACE,MAAMqD,EAAcP,GAASjH,EAAUmE,OACjC/D,MAAEA,EAAAE,IAAOA,GAAQ0G,EAAmBQ,GAEpCmB,QAAkB7I,EAAegB,iBAAiB,CACtDqB,KAAMqF,EAAYrF,KAClB9B,UAAWD,EACXG,QAASD,IAGX,IAAK+D,EAAsBL,EAAKuD,GAC9B,OAGFhC,EAAiBpB,MAAQwE,EACzBnD,EAAUrB,MAAQiE,EAAyBO,EAC7C,OAASN,GACP,IAAKhE,EAAsBL,EAAKuD,GAC9B,OAEF,MAAM9C,EAAUH,EAAe,uBAAwB+D,GAIvD,MAHA7D,EAAML,MAAQM,EACdc,EAAiBpB,MAAQ,GACzBqB,EAAUrB,MAAQ,KACZkE,CACR,SACMhE,EAAsBL,EAAKuD,KAC7B9B,EAAUtB,OAAQ,EAEtB,CACF,GAgDA,SAASiE,EAAyBO,GAChC,MAAMC,EAAmBD,EAAUE,IAAKC,GAASA,EAAKnB,UAChD1F,EAAO0G,EAAUE,IAAKC,GAASA,EAAKlB,MACpCmB,EAA6B,CACjC,0BACA,yBACA,0BACA,0BACA,2BAGIC,EAAyBD,EAAiBE,MAAM,EAAGL,EAAOjG,QAAQkG,IAAKK,GAC3EA,EAAEC,QAAQ,MAAO,MAGnB,MAAO,CACLP,SACAhD,SAAU,CACR,CACEwD,MAAO,sBACPnH,OACAoH,gBAAiBN,EAAiBE,MAAM,EAAGL,EAAOjG,QAClD2G,YAAaN,IAIrB,CAEA,SAAST,EAA0Bd,GAQjC,MAAO,CACLmB,OARuBnB,EAAQoB,IAAKU,GACvB,IAAIxD,KAAKwD,EAAEhD,MACZC,mBAAmB,QAAS,CAAEC,MAAO,QAASC,IAAK,aAO/Dd,SAAU,CACR,CACEwD,MAAO,YACPnH,KARYwF,EAAQoB,IAAKU,GAAMA,EAAE3F,WASjC0F,YAAa,wBACbD,gBAAiB,0BACjBG,MAAM,GAER,CACEJ,MAAO,eACPnH,KAdcwF,EAAQoB,IAAKU,GAAMA,EAAEE,aAenCH,YAAa,wBACbD,gBAAiB,0BACjBG,MAAM,IAId,CAiIA,OAhOAE,EACE,IAAM1J,EAAUmE,MACTwF,GAAa1J,OAAA,mBAClB,GAAIgF,EAAcd,MAEhB,OAAQc,EAAcd,MAAMhC,MAC1B,IAAK,cACGmF,EAAiBqC,GACvB,MACF,IAAK,kBACGrB,EAAoBqB,GAC1B,MACF,IAAK,iBACGnB,EAAoBmB,GAC1B,MACF,IAAK,gBACGjB,EAAmBiB,GAIjC,GACA,CAAEC,MAAM,IA2MH,CAEL5E,UACAC,gBACAC,eACAC,gBAGAnF,YAGAoF,eACAC,kBACAC,iBACAC,mBAGAC,YAGAC,YACAjB,QAGAkB,cACAG,iBACAC,mBAGAwB,mBACAgB,sBACAE,sBACAE,qBAGAmB,aAxQF,SAAsB5C,GACpBjH,EAAUmE,MAAQC,EAAA,GAAK6C,EACzB,EAyQE6C,kBA7OF,SACEC,EACAtC,GAEA,OAAQsC,GACN,IAAK,QACL,IAAK,UACH,OAAO3B,EAAyBX,GAClC,IAAK,YACH,OAAOc,EAA0Bd,GACnC,QACE,MAAO,CAAEmB,OAAQ,GAAIhD,SAAU,IAErC,EAiOEwC,2BACAG,4BAGAxH,aAzKF,SAA4BE,GAAqC,OAAAhB,EAAAC,KAAA,iBAC/D,IAAK+E,EAAcd,MACjB,MAAM,IAAIvB,MAAM,iCAGlB6C,EAAUtB,OAAQ,EAClBK,EAAML,MAAQ,KAEd,IAKE,aAJmBrE,EAAeiB,aAChCkE,EAAcd,MAAMpB,GACpB9B,EAGJ,OAASoH,GAEP,MADA7D,EAAML,MAAQO,EAAe2D,GACvBA,CACR,SACE5C,EAAUtB,OAAQ,CACpB,CACF,IAwJE5B,WArJF,SAA0BE,EAAcN,GAA+B,OAAAlC,EAAAC,KAAA,uBACrEuF,EAAUtB,OAAQ,EAClBK,EAAML,MAAQ,KAEd,IAEE,IAAIsD,EAEJ,OAAQtF,GACN,IAAK,QACH,IAAKiD,EAAajB,MAChB,MAAM,IAAIvB,MAAM,8DAElB6E,EAAUrC,EAAajB,MACvB,MACF,IAAK,YACH,GAAqC,IAAjCkB,EAAgBlB,MAAMxB,OACxB,MAAM,IAAIC,MAAM,iEAElB6E,EAAUpC,EAAgBlB,MAC1B,MACF,IAAK,WACH,GAAoC,IAAhCmB,EAAenB,MAAMxB,OACvB,MAAM,IAAIC,MAAM,iEAElB6E,EAAUnC,EAAenB,MACzB,MACF,IAAK,UACH,GAAsC,IAAlCoB,EAAiBpB,MAAMxB,OACzB,MAAM,IAAIC,MAAM,+DAElB6E,EAAUlC,EAAiBpB,MAC3B,MACF,QACE,MAAM,IAAIvB,MAAM,wBAAwBT,KAG5C,MAAMK,EAAiB,CACrBO,GAAI,EACJN,OACAN,OACAnC,UAAWA,EAAUmE,MACrBsD,UACAuC,YAAA,IAAgBjE,MAAOsB,cACvB4C,YAAA,IAAgBlE,MAAOsB,cACvB6C,YAAY,OAAAhG,EAAAb,EAAU8G,WAAV,EAAAjG,EAAgBnB,KAAM,GAG9BqH,QAAoBtK,EAAeyC,WAAWC,GAEpD,OADA0C,EAAaf,MAAMkG,KAAKD,GACjBA,CACT,OAAS/B,GAEP,MADA7D,EAAML,MAAQO,EAAe2D,GACvBA,CACR,SACE5C,EAAUtB,OAAQ,CACpB,CACF,IA6FEmG,kBA1FF,WAAkD,OAAArK,EAAAC,KAAA,iBAChDuF,EAAUtB,OAAQ,EAClBK,EAAML,MAAQ,KAEd,IACE,MAAMoG,QAAczK,EAAeoC,cAAc,CAAEC,KAAM,UACzD+C,EAAaf,MAAQoG,CACvB,OAASlC,GAGP,MAFA7D,EAAML,MAAQO,EAAe2D,GAC7BnD,EAAaf,MAAQ,GACfkE,CACR,SACE5C,EAAUtB,OAAQ,CACpB,CACF,IA+EEqG,iBA5EF,SAA0BhI,GACxByC,EAAcd,MAAQ3B,EAClBA,IACFxC,EAAUmE,MAAQ3B,EAAOxC,UAE7B,EA0EEyK,WAvEF,WACEjG,EAAML,MAAQ,IAChB,EAsEEuG,MApEF,WACE1F,EAAQb,MAAQ,GAChBc,EAAcd,MAAQ,KACtBe,EAAaf,MAAQ,GACrBgB,EAAchB,MAAQ,KACtBnE,EAAUmE,MAAQC,EAAA,GAAKlB,GACvBkC,EAAajB,MAAQ,KACrBkB,EAAgBlB,MAAQ,GACxBmB,EAAenB,MAAQ,GACvBoB,EAAiBpB,MAAQ,GACzBqB,EAAUrB,MAAQ,KAClBK,EAAML,MAAQ,IAChB,IA2DF,CACEwG,QAAS,CACPC,MAAO,CAAC,qOC5oBd,MAAMC,EAAQC,EAERC,EAAiBrH,EAA8B,MAC/CsH,EAAoBtH,EAA2B,MAC/CuH,EAAavH,EAAmB,MACtC,IAAIwH,EAAiD,KAGrD,MAAMC,EAAY,IAA0BlL,EAAAC,KAAA,iBAC1C,IAEE,MAAMkL,QAAcjK,EAAA,IAAMG,OAAO,sBAAeI,IAChD,OAAO0J,EAAYhK,SAAWgK,EAAYC,KAC5C,OAAS7G,GAIP,OAFAyG,EAAW9G,MACT,6EACK,IACT,CACF,GAEMmH,EAAc,IAA2BrL,EAAAC,KAAA,iBAC7C,IAAK6K,EAAe5G,QAAU0G,EAAM5I,KAAM,OAGtCiJ,IACFA,EAAcK,UACdL,EAAgB,MAGlB,MAAMG,QAAcF,IACpB,GAAKE,EAEL,IACE,MAAMG,EAAMT,EAAe5G,MAAMsH,WAAW,MAC5C,IAAKD,EAAK,OAEV,MAAME,EAAoB,CACxBvJ,KAAM0I,EAAM1I,KACZF,KAAM4I,EAAM5I,KACZ0J,QAAS,CACPC,YAAY,EACZC,qBAAqB,EACrBC,QAAS,CACPC,OAAQ,CACNC,SAAU,SACVpD,OAAQ,CACNqD,QAAS,GACTC,eAAe,IAGnBC,QAAS,CACPC,SAAS,EACT/C,gBAAiB,qBACjB4C,QAAS,GACTI,UAAW,CACTzE,KAAM,GACN0E,OAAQ,QAEVC,SAAU,CACR3E,KAAM,MAIZ4E,OACiB,QAAf3B,EAAM1I,KACF,CACEsK,EAAG,CACDC,KAAM,CACJC,SAAS,EACTC,MAAO,uBAETC,MAAO,CACLC,KAAM,CACJlF,KAAM,MAIZmF,EAAG,CACDC,aAAa,EACbN,KAAM,CACJC,SAAS,EACTC,MAAO,uBAETC,MAAO,CACLC,KAAM,CACJlF,KAAM,YAKd,IAIVsD,EAAgB,IAAIG,EAAMG,EAAKE,GAC/BT,EAAW9G,MAAQ,IACrB,OAASK,GAEPyG,EAAW9G,MAAQ,+DACrB,CACF,UAGAuF,EACE,IAAMmB,EAAM5I,KACZ,IAAYhC,EAAAC,KAAA,uBACJ+M,UACA3B,GACR,GACA,CAAE1B,MAAM,IAIVsD,EAAU,IAAYjN,EAAAC,KAAA,uBACd+M,UACA3B,GACR,IAEA6B,EAAY,KACNjC,IACFA,EAAcK,UACdL,EAAgB,gBA/IlBkC,IAAAC,EAQM,MARNC,EAQM,CAPMxC,EAAAhG,WAAVuI,EAAgE,KAAhEE,EAAgEC,EAAb1C,EAAAhG,OAAK,aACxD2I,EAEM,OAFDC,MAAM,qCAAiC,oBAAJhK,IAAIsH,IAC1CyC,EAA8D,kBAAlD,iBAAJ/J,IAAIqH,EAAkB,aAAYD,EAAAhG,OAAK,yBAEtCmG,EAAA9G,OAAXiJ,IAAAC,EAEM,MAFNM,EAEM,CADJF,EAAuB,WAAjBxC,EAAA9G,OAAU,g+BCwGtB,MAAM0G,EAAQC,EAMR8C,EAAclK,EAAI,GAElBmK,EAAsBlI,EAAS,KACnC,IAAKkF,EAAMiD,gBAAkBjD,EAAMpC,WAAW9F,QAAUkI,EAAMkD,SAC5D,OAAOlD,EAAMpC,WAEf,MAAMrI,GAASwN,EAAYzJ,MAAQ,GAAK0G,EAAMkD,SACxCzN,EAAMF,EAAQyK,EAAMkD,SAC1B,OAAOlD,EAAMpC,WAAWQ,MAAM7I,EAAOE,KAGjC0N,EAAarI,EAAS,IACrBkF,EAAMiD,eACJlH,KAAKqH,KAAKpD,EAAMpC,WAAW9F,OAASkI,EAAMkD,UADf,GAI9BG,EAAoB7L,IACxBuL,EAAYzJ,MAAQ9B,EAEpB,MAAM8L,EAAeC,SAASC,cAAc,4BACxCF,GACFA,EAAaG,eAAe,CAAEC,SAAU,SAAUC,MAAO,WAkBvDC,EAAmBC,IACvB,MAAMnI,EAAO,IAAIR,KAAK2I,GAChBzI,MAAUF,KACV4I,EAAS1I,EAAI2I,UAAYrI,EAAKqI,UAC9BC,EAAWjI,KAAKC,MAAM8H,EAAS,KAC/BG,EAAYlI,KAAKC,MAAM8H,EAAS,MAChCI,EAAWnI,KAAKC,MAAM8H,EAAS,OAErC,OAAIE,EAAW,EACN,WACEA,EAAW,GACb,GAAGA,SACDC,EAAY,GACd,GAAGA,SACDC,EAAW,EACb,GAAGA,SAEHxI,EAAKC,mBAAmB,QAAS,CACtCC,MAAO,QACPC,IAAK,UACLC,KAAMJ,EAAKQ,gBAAkBd,EAAIc,cAAgB,eAAY,mBA/KjEqG,IAAAC,EA+FM,MA/FNC,EA+FM,CA7FOxC,EAAArF,WAAX2H,IAAAC,EAOM,MAPNE,EAOM,MANJF,EAKE2B,EAAA,KAAAC,EAJY,EAALxN,GADTgM,EAKE,OAHCzJ,IAAKvC,EACNiM,MAAM,+BACL,qCAAoCjM,yBAM3BqJ,EAAArF,WAA8B,IAAjBqF,EAAArC,WAAW9F,QAuBtCyK,IAAAC,EA0DM,MA1DN6B,GA0DM,CAzDJzB,EAyCQ,QAzCR0B,GAyCQ,aAxCN1B,EAOQ,cANNA,EAKK,WAJHA,EAAwD,MAApDC,MAAM,yBAAyB0B,MAAM,OAAM,QAC/C3B,EAA0D,MAAtDC,MAAM,yBAAyB0B,MAAM,OAAM,UAC/C3B,EAAyD,MAArDC,MAAM,yBAAyB0B,MAAM,OAAM,SAC/C3B,EAAwD,MAApDC,MAAM,yBAAyB0B,MAAM,OAAM,gBAGnD3B,EA+BQ,qBA9BNJ,EA6BK2B,EAAA,KAAAC,EA5BgBpB,EAAA1J,MAAZN,eADTwJ,EA6BK,MA3BFrJ,IAAG,GAAKH,EAAS6K,aAAa7K,EAASwL,YAAYxL,EAASyL,UAAQ,SACrE5B,MAAM,wBAEND,EAKK,KALL8B,GAKK,CAJH9B,EAGM,MAHN+B,GAGM,CAFJ/B,EAAqE,OAArEgC,GAAqEjC,EAA3B3J,EAASwL,UAAQ,GAC3D5B,EAA+D,OAA/DiC,GAA+DlC,EAAxB3J,EAAS8L,OAAK,OAGzDlC,EAMK,KANLmC,GAMK,CALHnC,EAIO,QAHJC,MAAKmC,EAAA,mDAAsDhM,EAASiM,eAiF/DA,EA/EUjM,EAASiM,OAgFsB,CAC3DC,OAAQ,SACRC,SAAU,WACVC,KAAM,OACNhN,OAAQ,SACRiN,MAAO,QACPC,KAAM,OACNC,QAAS,UACTC,IAAK,OAEaP,IAAWA,IA1Fc,KAGnCrC,EAKK,KALL6C,GAKK,CAJSzM,EAAS0M,YAArBnD,IAAAC,EAEO,OAFPmD,GAEOhD,EADF3J,EAAS0M,YAAU,SAExBlD,EAA0D,OAA1DoD,GAAkD,QAEpDhD,EAIK,KAJLiD,GAIK,CAHHjD,EAEO,QAFAkD,SAAU9M,EAAS6K,UAAWhB,MAAM,0BACtCe,EAAgB5K,EAAS6K,YAAS,EAAAkC,QAoEhC,IAACd,cA3DRhF,EAAAgD,gBAAkBE,EAAA7J,MAAU,GADpCiJ,IAAAC,EAYM,MAZNwD,GAYM,CANJC,EAKEC,EAAA,CAJC,eAAcnD,EAAAzJ,MACd,cAAa2G,EAAArC,WAAW9F,OACxB,YAAWmI,EAAAiD,SACXiD,aAAa9C,sEA/EpBd,IAAAC,EAqBM,MArBNM,GAqBM,IAAAsD,EAAA,KAAAA,EAAA,IAfJxD,EAaM,OAZJC,MAAM,6BACNlE,KAAK,OACL0H,OAAO,eACPC,QAAQ,YACR,cAAY,SAEZ1D,EAKE,QAJA,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb2D,EAAE,qDAGN3D,EAAoE,KAAjEC,MAAM,8BAA6B,8BAA0B,6qBC8MtE,MAAM2D,EAASC,IACTjO,EAAYC,IACZiO,EAAepO,IACfI,EAAUC,IAGVgO,EAAoB9N,EAAY,SAChC+N,EAAkB/N,EAA6B,MAC/CgO,EAAiBhO,GAAI,GACrB+B,EAAY/B,GAAI,GAChBiO,EAAgBjO,EAAwB,MAGxCkO,EAAmB,CACvB,CAAEzN,MAAO,QAASiF,MAAO,SACzB,CAAEjF,MAAO,OAAQiF,MAAO,aACxB,CAAEjF,MAAO,QAASiF,MAAO,cACzB,CAAEjF,MAAO,UAAWiF,MAAO,iBAC3B,CAAEjF,MAAO,SAAUiF,MAAO,iBAI5ByI,EAAeF,EAAe,KAC5BD,EAAevN,OAAQ,IAIzB,MAAMiB,EAAeO,EAAS,IAAM4L,EAAanM,cAC3CE,EAAiBK,EAAS,IAAM4L,EAAajM,gBAC7CC,EAAmBI,EAAS,IAAM4L,EAAahM,kBAC/CF,EAAkBM,EAAS,IAAM4L,EAAalM,iBAE9CrF,EAAY2F,EAA0B,KAC1C,GAAgC,WAA5B6L,EAAkBrN,OAAsBsN,EAAgBtN,MAC1D,MAAO,CACLhC,KAAM,SACN9B,UAAWoR,EAAgBtN,MAAM,GACjC5D,QAASkR,EAAgBtN,MAAM,IAInC,MAAM2N,MAAY/L,KAClB,IAAI1F,EAAY,IAAI0F,KAAK+L,GAEzB,OAAQN,EAAkBrN,OACxB,IAAK,QAeL,QACE9D,EAAU6G,SAAS,EAAG,EAAG,EAAG,SAb9B,IAAK,OACH7G,EAAU8F,QAAQ2L,EAAM1L,UAAY,GACpC/F,EAAU6G,SAAS,EAAG,EAAG,EAAG,GAC5B,MACF,IAAK,QACH7G,EAAU+G,SAAS0K,EAAMhL,WAAa,GACtCzG,EAAU6G,SAAS,EAAG,EAAG,EAAG,GAC5B,MACF,IAAK,UACH7G,EAAU+G,SAAS0K,EAAMhL,WAAa,GACtCzG,EAAU6G,SAAS,EAAG,EAAG,EAAG,GAMhC,MAAM3G,EAAU,IAAIwF,KAAK+L,GAGzB,OAFAvR,EAAQ2G,SAAS,GAAI,GAAI,GAAI,KAEtB,CACL/E,KAAMqP,EAAkBrN,MACxB9D,UAAWA,EAAUgH,cACrB9G,QAASA,EAAQ8G,iBAIf0K,EAAmBpM,EAAS,IAC3BJ,EAAiBpB,MAAMxB,OAErB,CACLiG,OAAQrD,EAAiBpB,MAAM0E,IAAKmJ,GAAMA,EAAErK,UAC5C/B,SAAU,CACR,CACEwD,MAAO,eACPnH,KAAMsD,EAAiBpB,MAAM0E,IAAKmJ,GAAMA,EAAEpK,KAAA,YAC1CyB,gBAAiB,CACf,0BACA,yBACA,0BACA,0BACA,2BACAJ,MAAM,EAAG1D,EAAiBpB,MAAMxB,WAdG,MAoBvCsP,EAAoBtM,EAAS,IAC5BN,EAAgBlB,MAAMxB,OAEpB,CACLiG,OAAQvD,EAAgBlB,MAAM0E,IAAKuI,GACpB,IAAIrL,KAAKqL,EAAE7K,MACZC,mBAAmB,QAAS,CAAEC,MAAO,QAASC,IAAK,aAEjEd,SAAU,CACR,CACEwD,MAAO,YACPnH,KAAMoD,EAAgBlB,MAAM0E,IAAKuI,GAAMA,EAAExN,WACzC0F,YAAa,wBACbD,gBAAiB,0BACjBG,MAAM,EACN0I,QAAS,IAEX,CACE9I,MAAO,eACPnH,KAAMoD,EAAgBlB,MAAM0E,IAAKuI,GAAMA,EAAE3H,aACzCH,YAAa,wBACbD,gBAAiB,0BACjBG,MAAM,EACN0I,QAAS,MAtB2B,MA4BtCC,EAAsBxM,EAAS,IAC9BJ,EAAiBpB,MAAMxB,OAErB,CACLiG,OAAQrD,EAAiBpB,MAAM0E,IAAKmJ,GAAMA,EAAErK,UAC5C/B,SAAU,CACR,CACEwD,MAAO,aACPnH,KAAMsD,EAAiBpB,MAAM0E,IAAKmJ,GAAMA,EAAEnK,OAC1CwB,gBAAiB,6BARoB,MAevC+I,EAAe,IAA2BnS,EAAAC,KAAA,iBAC9CuF,EAAUtB,OAAQ,EAClB,UACQkO,QAAQC,IAAI,CAChBf,EAAajK,iBAAiBtH,EAAUmE,OACxCoN,EAAajJ,oBAAoBtI,EAAUmE,OAC3CoN,EAAa/I,oBAAoBxI,EAAUmE,MAAO,IAClDoN,EAAa7I,mBAAmB1I,EAAUmE,QAE9C,OAASK,GACPjB,EAAQsB,gBAAgB,CACtB1C,KAAM,QACN2C,MAAO,QACPL,QAAS,0BAEb,SACEgB,EAAUtB,OAAQ,CACpB,CACF,GAEAuF,EACE,IAAM8H,EAAkBrN,MACvBA,IACe,WAAVA,IACFsN,EAAgBtN,MAAQ,MAE1BiO,MAIJ1I,EACE,IAAM+H,EAAgBtN,MACtB,KACkC,WAA5BqN,EAAkBrN,OAAsBsN,EAAgBtN,OAC1DiO,MAKN,MAAMG,EAAsBtR,GAAyChB,EAAAC,KAAA,yBACnE,IAIE,GAHAwR,EAAevN,OAAQ,IAGlB,OAAAD,EAAAqN,EAAatM,oBAAb,EAAAf,EAA4BnB,IAAI,CAGnCQ,EAAQsB,gBAAgB,CACtB1C,KAAM,OACN2C,MAAO,OACPL,QAAS,qCAIX,IAAIsF,EAAa,QACb1E,EAAgBlB,MAAMxB,OAAS,EACjCoH,EAAa,YACJzE,EAAenB,MAAMxB,OAAS,EACvCoH,EAAa,WACJxE,EAAiBpB,MAAMxB,OAAS,IACzCoH,EAAa,WAGf,MAAMK,QAAoBmH,EAAahP,WACrC,eAAcwD,MAAOS,uBACrBuD,GAGF,IAAKK,EAAYrH,GACf,MAAM,IAAIH,MAAM,sCAGlB2O,EAAa/G,iBAAiBJ,EAChC,CAGA,KADiB,OAAAoI,EAAAjB,EAAatM,oBAAb,EAAAuN,EAA4BzP,IAE3C,MAAM,IAAIH,MAAM,kCAGlB,MAAM6P,QAAalB,EAAaxQ,aAAaE,GAGvCyR,EAAMC,OAAOC,IAAIC,gBAAgBJ,GACjCK,EAAO1E,SAAS2E,cAAc,KACpCD,EAAKE,KAAON,EACZI,EAAK9C,SAAW,eAAcjK,MAAOsB,cAAc4L,MAAM,KAAK,MAAMhS,IACpEmN,SAAS8E,KAAKC,YAAYL,GAC1BA,EAAKM,QACLhF,SAAS8E,KAAKG,YAAYP,GAC1BH,OAAOC,IAAIU,gBAAgBZ,GAE3BnP,EAAQsB,gBAAgB,CACtB1C,KAAM,UACN2C,MAAO,UACPL,QAAS,sBAAsBxD,EAAOsS,iBAE1C,OAAS/O,GACPjB,EAAQsB,gBAAgB,CACtB1C,KAAM,QACN2C,MAAO,QACPL,QAAS,2BAEb,CACF,GAEM+O,EAAeC,IACnB,GAAc,IAAVA,EAAa,MAAO,UACxB,MAEMhS,EAAImF,KAAKC,MAAMD,KAAK8M,IAAID,GAAS7M,KAAK8M,IAFlC,OAGV,OAAO9M,KAAK+M,MAAOF,EAAQ7M,KAAKgN,IAHtB,KAG6BnS,GAAM,KAAO,IAAM,IAF5C,CAAC,QAAS,KAAM,KAAM,KAAM,MAE4BA,WAIxEyL,EAAU,IAAYjN,EAAAC,KAAA,iBAEfmD,EAAUwQ,cAAc,uBAY7BtC,EAAa1H,aAAa7J,EAAUmE,aAE9BiO,KAbJf,EAAOhH,KAAK,CACV5H,KAAM,YACNqR,MAAO,CACLC,SAAU,iBACVC,mBAAoB,uBAU5B,IAEA7G,EAAY,KACVuE,EAAevN,OAAQ,YAjgBvBiJ,IAAAC,EA2NM,MA3NNC,GA2NM,CAzNJG,EA+GM,MA/GNF,GA+GM,CA9GJ0D,EAAA,KAAAA,EAAA,GAAAxD,EAA2D,MAAvDC,MAAM,0BAAyB,uBAAmB,IAEtDD,EA2GM,MA3GNwG,GA2GM,CAzGJnD,EAKEoD,EAAA,YAJS1C,EAAArN,2CAAAqN,EAAiBrN,MAAAgQ,GACzBxI,QAASiG,EACVxI,MAAM,SACNsE,MAAM,kDAKiB,WAAjB8D,EAAArN,WADRiQ,EAIEC,EAAA,kBAFS5C,EAAAtN,2CAAAsN,EAAetN,MAAAgQ,GACxBzG,MAAM,iEAIRD,EAyFM,OAzFDC,MAAM,kCAA8B,gBAAJhK,IAAIiO,IACvCb,EAuBSwD,EAAA,CAtBPC,QAAQ,YACPC,QAAKvD,EAAA,KAAAA,EAAA,GAAAkD,GAAEzC,EAAAvN,OAAkBuN,EAAAvN,OAC1B,aAAW,gBACX,gBAAc,OACb,gBAAeuN,EAAAvN,MAChB,cAAY,qCAEZ,IAaM,IAAA8M,EAAA,KAAAA,EAAA,IAbNxD,EAaM,OAZJC,MAAM,UACNlE,KAAK,OACL0H,OAAO,eACPC,QAAQ,YACR,cAAY,SAEZ1D,EAKE,QAJA,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb2D,EAAE,0EAEA,YAER,iCAGAN,EA6Da2D,EAAA,CA5DX,qBAAmB,mCACnB,mBAAiB,qBACjB,iBAAe,wBACf,qBAAmB,iCACnB,mBAAiB,wBACjB,iBAAe,iCAEf,IAoDM,CAnDE/C,EAAAvN,OADRiJ,IAAAC,EAoDM,MApDNM,GAoDM,CA9CJF,EAsBS,UArBPC,MAAM,oBACL8G,uBAAOjC,EAAY,QACpBmC,KAAK,WACL,aAAW,gBACX,cAAY,+BAEZjH,EAaM,OAZJC,MAAM,UACNlE,KAAK,OACL0H,OAAO,eACPC,QAAQ,YACR,cAAY,SAEZ1D,EAKE,QAJA,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb2D,EAAE,gIAEA,gBAER,OACA3D,EAsBS,UArBPC,MAAM,oBACL8G,uBAAOjC,EAAY,QACpBmC,KAAK,WACL,aAAW,gBACX,cAAY,+BAEZjH,EAaM,OAZJC,MAAM,UACNlE,KAAK,OACL0H,OAAO,eACPC,QAAQ,YACR,cAAY,SAEZ1D,EAKE,QAJA,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb2D,EAAE,sHAEA,gBAER,qCAQC3L,EAAAtB,OAAXiJ,IAAAC,EAOM,MAPN6B,GAOM,MANJ7B,EAKE2B,EAAA,KAAAC,EAJY,EAALxN,GADTgM,EAKE,OAHCzJ,IAAKvC,EACNiM,MAAM,4BACL,+BAA8BjM,0BAKnC2L,IAAAC,EA4FM,MA5FNkC,GA4FM,CA1FJuB,EAwCO6D,EAAA,CAxCDjH,MAAM,eAAe6G,QAAQ,aACtBK,SACT,IAAqD,IAAA3D,EAAA,KAAAA,EAAA,IAArDxD,EAAqD,MAAjDC,MAAM,uBAAsB,oBAAgB,iBAGlD,iBAuBM,OAvBND,EAuBM,MAvBN+B,GAuBM,CAtBJ/B,EAGM,MAHNgC,GAGM,CAFJwB,EAAA,MAAAA,EAAA,IAAAxD,EAA8C,QAAxCC,MAAM,gBAAe,gBAAY,IACvCD,EAAsE,OAAtEiC,GAAsElC,GAAxC,OAAAtJ,EAAAkB,EAAAjB,YAAA,EAAAD,EAAc2Q,cAAW,QAEzDpH,EAGM,MAHNmC,GAGM,CAFJqB,EAAA,MAAAA,EAAA,IAAAxD,EAA8C,QAAxCC,MAAM,gBAAe,gBAAY,IACvCD,EAAmF,OAAnF6C,GAAmF9C,EAArDgG,GAAY,OAAAhB,EAAApN,EAAAjB,YAAA,EAAAqO,EAAcsC,cAAW,SAErErH,EASM,MATN+C,GASM,CARJS,EAAA,MAAAA,EAAA,IAAAxD,EAA+C,QAAzCC,MAAM,gBAAe,iBAAa,IACxCD,EAMO,OANPgD,GAMOjD,GAJH,OAAAuH,IAAA5Q,YAAA,EAAA4Q,EAAcC,cAAiCxB,EAAYpO,EAAAjB,MAAa6Q,gCAM9EvH,EAGM,MAHNiD,GAGM,CAFJO,EAAA,MAAAA,EAAA,IAAAxD,EAAuC,QAAjCC,MAAM,gBAAe,SAAK,IAChCD,EAA6E,OAA7EmD,GAA6EpD,GAA/C,OAAAyH,EAAA7P,cAAA,EAAA6P,EAAcC,uBAAyB,IAAC,OAMlEnD,EAAA5N,WADRiQ,EAKEe,EAAA,OAHAhT,KAAK,MACJF,KAAM8P,EAAA5N,MACPW,MAAM,2CAERsI,IAAAC,EAEM,MAFNwD,GAEM,IAAAI,EAAA,MAAAA,EAAA,KADJxD,EAAgC,SAA7B,6BAAyB,iBAKhCqD,EAcO6D,EAAA,CAdDjH,MAAM,eAAe6G,QAAQ,aACtBK,SACT,IAAoD,IAAA3D,EAAA,MAAAA,EAAA,KAApDxD,EAAoD,MAAhDC,MAAM,uBAAsB,mBAAe,iBAGjD,IAKE,CAJMuE,EAAA9N,WADRiQ,EAKEe,EAAA,OAHAhT,KAAK,OACJF,KAAMgQ,EAAA9N,MACPW,MAAM,0CAERsI,IAAAC,EAEM,MAFN+H,GAEM,IAAAnE,EAAA,MAAAA,EAAA,KADJxD,EAAiC,SAA9B,8BAA0B,gBAKjCqD,EAYO6D,EAAA,CAZDjH,MAAM,eAAe6G,QAAQ,aACtBK,SACT,IAAkD,IAAA3D,EAAA,MAAAA,EAAA,KAAlDxD,EAAkD,MAA9CC,MAAM,uBAAsB,iBAAa,iBAI/C,IAKE,CALFoD,EAKEuE,GAAA,CAJC5M,WAAYnD,EAAAnB,MACZ,aAAYsB,EAAAtB,MACZ,YAAW,GACX,mBAAiB,+CAKtB2M,EAcO6D,EAAA,CAdDjH,MAAM,eAAe6G,QAAQ,aACtBK,SACT,IAAsD,IAAA3D,EAAA,MAAAA,EAAA,KAAtDxD,EAAsD,MAAlDC,MAAM,uBAAsB,qBAAiB,iBAGnD,IAKE,CAJMyE,EAAAhO,WADRiQ,EAKEe,EAAA,OAHAhT,KAAK,MACJF,KAAMkQ,EAAAhO,MACPW,MAAM,0CAERsI,IAAAC,EAEM,MAFNiI,GAEM,IAAArE,EAAA,MAAAA,EAAA,KADJxD,EAA0C,SAAvC,uCAAmC","names":["reportsService","getUsageReport","timeRange","__async","this","queryParams","start","startDate","end","endDate","apiService","get","params","getDownloadReport","getActivityReport","limit","getStorageReport","exportReport","reportId","format","axios","__vitePreload","default","__vite_default__","import","then","n","i","__VITE_PRELOAD__","token","localStorage","getItem","responseType","headers","Authorization","data","getAllReports","type","sort_by","page","page_size","saveReport","report","name","trim","length","Error","post","getReport","id","deleteReport","delete","DEFAULT_TIME_RANGE","useReportsStore","defineStore","authStore","useAuthStore","uiStore","useUIStore","reportRequestIds","ref","usage","downloads","activity","storage","startReportRequest","key","nextId","_a","value","__spreadValues","isLatestReportRequest","logReportError","context","error","message","formatApiError","code","extractErrorCode","addNotification","title","meta","reports","currentReport","savedReports","reportSummary","usageMetrics","downloadHistory","recentActivity","storageBreakdown","chartData","isLoading","chartsReady","computed","datasets","exportDisabled","timeRangeDisplay","Date","formatDate","now","weekAgo","setDate","getDate","formatMonth","formatQuarter","date","toLocaleDateString","month","day","year","Math","floor","getMonth","getFullYear","calculateTimeRange","range","setHours","quarter","setMonth","toISOString","fetchUsageReport","requestId","targetRange","metrics","assetsByType","category","size","count","images","percentage","videos","documents","audio","other","generateStorageChartData","err","fetchDownloadReport","generateDownloadChartData","fetchActivityReport","activities","fetchStorageReport","breakdown","labels","map","item","backgroundColors","borderColors","slice","c","replace","label","backgroundColor","borderColor","m","fill","uniqueUsers","watch","newRange","deep","setTimeRange","generateChartData","reportType","created_at","updated_at","created_by","user","savedReport","push","fetchSavedReports","saved","setCurrentReport","clearError","reset","persist","paths","props","__props","chartCanvasRef","chartContainerRef","chartError","chartInstance","loadChart","chartModule","Chart","createChart","destroy","ctx","getContext","chartOptions","options","responsive","maintainAspectRatio","plugins","legend","position","padding","usePointStyle","tooltip","enabled","titleFont","weight","bodyFont","scales","x","grid","display","color","ticks","font","y","beginAtZero","nextTick","onMounted","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","_createElementVNode","class","_hoisted_4","currentPage","paginatedActivities","showPagination","pageSize","totalPages","ceil","handlePageChange","tableWrapper","document","querySelector","scrollIntoView","behavior","block","formatTimestamp","timestamp","diffMs","getTime","diffMins","diffHours","diffDays","_Fragment","_renderList","_hoisted_5","_hoisted_6","scope","username","asset_id","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","email","_hoisted_11","_normalizeClass","action","upload","download","view","share","edit","comment","tag","_hoisted_12","asset_name","_hoisted_13","_hoisted_14","_hoisted_15","datetime","_hoisted_16","_hoisted_17","_createVNode","Pagination","onPageChange","_cache","stroke","viewBox","d","router","useRouter","reportsStore","selectedTimeRange","customDateRange","showExportMenu","exportMenuRef","timeRangeOptions","onClickOutside","today","storageChartData","s","downloadChartData","tension","storageBarChartData","fetchReports","Promise","all","handleExport","_b","blob","url","window","URL","createObjectURL","link","createElement","href","split","body","appendChild","click","removeChild","revokeObjectURL","toUpperCase","formatBytes","bytes","log","round","pow","hasPermission","query","returnTo","requiredPermission","_hoisted_3","Select","$event","_createBlock","DateRangePicker","Button","variant","onClick","_Transition","role","Card","header","totalAssets","storageUsed","_c","storageLimit","_d","storagePercentage","ChartComponent","_hoisted_18","ActivityTable","_hoisted_19"],"ignoreList":[],"sources":["../../src/services/reportsService.ts","../../src/stores/reportsStore.ts","../../src/components/reports/ChartComponent.vue","../../src/components/reports/ActivityTable.vue","../../src/pages/admin/AdminReportsPage.vue"],"sourcesContent":["import { apiService } from './apiService'\nimport type {\n  Report,\n  ReportTimeRange,\n  UsageMetrics,\n  DownloadMetric,\n  UserActivity,\n  StorageBreakdown,\n  ExportFormat,\n  GetReportsParams\n} from '@/types/reports'\n\n/**\n * Reports Service\n * \n * Service class for reports and analytics-related API operations.\n * Handles fetching metrics, generating charts, and exporting reports.\n */\nclass ReportsService {\n  /**\n   * Get usage report with overall metrics\n   */\n  async getUsageReport(timeRange: ReportTimeRange): Promise<UsageMetrics> {\n    const queryParams: Record<string, string> = {\n      start: timeRange.startDate,\n      end: timeRange.endDate\n    }\n\n    return apiService.get<UsageMetrics>(\n      '/v4/reports/usage/',\n      { params: queryParams },\n      true // Cache usage reports for 5 minutes\n    )\n  }\n\n  /**\n   * Get download report with time-series data\n   */\n  async getDownloadReport(\n    timeRange: ReportTimeRange\n  ): Promise<DownloadMetric[]> {\n    const queryParams: Record<string, string> = {\n      start: timeRange.startDate,\n      end: timeRange.endDate\n    }\n\n    return apiService.get<DownloadMetric[]>(\n      '/v4/reports/downloads/',\n      { params: queryParams },\n      true // Cache download reports for 5 minutes\n    )\n  }\n\n  /**\n   * Get activity report with user actions\n   */\n  async getActivityReport(\n    timeRange: ReportTimeRange,\n    limit?: number\n  ): Promise<UserActivity[]> {\n    const queryParams: Record<string, string | number> = {\n      start: timeRange.startDate,\n      end: timeRange.endDate\n    }\n\n    if (limit) {\n      queryParams.limit = limit\n    }\n\n    return apiService.get<UserActivity[]>(\n      '/v4/reports/activity/',\n      { params: queryParams },\n      false // Don't cache activity reports (real-time data)\n    )\n  }\n\n  /**\n   * Get storage report with breakdown by category\n   */\n  async getStorageReport(\n    timeRange: ReportTimeRange\n  ): Promise<StorageBreakdown[]> {\n    const queryParams: Record<string, string> = {\n      start: timeRange.startDate,\n      end: timeRange.endDate\n    }\n\n    return apiService.get<StorageBreakdown[]>(\n      '/v4/reports/storage/',\n      { params: queryParams },\n      true // Cache storage reports for 5 minutes\n    )\n  }\n\n  /**\n   * Export report as CSV or PDF\n   */\n  async exportReport(reportId: number, format: ExportFormat): Promise<Blob> {\n    // Use axios directly for blob responses\n    const axios = (await import('axios')).default\n    const token = localStorage.getItem('auth_token')\n    const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:8000/api'\n\n    const response = await axios.get<Blob>(\n      `${API_BASE_URL}/v4/reports/${reportId}/export/`,\n      {\n        params: { format },\n        responseType: 'blob',\n        headers: {\n          Authorization: token ? `Bearer ${token}` : ''\n        }\n      }\n    )\n\n    return response.data\n  }\n\n  /**\n   * Get all reports (saved or generated)\n   */\n  async getAllReports(params?: GetReportsParams): Promise<Report[]> {\n    const queryParams: Record<string, string | number> = {}\n\n    if (params?.type) {\n      queryParams.type = params.type\n    }\n    if (params?.timeRange) {\n      queryParams.start = params.timeRange.startDate\n      queryParams.end = params.timeRange.endDate\n    }\n    if (params?.sort_by) {\n      queryParams.sort_by = params.sort_by\n    }\n    if (params?.page) {\n      queryParams.page = params.page\n    }\n    if (params?.page_size) {\n      queryParams.page_size = params.page_size\n    }\n\n    return apiService.get<Report[]>(\n      '/v4/reports/',\n      { params: queryParams },\n      true // Cache reports list for 5 minutes\n    )\n  }\n\n  /**\n   * Save a report for later use\n   */\n  async saveReport(report: Report): Promise<Report> {\n    // Validate report\n    if (!report.name || report.name.trim().length === 0) {\n      throw new Error('Report name is required')\n    }\n    if (report.name.length > 255) {\n      throw new Error('Report name must be 255 characters or less')\n    }\n\n    return apiService.post<Report>('/v4/reports/', report)\n  }\n\n  /**\n   * Get report by ID\n   */\n  async getReport(id: number): Promise<Report> {\n    return apiService.get<Report>(`/v4/reports/${id}/`, undefined, true)\n  }\n\n  /**\n   * Delete saved report\n   */\n  async deleteReport(id: number): Promise<void> {\n    return apiService.delete<void>(`/v4/reports/${id}/`)\n  }\n}\n\nexport const reportsService = new ReportsService()\n\n","import { defineStore } from 'pinia'\nimport { ref, computed, watch } from 'vue'\nimport { reportsService } from '@/services/reportsService'\nimport { formatApiError } from '@/utils/errors'\nimport { extractErrorCode } from '@/utils/errorHandling'\nimport { useAuthStore } from './authStore'\nimport { useUIStore } from './uiStore'\nimport type {\n  Report,\n  ReportTimeRange,\n  UsageMetrics,\n  DownloadMetric,\n  UserActivity,\n  StorageBreakdown,\n  ChartData,\n  ExportFormat,\n  SavedReport,\n  ReportSummary\n} from '@/types/reports'\n\nconst DEFAULT_TIME_RANGE: ReportTimeRange = {\n  type: 'month',\n  startDate: '',\n  endDate: ''\n}\n\nexport const useReportsStore = defineStore(\n  'reports',\n  () => {\n    const authStore = useAuthStore()\n    const uiStore = useUIStore()\n\n    const reportRequestIds = ref({\n      usage: 0,\n      downloads: 0,\n      activity: 0,\n      storage: 0\n    })\n\n    const startReportRequest = (\n      key: keyof typeof reportRequestIds.value\n    ): number => {\n      const nextId = (reportRequestIds.value[key] ?? 0) + 1\n      reportRequestIds.value = {\n        ...reportRequestIds.value,\n        [key]: nextId\n      }\n      return nextId\n    }\n\n    const isLatestReportRequest = (\n      key: keyof typeof reportRequestIds.value,\n      id: number\n    ): boolean => reportRequestIds.value[key] === id\n\n    const logReportError = (context: string, error: unknown): string => {\n      const message = formatApiError(error)\n      const code = extractErrorCode(error)\n      console.warn(`${context} failed`, { code, error })\n      uiStore.addNotification({\n        type: 'error',\n        title: `${context} Error`,\n        message,\n        meta: code ? { code } : undefined\n      })\n      return message\n    }\n\n    // Reports state\n    const reports = ref<Report[]>([])\n    const currentReport = ref<Report | null>(null)\n    const savedReports = ref<SavedReport[]>([])\n    const reportSummary = ref<ReportSummary | null>(null)\n\n    // Time range state\n    const timeRange = ref<ReportTimeRange>({ ...DEFAULT_TIME_RANGE })\n\n    // Metrics state\n    const usageMetrics = ref<UsageMetrics | null>(null)\n    const downloadHistory = ref<DownloadMetric[]>([])\n    const recentActivity = ref<UserActivity[]>([])\n    const storageBreakdown = ref<StorageBreakdown[]>([])\n\n    // Chart data state\n    const chartData = ref<ChartData | null>(null)\n\n    // Global state\n    const isLoading = ref(false)\n    const error = ref<string | null>(null)\n\n    // Computed properties\n    const chartsReady = computed(() => {\n      return chartData.value !== null && chartData.value.datasets.length > 0\n    })\n\n    const exportDisabled = computed(() => {\n      return currentReport.value === null\n    })\n\n    const timeRangeDisplay = computed(() => {\n      if (timeRange.value.type === 'custom') {\n        if (timeRange.value.startDate && timeRange.value.endDate) {\n          const start = new Date(timeRange.value.startDate)\n          const end = new Date(timeRange.value.endDate)\n          return `${formatDate(start)} - ${formatDate(end)}`\n        }\n        return 'Custom range'\n      }\n\n      const now = new Date()\n      switch (timeRange.value.type) {\n        case 'today':\n          return formatDate(now)\n        case 'week':\n          const weekAgo = new Date(now)\n          weekAgo.setDate(now.getDate() - 7)\n          return `${formatDate(weekAgo)} - ${formatDate(now)}`\n        case 'month':\n          return formatMonth(now)\n        case 'quarter':\n          return formatQuarter(now)\n        default:\n          return 'Select range'\n      }\n    })\n\n    // Helper functions\n    const formatDate = (date: Date): string => {\n      return date.toLocaleDateString('en-US', {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      })\n    }\n\n    const formatMonth = (date: Date): string => {\n      return date.toLocaleDateString('en-US', {\n        month: 'long',\n        year: 'numeric'\n      })\n    }\n\n    const formatQuarter = (date: Date): string => {\n      const quarter = Math.floor(date.getMonth() / 3) + 1\n      return `Q${quarter} ${date.getFullYear()}`\n    }\n\n    const calculateTimeRange = (range: ReportTimeRange): { start: string; end: string } => {\n      const now = new Date()\n      let start: Date\n      let end: Date = new Date(now)\n\n      switch (range.type) {\n        case 'today':\n          start = new Date(now)\n          start.setHours(0, 0, 0, 0)\n          end.setHours(23, 59, 59, 999)\n          break\n        case 'week':\n          start = new Date(now)\n          start.setDate(now.getDate() - 7)\n          start.setHours(0, 0, 0, 0)\n          break\n        case 'month':\n          start = new Date(now.getFullYear(), now.getMonth(), 1)\n          start.setHours(0, 0, 0, 0)\n          end = new Date(now.getFullYear(), now.getMonth() + 1, 0)\n          end.setHours(23, 59, 59, 999)\n          break\n        case 'quarter':\n          const quarter = Math.floor(now.getMonth() / 3)\n          start = new Date(now.getFullYear(), quarter * 3, 1)\n          start.setHours(0, 0, 0, 0)\n          end = new Date(now.getFullYear(), (quarter + 1) * 3, 0)\n          end.setHours(23, 59, 59, 999)\n          break\n        case 'custom':\n          start = new Date(range.startDate)\n          end = new Date(range.endDate)\n          break\n        default:\n          start = new Date(now)\n          start.setMonth(now.getMonth() - 1)\n      }\n\n      return {\n        start: start.toISOString(),\n        end: end.toISOString()\n      }\n    }\n\n    // Actions - Fetch reports\n    async function fetchUsageReport(range?: ReportTimeRange): Promise<void> {\n      const key: keyof typeof reportRequestIds.value = 'usage'\n      const requestId = startReportRequest(key)\n      isLoading.value = true\n      error.value = null\n\n      try {\n        const targetRange = range || timeRange.value\n        const { start, end } = calculateTimeRange(targetRange)\n\n        const metrics = await reportsService.getUsageReport({\n          type: targetRange.type,\n          startDate: start,\n          endDate: end\n        })\n\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n\n        usageMetrics.value = metrics\n\n        if (metrics.assetsByType) {\n          storageBreakdown.value = [\n            {\n              category: 'images',\n              size: 0,\n              count: metrics.assetsByType.images,\n              percentage: 0\n            },\n            {\n              category: 'videos',\n              size: 0,\n              count: metrics.assetsByType.videos,\n              percentage: 0\n            },\n            {\n              category: 'documents',\n              size: 0,\n              count: metrics.assetsByType.documents,\n              percentage: 0\n            },\n            {\n              category: 'audio',\n              size: 0,\n              count: metrics.assetsByType.audio,\n              percentage: 0\n            },\n            {\n              category: 'other',\n              size: 0,\n              count: metrics.assetsByType.other,\n              percentage: 0\n            }\n          ]\n        }\n\n        chartData.value = generateStorageChartData(storageBreakdown.value)\n      } catch (err) {\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n        const message = logReportError('Usage report fetch', err)\n        error.value = message\n        usageMetrics.value = null\n        storageBreakdown.value = []\n        chartData.value = null\n        throw err\n      } finally {\n        if (isLatestReportRequest(key, requestId)) {\n          isLoading.value = false\n        }\n      }\n    }\n\n    async function fetchDownloadReport(range?: ReportTimeRange): Promise<void> {\n      const key: keyof typeof reportRequestIds.value = 'downloads'\n      const requestId = startReportRequest(key)\n      isLoading.value = true\n      error.value = null\n\n      try {\n        const targetRange = range || timeRange.value\n        const { start, end } = calculateTimeRange(targetRange)\n\n        const metrics = await reportsService.getDownloadReport({\n          type: targetRange.type,\n          startDate: start,\n          endDate: end\n        })\n\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n\n        downloadHistory.value = metrics\n        chartData.value = generateDownloadChartData(metrics)\n      } catch (err) {\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n        const message = logReportError('Download report fetch', err)\n        error.value = message\n        downloadHistory.value = []\n        chartData.value = null\n        throw err\n      } finally {\n        if (isLatestReportRequest(key, requestId)) {\n          isLoading.value = false\n        }\n      }\n    }\n\n    async function fetchActivityReport(\n      range?: ReportTimeRange,\n      limit: number = 50\n    ): Promise<void> {\n      const key: keyof typeof reportRequestIds.value = 'activity'\n      const requestId = startReportRequest(key)\n      isLoading.value = true\n      error.value = null\n\n      try {\n        const targetRange = range || timeRange.value\n        const { start, end } = calculateTimeRange(targetRange)\n\n        const activities = await reportsService.getActivityReport(\n          {\n            type: targetRange.type,\n            startDate: start,\n            endDate: end\n          },\n          limit\n        )\n\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n\n        recentActivity.value = activities\n      } catch (err) {\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n        const message = logReportError('Activity report fetch', err)\n        error.value = message\n        recentActivity.value = []\n        throw err\n      } finally {\n        if (isLatestReportRequest(key, requestId)) {\n          isLoading.value = false\n        }\n      }\n    }\n\n    async function fetchStorageReport(range?: ReportTimeRange): Promise<void> {\n      const key: keyof typeof reportRequestIds.value = 'storage'\n      const requestId = startReportRequest(key)\n      isLoading.value = true\n      error.value = null\n\n      try {\n        const targetRange = range || timeRange.value\n        const { start, end } = calculateTimeRange(targetRange)\n\n        const breakdown = await reportsService.getStorageReport({\n          type: targetRange.type,\n          startDate: start,\n          endDate: end\n        })\n\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n\n        storageBreakdown.value = breakdown\n        chartData.value = generateStorageChartData(breakdown)\n      } catch (err) {\n        if (!isLatestReportRequest(key, requestId)) {\n          return\n        }\n        const message = logReportError('Storage report fetch', err)\n        error.value = message\n        storageBreakdown.value = []\n        chartData.value = null\n        throw err\n      } finally {\n        if (isLatestReportRequest(key, requestId)) {\n          isLoading.value = false\n        }\n      }\n    }\n\n    // Actions - Time range\n    function setTimeRange(range: ReportTimeRange): void {\n      timeRange.value = { ...range }\n    }\n\n    // Watch time range changes and auto-refetch\n    watch(\n      () => timeRange.value,\n      async (newRange) => {\n        if (currentReport.value) {\n          // Auto-refetch current report with new time range\n          switch (currentReport.value.type) {\n            case 'usage':\n              await fetchUsageReport(newRange)\n              break\n            case 'downloads':\n              await fetchDownloadReport(newRange)\n              break\n            case 'activity':\n              await fetchActivityReport(newRange)\n              break\n            case 'storage':\n              await fetchStorageReport(newRange)\n              break\n          }\n        }\n      },\n      { deep: true }\n    )\n\n    // Actions - Chart data generation\n    function generateChartData(\n      reportType: string,\n      metrics: UsageMetrics | DownloadMetric[] | StorageBreakdown[]\n    ): ChartData {\n      switch (reportType) {\n        case 'usage':\n        case 'storage':\n          return generateStorageChartData(metrics as StorageBreakdown[])\n        case 'downloads':\n          return generateDownloadChartData(metrics as DownloadMetric[])\n        default:\n          return { labels: [], datasets: [] }\n      }\n    }\n\n    function generateStorageChartData(breakdown: StorageBreakdown[]): ChartData {\n      const labels: string[] = breakdown.map((item) => item.category)\n      const data = breakdown.map((item) => item.size)\n      const backgroundColors: string[] = [\n        'rgba(59, 130, 246, 0.8)', // blue - images\n        'rgba(239, 68, 68, 0.8)', // red - videos\n        'rgba(16, 185, 129, 0.8)', // green - documents\n        'rgba(245, 158, 11, 0.8)', // yellow - audio\n        'rgba(139, 92, 246, 0.8)' // purple - other\n      ]\n\n      const borderColors: string[] = backgroundColors.slice(0, labels.length).map((c) =>\n        c.replace('0.8', '1')\n      )\n\n      return {\n        labels,\n        datasets: [\n          {\n            label: 'Storage by Category',\n            data,\n            backgroundColor: backgroundColors.slice(0, labels.length) as any,\n            borderColor: borderColors as any\n          }\n        ]\n      }\n    }\n\n    function generateDownloadChartData(metrics: DownloadMetric[]): ChartData {\n      const labels: string[] = metrics.map((m) => {\n        const date = new Date(m.date)\n        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n      })\n      const downloads = metrics.map((m) => m.downloads)\n      const uniqueUsers = metrics.map((m) => m.uniqueUsers)\n\n      return {\n        labels,\n        datasets: [\n          {\n            label: 'Downloads',\n            data: downloads,\n            borderColor: 'rgba(59, 130, 246, 1)',\n            backgroundColor: 'rgba(59, 130, 246, 0.1)',\n            fill: true\n          },\n          {\n            label: 'Unique Users',\n            data: uniqueUsers,\n            borderColor: 'rgba(16, 185, 129, 1)',\n            backgroundColor: 'rgba(16, 185, 129, 0.1)',\n            fill: true\n          }\n        ]\n      }\n    }\n\n    // Actions - Export\n    async function exportReport(format: ExportFormat): Promise<Blob> {\n      if (!currentReport.value) {\n        throw new Error('No report selected for export')\n      }\n\n      isLoading.value = true\n      error.value = null\n\n      try {\n        const blob = await reportsService.exportReport(\n          currentReport.value.id,\n          format\n        )\n        return blob\n      } catch (err) {\n        error.value = formatApiError(err)\n        throw err\n      } finally {\n        isLoading.value = false\n      }\n    }\n\n    // Actions - Save report\n    async function saveReport(name: string, type: string): Promise<Report> {\n      isLoading.value = true\n      error.value = null\n\n      try {\n        // Build report from current state\n        let metrics: UsageMetrics | DownloadMetric[] | UserActivity[] | StorageBreakdown[]\n        \n        switch (type) {\n          case 'usage':\n            if (!usageMetrics.value) {\n              throw new Error('No usage metrics to save. Please fetch usage report first.')\n            }\n            metrics = usageMetrics.value\n            break\n          case 'downloads':\n            if (downloadHistory.value.length === 0) {\n              throw new Error('No download data to save. Please fetch download report first.')\n            }\n            metrics = downloadHistory.value\n            break\n          case 'activity':\n            if (recentActivity.value.length === 0) {\n              throw new Error('No activity data to save. Please fetch activity report first.')\n            }\n            metrics = recentActivity.value\n            break\n          case 'storage':\n            if (storageBreakdown.value.length === 0) {\n              throw new Error('No storage data to save. Please fetch storage report first.')\n            }\n            metrics = storageBreakdown.value\n            break\n          default:\n            throw new Error(`Invalid report type: ${type}`)\n        }\n\n        const report: Report = {\n          id: 0, // Will be assigned by backend\n          name,\n          type: type as Report['type'],\n          timeRange: timeRange.value,\n          metrics,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          created_by: authStore.user?.id || 0\n        }\n\n        const savedReport = await reportsService.saveReport(report)\n        savedReports.value.push(savedReport as SavedReport)\n        return savedReport\n      } catch (err) {\n        error.value = formatApiError(err)\n        throw err\n      } finally {\n        isLoading.value = false\n      }\n    }\n\n    // Actions - Fetch saved reports\n    async function fetchSavedReports(): Promise<void> {\n      isLoading.value = true\n      error.value = null\n\n      try {\n        const saved = await reportsService.getAllReports({ type: 'usage' }) // Filter saved reports\n        savedReports.value = saved as SavedReport[]\n      } catch (err) {\n        error.value = formatApiError(err)\n        savedReports.value = []\n        throw err\n      } finally {\n        isLoading.value = false\n      }\n    }\n\n    // Actions - Current report\n    function setCurrentReport(report: Report | null): void {\n      currentReport.value = report\n      if (report) {\n        timeRange.value = report.timeRange\n      }\n    }\n\n    // Actions - Utility\n    function clearError(): void {\n      error.value = null\n    }\n\n    function reset(): void {\n      reports.value = []\n      currentReport.value = null\n      savedReports.value = []\n      reportSummary.value = null\n      timeRange.value = { ...DEFAULT_TIME_RANGE }\n      usageMetrics.value = null\n      downloadHistory.value = []\n      recentActivity.value = []\n      storageBreakdown.value = []\n      chartData.value = null\n      error.value = null\n    }\n\n    return {\n      // State - Reports\n      reports,\n      currentReport,\n      savedReports,\n      reportSummary,\n\n      // State - Time range\n      timeRange,\n\n      // State - Metrics\n      usageMetrics,\n      downloadHistory,\n      recentActivity,\n      storageBreakdown,\n\n      // State - Charts\n      chartData,\n\n      // Global state\n      isLoading,\n      error,\n\n      // Computed\n      chartsReady,\n      exportDisabled,\n      timeRangeDisplay,\n\n      // Actions - Fetch reports\n      fetchUsageReport,\n      fetchDownloadReport,\n      fetchActivityReport,\n      fetchStorageReport,\n\n      // Actions - Time range\n      setTimeRange,\n\n      // Actions - Chart generation\n      generateChartData,\n      generateStorageChartData,\n      generateDownloadChartData,\n\n      // Actions - Export\n      exportReport,\n\n      // Actions - Save\n      saveReport,\n      fetchSavedReports,\n\n      // Actions - Current report\n      setCurrentReport,\n\n      // Actions - Utility\n      clearError,\n      reset\n    }\n  },\n  {\n    persist: {\n      paths: ['timeRange'] // Only persist time range preference\n    }\n  }\n)\n\n","<template>\n  <div class=\"chart-component\">\n    <h3 v-if=\"title\" class=\"chart-component__title\">{{ title }}</h3>\n    <div class=\"chart-component__container\" ref=\"chartContainerRef\">\n      <canvas ref=\"chartCanvasRef\" :aria-label=\"title || 'Chart'\" />\n    </div>\n    <div v-if=\"chartError\" class=\"chart-component__error\" role=\"alert\">\n      <p>{{ chartError }}</p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, onUnmounted, watch, nextTick } from 'vue'\nimport type { ChartData } from '@/types/reports'\n\ninterface Props {\n  type: 'pie' | 'line' | 'bar'\n  data: ChartData\n  title?: string\n}\n\nconst props = defineProps<Props>()\n\nconst chartCanvasRef = ref<HTMLCanvasElement | null>(null)\nconst chartContainerRef = ref<HTMLDivElement | null>(null)\nconst chartError = ref<string | null>(null)\nlet chartInstance: import('chart.js').Chart | null = null\n\n// Dynamic import of Chart.js\nconst loadChart = async (): Promise<any> => {\n  try {\n    // Try to import Chart.js\n    const chartModule = await import('chart.js/auto')\n    return chartModule.default || chartModule.Chart\n  } catch (error) {\n    console.warn('Chart.js not found. Please install: npm install chart.js', error)\n    chartError.value =\n      'Chart.js library is not installed. Please install it: npm install chart.js'\n    return null\n  }\n}\n\nconst createChart = async (): Promise<void> => {\n  if (!chartCanvasRef.value || !props.data) return\n\n  // Clear existing chart\n  if (chartInstance) {\n    chartInstance.destroy()\n    chartInstance = null\n  }\n\n  const Chart = await loadChart()\n  if (!Chart) return\n\n  try {\n    const ctx = chartCanvasRef.value.getContext('2d')\n    if (!ctx) return\n\n    const chartOptions: any = {\n      type: props.type,\n      data: props.data,\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: 'bottom',\n            labels: {\n              padding: 12,\n              usePointStyle: true\n            }\n          },\n          tooltip: {\n            enabled: true,\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            padding: 12,\n            titleFont: {\n              size: 14,\n              weight: 'bold'\n            },\n            bodyFont: {\n              size: 13\n            }\n          }\n        },\n        scales:\n          props.type !== 'pie'\n            ? {\n                x: {\n                  grid: {\n                    display: true,\n                    color: 'rgba(0, 0, 0, 0.05)'\n                  },\n                  ticks: {\n                    font: {\n                      size: 12\n                    }\n                  }\n                },\n                y: {\n                  beginAtZero: true,\n                  grid: {\n                    display: true,\n                    color: 'rgba(0, 0, 0, 0.05)'\n                  },\n                  ticks: {\n                    font: {\n                      size: 12\n                    }\n                  }\n                }\n              }\n            : undefined\n      }\n    }\n\n    chartInstance = new Chart(ctx, chartOptions)\n    chartError.value = null\n  } catch (error) {\n    console.error('Error creating chart:', error)\n    chartError.value = 'Failed to render chart. Please check the console for details.'\n  }\n}\n\n// Watch for data changes\nwatch(\n  () => props.data,\n  async () => {\n    await nextTick()\n    await createChart()\n  },\n  { deep: true }\n)\n\n// Lifecycle\nonMounted(async () => {\n  await nextTick()\n  await createChart()\n})\n\nonUnmounted(() => {\n  if (chartInstance) {\n    chartInstance.destroy()\n    chartInstance = null\n  }\n})\n</script>\n\n<style scoped lang=\"css\">\n.chart-component {\n  position: relative;\n  width: 100%;\n}\n\n.chart-component__title {\n  margin: 0 0 16px 0;\n  font-size: var(--font-size-lg, 18px);\n  font-weight: 600;\n  color: var(--color-text, #111827);\n}\n\n.chart-component__container {\n  position: relative;\n  height: 300px;\n  width: 100%;\n}\n\n.chart-component__container canvas {\n  max-width: 100%;\n  height: 100% !important;\n}\n\n.chart-component__error {\n  padding: 16px;\n  background: var(--color-error, #fee2e2);\n  border: 1px solid var(--color-error-border, #fecaca);\n  border-radius: var(--radius-base, 8px);\n  color: var(--color-error-text, #991b1b);\n  font-size: var(--font-size-sm, 12px);\n  text-align: center;\n}\n\n.chart-component__error p {\n  margin: 0;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .chart-component__container {\n    height: 250px;\n  }\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n  .chart-component__container {\n    animation: none;\n  }\n}\n</style>\n\n","<template>\n  <div class=\"activity-table\">\n    <!-- Loading State -->\n    <div v-if=\"isLoading\" class=\"activity-table__loading\" role=\"status\" aria-live=\"polite\">\n      <div\n        v-for=\"i in 5\"\n        :key=\"i\"\n        class=\"activity-table__skeleton-row\"\n        :aria-label=\"`Loading activity row ${i}`\"\n      />\n    </div>\n\n    <!-- Empty State -->\n    <div\n      v-else-if=\"!isLoading && activities.length === 0\"\n      class=\"activity-table__empty\"\n      role=\"status\"\n      aria-live=\"polite\"\n    >\n      <svg\n        class=\"w-12 h-12 text-neutral-400\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        viewBox=\"0 0 24 24\"\n        aria-hidden=\"true\"\n      >\n        <path\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          stroke-width=\"2\"\n          d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n        />\n      </svg>\n      <p class=\"activity-table__empty-text\">No activity data available</p>\n    </div>\n\n    <!-- Activity Table -->\n    <div v-else class=\"activity-table__wrapper\">\n      <table class=\"activity-table__table\" role=\"table\" aria-label=\"User activity log\">\n        <thead>\n          <tr>\n            <th class=\"activity-table__header\" scope=\"col\">User</th>\n            <th class=\"activity-table__header\" scope=\"col\">Action</th>\n            <th class=\"activity-table__header\" scope=\"col\">Asset</th>\n            <th class=\"activity-table__header\" scope=\"col\">Time</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            v-for=\"activity in paginatedActivities\"\n            :key=\"`${activity.timestamp}-${activity.username}-${activity.asset_id || 'none'}`\"\n            class=\"activity-table__row\"\n          >\n            <td class=\"activity-table__cell\">\n              <div class=\"activity-table__user\">\n                <span class=\"activity-table__username\">{{ activity.username }}</span>\n                <span class=\"activity-table__email\">{{ activity.email }}</span>\n              </div>\n            </td>\n            <td class=\"activity-table__cell\">\n              <span\n                :class=\"['activity-table__badge', `activity-table__badge--${activity.action}`]\"\n              >\n                {{ formatAction(activity.action) }}\n              </span>\n            </td>\n            <td class=\"activity-table__cell\">\n              <span v-if=\"activity.asset_name\" class=\"activity-table__asset\">\n                {{ activity.asset_name }}\n              </span>\n              <span v-else class=\"activity-table__asset--empty\"></span>\n            </td>\n            <td class=\"activity-table__cell\">\n              <time :datetime=\"activity.timestamp\" class=\"activity-table__time\">\n                {{ formatTimestamp(activity.timestamp) }}\n              </time>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <!-- Pagination -->\n      <div\n        v-if=\"showPagination && totalPages > 1\"\n        class=\"activity-table__pagination\"\n        role=\"navigation\"\n        aria-label=\"Activity table pagination\"\n      >\n        <Pagination\n          :current-page=\"currentPage\"\n          :total-items=\"activities.length\"\n          :page-size=\"pageSize\"\n          @page-change=\"handlePageChange\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport type { UserActivity } from '@/types/reports'\nimport Pagination from '@/components/Common/Pagination.vue'\n\ninterface Props {\n  activities: UserActivity[]\n  isLoading?: boolean\n  pageSize?: number\n  showPagination?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  isLoading: false,\n  pageSize: 10,\n  showPagination: true\n})\n\nconst currentPage = ref(1)\n\nconst paginatedActivities = computed(() => {\n  if (!props.showPagination || props.activities.length <= props.pageSize) {\n    return props.activities\n  }\n  const start = (currentPage.value - 1) * props.pageSize\n  const end = start + props.pageSize\n  return props.activities.slice(start, end)\n})\n\nconst totalPages = computed(() => {\n  if (!props.showPagination) return 1\n  return Math.ceil(props.activities.length / props.pageSize)\n})\n\nconst handlePageChange = (page: number): void => {\n  currentPage.value = page\n  // Scroll to top of table\n  const tableWrapper = document.querySelector('.activity-table__wrapper')\n  if (tableWrapper) {\n    tableWrapper.scrollIntoView({ behavior: 'smooth', block: 'start' })\n  }\n}\n\nconst formatAction = (action: UserActivity['action']): string => {\n  const actionLabels: Record<UserActivity['action'], string> = {\n    upload: 'Upload',\n    download: 'Download',\n    view: 'View',\n    delete: 'Delete',\n    share: 'Share',\n    edit: 'Edit',\n    comment: 'Comment',\n    tag: 'Tag'\n  }\n  return actionLabels[action] || action\n}\n\nconst formatTimestamp = (timestamp: string): string => {\n  const date = new Date(timestamp)\n  const now = new Date()\n  const diffMs = now.getTime() - date.getTime()\n  const diffMins = Math.floor(diffMs / 60000)\n  const diffHours = Math.floor(diffMs / 3600000)\n  const diffDays = Math.floor(diffMs / 86400000)\n\n  if (diffMins < 1) {\n    return 'Just now'\n  } else if (diffMins < 60) {\n    return `${diffMins}m ago`\n  } else if (diffHours < 24) {\n    return `${diffHours}h ago`\n  } else if (diffDays < 7) {\n    return `${diffDays}d ago`\n  } else {\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\n    })\n  }\n}\n</script>\n\n<style scoped lang=\"css\">\n.activity-table {\n  width: 100%;\n}\n\n.activity-table__loading {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.activity-table__skeleton-row {\n  height: 56px;\n  background: var(--color-bg-1, #f9fafb);\n  border-radius: var(--radius-base, 8px);\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n@keyframes pulse {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.activity-table__empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 48px 24px;\n  color: var(--color-text-secondary, #6b7280);\n  gap: 12px;\n}\n\n.activity-table__empty-text {\n  margin: 0;\n  font-size: var(--font-size-base, 14px);\n}\n\n.activity-table__wrapper {\n  overflow-x: auto;\n  border-radius: var(--radius-base, 8px);\n  border: 1px solid var(--color-border, #e5e7eb);\n}\n\n.activity-table__table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: var(--font-size-sm, 12px);\n}\n\n.activity-table__header {\n  padding: 12px 16px;\n  text-align: left;\n  font-weight: 600;\n  color: var(--color-text, #111827);\n  background: var(--color-bg-1, #f9fafb);\n  border-bottom: 2px solid var(--color-border, #e5e7eb);\n  white-space: nowrap;\n}\n\n.activity-table__row {\n  border-bottom: 1px solid var(--color-border, #e5e7eb);\n  transition: background-color 150ms ease;\n}\n\n.activity-table__row:hover {\n  background: var(--color-bg-1, #f9fafb);\n}\n\n.activity-table__row:last-child {\n  border-bottom: none;\n}\n\n.activity-table__cell {\n  padding: 12px 16px;\n  color: var(--color-text, #111827);\n  vertical-align: middle;\n}\n\n.activity-table__user {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.activity-table__username {\n  font-weight: 500;\n  color: var(--color-text, #111827);\n}\n\n.activity-table__email {\n  font-size: var(--font-size-xs, 11px);\n  color: var(--color-text-secondary, #6b7280);\n}\n\n.activity-table__badge {\n  display: inline-block;\n  padding: 4px 8px;\n  border-radius: var(--radius-sm, 4px);\n  font-size: var(--font-size-xs, 11px);\n  font-weight: 500;\n  text-transform: capitalize;\n}\n\n.activity-table__badge--upload {\n  background: rgba(16, 185, 129, 0.1);\n  color: rgb(16, 185, 129);\n}\n\n.activity-table__badge--download {\n  background: rgba(59, 130, 246, 0.1);\n  color: rgb(59, 130, 246);\n}\n\n.activity-table__badge--view {\n  background: rgba(139, 92, 246, 0.1);\n  color: rgb(139, 92, 246);\n}\n\n.activity-table__badge--delete {\n  background: rgba(239, 68, 68, 0.1);\n  color: rgb(239, 68, 68);\n}\n\n.activity-table__badge--share {\n  background: rgba(245, 158, 11, 0.1);\n  color: rgb(245, 158, 11);\n}\n\n.activity-table__badge--edit {\n  background: rgba(236, 72, 153, 0.1);\n  color: rgb(236, 72, 153);\n}\n\n.activity-table__badge--comment {\n  background: rgba(99, 102, 241, 0.1);\n  color: rgb(99, 102, 241);\n}\n\n.activity-table__badge--tag {\n  background: rgba(34, 197, 94, 0.1);\n  color: rgb(34, 197, 94);\n}\n\n.activity-table__asset {\n  color: var(--color-text, #111827);\n  font-weight: 500;\n  max-width: 200px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  display: inline-block;\n}\n\n.activity-table__asset--empty {\n  color: var(--color-text-secondary, #6b7280);\n  font-style: italic;\n}\n\n.activity-table__time {\n  color: var(--color-text-secondary, #6b7280);\n  font-size: var(--font-size-xs, 11px);\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .activity-table__wrapper {\n    font-size: var(--font-size-xs, 11px);\n  }\n\n  .activity-table__header,\n  .activity-table__cell {\n    padding: 8px 12px;\n  }\n\n  .activity-table__asset {\n    max-width: 150px;\n  }\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n  .activity-table__row {\n    transition: none;\n  }\n\n  .activity-table__skeleton-row {\n    animation: none;\n  }\n}\n</style>\n\n","<template>\n  <div class=\"reports-page\">\n    <!-- Toolbar -->\n    <div class=\"reports-toolbar\">\n      <h1 class=\"reports-toolbar__title\">Analytics & Reports</h1>\n\n      <div class=\"reports-toolbar__controls\">\n        <!-- Time Range Selector -->\n        <Select\n          v-model=\"selectedTimeRange\"\n          :options=\"timeRangeOptions\"\n          label=\"Period\"\n          class=\"reports-toolbar__select\"\n        />\n\n        <!-- Custom Date Range (if 'custom' selected) -->\n        <DateRangePicker\n          v-if=\"selectedTimeRange === 'custom'\"\n          v-model=\"customDateRange\"\n          class=\"reports-toolbar__date-picker\"\n        />\n\n        <!-- Export Button -->\n        <div class=\"reports-toolbar__export\" ref=\"exportMenuRef\">\n          <Button\n            variant=\"secondary\"\n            @click=\"showExportMenu = !showExportMenu\"\n            aria-label=\"Export report\"\n            aria-haspopup=\"true\"\n            :aria-expanded=\"showExportMenu\"\n            data-testid=\"reports-export-trigger\"\n          >\n            <svg\n              class=\"w-5 h-5\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              aria-hidden=\"true\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\n              />\n            </svg>\n            Export\n          </Button>\n\n          <!-- Export Menu -->\n          <Transition\n            enter-active-class=\"transition ease-out duration-100\"\n            enter-from-class=\"opacity-0 scale-95\"\n            enter-to-class=\"opacity-100 scale-100\"\n            leave-active-class=\"transition ease-in duration-75\"\n            leave-from-class=\"opacity-100 scale-100\"\n            leave-to-class=\"opacity-0 scale-95\"\n          >\n            <div\n              v-if=\"showExportMenu\"\n              class=\"export-menu\"\n              role=\"menu\"\n              aria-label=\"Export options\"\n            >\n              <button\n                class=\"export-menu__item\"\n                @click=\"handleExport('csv')\"\n                role=\"menuitem\"\n                aria-label=\"Export as CSV\"\n                data-testid=\"export-csv\"\n              >\n                <svg\n                  class=\"w-5 h-5\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  aria-hidden=\"true\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                  />\n                </svg>\n                Export CSV\n              </button>\n              <button\n                class=\"export-menu__item\"\n                @click=\"handleExport('pdf')\"\n                role=\"menuitem\"\n                aria-label=\"Export as PDF\"\n                data-testid=\"export-pdf\"\n              >\n                <svg\n                  class=\"w-5 h-5\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  aria-hidden=\"true\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                  />\n                </svg>\n                Export PDF\n              </button>\n            </div>\n          </Transition>\n        </div>\n      </div>\n    </div>\n\n    <!-- Loading State -->\n    <div v-if=\"isLoading\" class=\"reports-loading\" role=\"status\" aria-live=\"polite\">\n      <div\n        v-for=\"i in 4\"\n        :key=\"i\"\n        class=\"reports-loading__skeleton\"\n        :aria-label=\"`Loading report ${i}`\"\n      />\n    </div>\n\n    <!-- Charts Grid -->\n    <div v-else class=\"reports-grid\">\n      <!-- Usage Metrics Card -->\n      <Card class=\"reports-card\" variant=\"elevated\">\n        <template #header>\n          <h2 class=\"reports-card__title\">Storage & Assets</h2>\n        </template>\n\n        <div class=\"metrics-summary\">\n          <div class=\"metric\">\n            <span class=\"metric-label\">Total Assets</span>\n            <span class=\"metric-value\">{{ usageMetrics?.totalAssets || 0 }}</span>\n          </div>\n          <div class=\"metric\">\n            <span class=\"metric-label\">Storage Used</span>\n            <span class=\"metric-value\">{{ formatBytes(usageMetrics?.storageUsed || 0) }}</span>\n          </div>\n          <div class=\"metric\">\n            <span class=\"metric-label\">Storage Limit</span>\n            <span class=\"metric-value\">\n              {{\n                usageMetrics?.storageLimit\n                  ? formatBytes(usageMetrics.storageLimit)\n                  : 'Unlimited'\n              }}\n            </span>\n          </div>\n          <div class=\"metric\">\n            <span class=\"metric-label\">Usage</span>\n            <span class=\"metric-value\">{{ usageMetrics?.storagePercentage || 0 }}%</span>\n          </div>\n        </div>\n\n        <!-- Storage Breakdown Pie Chart -->\n        <ChartComponent\n          v-if=\"storageChartData\"\n          type=\"pie\"\n          :data=\"storageChartData\"\n          title=\"Storage by File Type\"\n        />\n        <div v-else class=\"chart-empty\">\n          <p>No storage data available</p>\n        </div>\n      </Card>\n\n      <!-- Downloads Chart Card -->\n      <Card class=\"reports-card\" variant=\"elevated\">\n        <template #header>\n          <h2 class=\"reports-card__title\">Downloads Trend</h2>\n        </template>\n\n        <ChartComponent\n          v-if=\"downloadChartData\"\n          type=\"line\"\n          :data=\"downloadChartData\"\n          title=\"Downloads Over Time\"\n        />\n        <div v-else class=\"chart-empty\">\n          <p>No download data available</p>\n        </div>\n      </Card>\n\n      <!-- Activity Stats Card -->\n      <Card class=\"reports-card\" variant=\"elevated\">\n        <template #header>\n          <h2 class=\"reports-card__title\">User Activity</h2>\n        </template>\n\n        <!-- Activity Table -->\n        <ActivityTable\n          :activities=\"recentActivity\"\n          :is-loading=\"isLoading\"\n          :page-size=\"10\"\n          :show-pagination=\"true\"\n        />\n      </Card>\n\n      <!-- Storage Breakdown Card -->\n      <Card class=\"reports-card\" variant=\"elevated\">\n        <template #header>\n          <h2 class=\"reports-card__title\">Storage Breakdown</h2>\n        </template>\n\n        <ChartComponent\n          v-if=\"storageBarChartData\"\n          type=\"bar\"\n          :data=\"storageBarChartData\"\n          title=\"Storage by Category\"\n        />\n        <div v-else class=\"chart-empty\">\n          <p>No storage breakdown data available</p>\n        </div>\n      </Card>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { onClickOutside } from '@vueuse/core'\nimport { useAuthStore } from '@/stores/authStore'\nimport { useReportsStore } from '@/stores/reportsStore'\nimport { useUIStore } from '@/stores/uiStore'\nimport Card from '@/components/Common/Card.vue'\nimport Button from '@/components/Common/Button.vue'\nimport Select from '@/components/Common/Select.vue'\nimport DateRangePicker from '@/components/Common/DateRangePicker.vue'\nimport ChartComponent from '@/components/reports/ChartComponent.vue'\nimport ActivityTable from '@/components/reports/ActivityTable.vue'\nimport type { ReportTimeRange } from '@/types/reports'\n\n// Hooks\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst reportsStore = useReportsStore()\nconst uiStore = useUIStore()\n\n// State\nconst selectedTimeRange = ref<string>('month')\nconst customDateRange = ref<[string, string] | null>(null)\nconst showExportMenu = ref(false)\nconst isLoading = ref(false)\nconst exportMenuRef = ref<HTMLElement | null>(null)\n\n// Time range options\nconst timeRangeOptions = [\n  { value: 'today', label: 'Today' },\n  { value: 'week', label: 'This Week' },\n  { value: 'month', label: 'This Month' },\n  { value: 'quarter', label: 'Last 3 Months' },\n  { value: 'custom', label: 'Custom Range' }\n]\n\n// Close export menu when clicking outside\nonClickOutside(exportMenuRef, () => {\n  showExportMenu.value = false\n})\n\n// Computed\nconst usageMetrics = computed(() => reportsStore.usageMetrics)\nconst recentActivity = computed(() => reportsStore.recentActivity)\nconst storageBreakdown = computed(() => reportsStore.storageBreakdown)\nconst downloadHistory = computed(() => reportsStore.downloadHistory)\n\nconst timeRange = computed<ReportTimeRange>(() => {\n  if (selectedTimeRange.value === 'custom' && customDateRange.value) {\n    return {\n      type: 'custom',\n      startDate: customDateRange.value[0],\n      endDate: customDateRange.value[1]\n    }\n  }\n\n  const today = new Date()\n  let startDate = new Date(today)\n\n  switch (selectedTimeRange.value) {\n    case 'today':\n      startDate.setHours(0, 0, 0, 0)\n      break\n    case 'week':\n      startDate.setDate(today.getDate() - 7)\n      startDate.setHours(0, 0, 0, 0)\n      break\n    case 'month':\n      startDate.setMonth(today.getMonth() - 1)\n      startDate.setHours(0, 0, 0, 0)\n      break\n    case 'quarter':\n      startDate.setMonth(today.getMonth() - 3)\n      startDate.setHours(0, 0, 0, 0)\n      break\n    default:\n      startDate.setHours(0, 0, 0, 0)\n  }\n\n  const endDate = new Date(today)\n  endDate.setHours(23, 59, 59, 999)\n\n  return {\n    type: selectedTimeRange.value as ReportTimeRange['type'],\n    startDate: startDate.toISOString(),\n    endDate: endDate.toISOString()\n  }\n})\n\nconst storageChartData = computed(() => {\n  if (!storageBreakdown.value.length) return null\n\n  return {\n    labels: storageBreakdown.value.map((s) => s.category),\n    datasets: [\n      {\n        label: 'Storage (GB)',\n        data: storageBreakdown.value.map((s) => s.size / (1024 * 1024 * 1024)),\n        backgroundColor: [\n          'rgba(59, 130, 246, 0.7)', // blue - images\n          'rgba(239, 68, 68, 0.7)', // red - videos\n          'rgba(16, 185, 129, 0.7)', // green - documents\n          'rgba(245, 158, 11, 0.7)', // yellow - audio\n          'rgba(139, 92, 246, 0.7)' // purple - other\n        ].slice(0, storageBreakdown.value.length)\n      }\n    ]\n  }\n})\n\nconst downloadChartData = computed(() => {\n  if (!downloadHistory.value.length) return null\n\n  return {\n    labels: downloadHistory.value.map((d) => {\n      const date = new Date(d.date)\n      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n    }),\n    datasets: [\n      {\n        label: 'Downloads',\n        data: downloadHistory.value.map((d) => d.downloads),\n        borderColor: 'rgba(59, 130, 246, 1)',\n        backgroundColor: 'rgba(59, 130, 246, 0.1)',\n        fill: true,\n        tension: 0.4\n      },\n      {\n        label: 'Unique Users',\n        data: downloadHistory.value.map((d) => d.uniqueUsers),\n        borderColor: 'rgba(16, 185, 129, 1)',\n        backgroundColor: 'rgba(16, 185, 129, 0.1)',\n        fill: true,\n        tension: 0.4\n      }\n    ]\n  }\n})\n\nconst storageBarChartData = computed(() => {\n  if (!storageBreakdown.value.length) return null\n\n  return {\n    labels: storageBreakdown.value.map((s) => s.category),\n    datasets: [\n      {\n        label: 'File Count',\n        data: storageBreakdown.value.map((s) => s.count),\n        backgroundColor: 'rgba(54, 162, 235, 0.7)'\n      }\n    ]\n  }\n})\n\n// Methods\nconst fetchReports = async (): Promise<void> => {\n  isLoading.value = true\n  try {\n    await Promise.all([\n      reportsStore.fetchUsageReport(timeRange.value),\n      reportsStore.fetchDownloadReport(timeRange.value),\n      reportsStore.fetchActivityReport(timeRange.value, 50),\n      reportsStore.fetchStorageReport(timeRange.value)\n    ])\n  } catch (error) {\n    uiStore.addNotification({\n      type: 'error',\n      title: 'Error',\n      message: 'Failed to load reports'\n    })\n  } finally {\n    isLoading.value = false\n  }\n}\n\nwatch(\n  () => selectedTimeRange.value,\n  (value) => {\n    if (value !== 'custom') {\n      customDateRange.value = null\n    }\n    fetchReports()\n  }\n)\n\nwatch(\n  () => customDateRange.value,\n  () => {\n    if (selectedTimeRange.value === 'custom' && customDateRange.value) {\n      fetchReports()\n    }\n  }\n)\n\nconst handleExport = async (format: 'csv' | 'pdf'): Promise<void> => {\n  try {\n    showExportMenu.value = false\n\n    // Check if we have a current report\n    if (!reportsStore.currentReport?.id) {\n      // For export without saved report, we can export current data directly\n      // This is a simpler approach - export current view without saving\n      uiStore.addNotification({\n        type: 'info',\n        title: 'Info',\n        message: 'Exporting current report data...'\n      })\n\n      // Create a temporary report for export\n      let reportType = 'usage'\n      if (downloadHistory.value.length > 0) {\n        reportType = 'downloads'\n      } else if (recentActivity.value.length > 0) {\n        reportType = 'activity'\n      } else if (storageBreakdown.value.length > 0) {\n        reportType = 'storage'\n      }\n\n      const savedReport = await reportsStore.saveReport(\n        `Report ${new Date().toLocaleDateString()}`,\n        reportType\n      )\n\n      if (!savedReport.id) {\n        throw new Error('Failed to create report for export')\n      }\n\n      reportsStore.setCurrentReport(savedReport)\n    }\n\n    const reportId = reportsStore.currentReport?.id\n    if (!reportId) {\n      throw new Error('No report available for export')\n    }\n\n    const blob = await reportsStore.exportReport(format)\n\n    // Create download link\n    const url = window.URL.createObjectURL(blob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = `report-${new Date().toISOString().split('T')[0]}.${format}`\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    window.URL.revokeObjectURL(url)\n\n    uiStore.addNotification({\n      type: 'success',\n      title: 'Success',\n      message: `Report exported as ${format.toUpperCase()}`\n    })\n  } catch (error) {\n    uiStore.addNotification({\n      type: 'error',\n      title: 'Error',\n      message: 'Failed to export report'\n    })\n  }\n}\n\nconst formatBytes = (bytes: number): string => {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\n}\n\n// Lifecycle\nonMounted(async () => {\n  // Permission check\n  if (!authStore.hasPermission('admin.reports_view')) {\n    router.push({\n      name: 'forbidden',\n      query: {\n        returnTo: '/admin/reports',\n        requiredPermission: 'admin.reports_view'\n      }\n    })\n    return\n  }\n\n  // Set initial time range\n  reportsStore.setTimeRange(timeRange.value)\n\n  await fetchReports()\n})\n\nonUnmounted(() => {\n  showExportMenu.value = false\n})\n</script>\n\n<style scoped lang=\"css\">\n.reports-page {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  padding: 24px;\n  background: var(--color-background, #f9fafb);\n  min-height: 100vh;\n}\n\n.reports-toolbar {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: 24px;\n  background: var(--color-surface, #ffffff);\n  border-radius: var(--radius-base, 8px);\n  border: 1px solid var(--color-border, #e5e7eb);\n}\n\n.reports-toolbar__title {\n  margin: 0;\n  font-size: var(--font-size-3xl, 30px);\n  font-weight: 600;\n  color: var(--color-text, #111827);\n}\n\n.reports-toolbar__controls {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.reports-toolbar__select {\n  min-width: 180px;\n}\n\n.reports-toolbar__date-picker {\n  min-width: 300px;\n}\n\n.reports-toolbar__export {\n  position: relative;\n  margin-left: auto;\n}\n\n.export-menu {\n  position: absolute;\n  top: calc(100% + 8px);\n  right: 0;\n  background: var(--color-surface, #ffffff);\n  border: 1px solid var(--color-border, #e5e7eb);\n  border-radius: var(--radius-base, 8px);\n  box-shadow: var(--shadow-md, 0 4px 6px -1px rgba(0, 0, 0, 0.1));\n  z-index: 10;\n  min-width: 180px;\n  overflow: hidden;\n}\n\n.export-menu__item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n  padding: 12px 16px;\n  border: none;\n  background: transparent;\n  color: var(--color-text, #111827);\n  cursor: pointer;\n  text-align: left;\n  font-size: var(--font-size-base, 14px);\n  transition: all 200ms ease;\n}\n\n.export-menu__item:hover {\n  background: var(--color-bg-1, #f9fafb);\n}\n\n.export-menu__item:focus {\n  outline: 2px solid var(--color-primary, #3b82f6);\n  outline-offset: -2px;\n}\n\n.reports-loading {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 24px;\n}\n\n.reports-loading__skeleton {\n  height: 400px;\n  background: var(--color-bg-1, #f9fafb);\n  border-radius: var(--radius-base, 8px);\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n@keyframes pulse {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.reports-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 24px;\n}\n\n.reports-card {\n  min-height: 300px;\n}\n\n.reports-card__title {\n  margin: 0;\n  font-size: var(--font-size-xl, 20px);\n  font-weight: 600;\n  color: var(--color-text, #111827);\n}\n\n.metrics-summary {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n  margin-bottom: 24px;\n}\n\n.metric {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  padding: 12px;\n  background: var(--color-bg-1, #f9fafb);\n  border-radius: var(--radius-base, 8px);\n}\n\n.metric-label {\n  font-size: var(--font-size-sm, 12px);\n  color: var(--color-text-secondary, #6b7280);\n  font-weight: 500;\n}\n\n.metric-value {\n  font-size: var(--font-size-lg, 18px);\n  font-weight: 600;\n  color: var(--color-text, #111827);\n}\n\n.chart-empty {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 300px;\n  color: var(--color-text-secondary, #6b7280);\n  font-size: var(--font-size-base, 14px);\n}\n\n/* Responsive */\n@media (max-width: 1024px) {\n  .reports-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (max-width: 768px) {\n  .reports-toolbar {\n    padding: 16px;\n  }\n\n  .reports-toolbar__controls {\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  .reports-toolbar__select,\n  .reports-toolbar__date-picker {\n    width: 100%;\n    min-width: unset;\n  }\n\n  .reports-toolbar__export {\n    margin-left: 0;\n  }\n\n  .export-menu {\n    right: auto;\n    left: 0;\n  }\n\n  .metrics-summary {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n  .export-menu,\n  .reports-loading__skeleton {\n    animation: none;\n  }\n}\n</style>\n\n"],"file":"assets/AdminReportsPage-D3JXZZoR.js"}