const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-vendor-BYNnTNyD.js","assets/vue-vendor-B11yH1L4.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,n=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&s(e,a,t[a]);return e},i=(e,t,a)=>new Promise((r,l)=>{var o=e=>{try{n(a.next(e))}catch(t){l(t)}},s=e=>{try{n(a.throw(e))}catch(t){l(t)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);n((a=a.apply(e,t)).next())});import{d as u,r as c,c as d,w as v,b as p,k as g,y,a as h,e as m,f,i as b,t as _,j as w,F as D,h as k,l as R,n as S,x as C,C as x,s as M,A as P,T as U}from"./vue-vendor-B11yH1L4.js";import{o as E}from"./utils-vendor-BYNnTNyD.js";import{a as z,m as A,u as T,k as $,f as j,d as B,e as L,_ as O}from"./index-CEUju959.js";import{e as F}from"./errorHandling-B5S82HA9.js";import{_ as H}from"./Select.vue_vue_type_script_setup_true_lang-8BshTy_O.js";import{D as I}from"./DateRangePicker-DQgDC4j3.js";import{_ as V}from"./Pagination.vue_vue_type_script_setup_true_lang-DJgozKuc.js";const N=new class{getUsageReport(e){return i(this,null,function*(){const t={start:e.startDate,end:e.endDate};return z.get("/v4/reports/usage/",{params:t},!0)})}getDownloadReport(e){return i(this,null,function*(){const t={start:e.startDate,end:e.endDate};return z.get("/v4/reports/downloads/",{params:t},!0)})}getActivityReport(e,t){return i(this,null,function*(){const a={start:e.startDate,end:e.endDate};return t&&(a.limit=t),z.get("/v4/reports/activity/",{params:a},!1)})}getStorageReport(e){return i(this,null,function*(){const t={start:e.startDate,end:e.endDate};return z.get("/v4/reports/storage/",{params:t},!0)})}exportReport(e,t){return i(this,null,function*(){const a=(yield A(()=>i(this,null,function*(){const{default:e}=yield import("./utils-vendor-BYNnTNyD.js").then(e=>e.i);return{default:e}}),__vite__mapDeps([0,1]))).default,r=localStorage.getItem("auth_token");return(yield a.get(`http://localhost:8000/api/v4/reports/${e}/export/`,{params:{format:t},responseType:"blob",headers:{Authorization:r?`Bearer ${r}`:""}})).data})}getAllReports(e){return i(this,null,function*(){const t={};return(null==e?void 0:e.type)&&(t.type=e.type),(null==e?void 0:e.timeRange)&&(t.start=e.timeRange.startDate,t.end=e.timeRange.endDate),(null==e?void 0:e.sort_by)&&(t.sort_by=e.sort_by),(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.page_size)&&(t.page_size=e.page_size),z.get("/v4/reports/",{params:t},!0)})}saveReport(e){return i(this,null,function*(){if(!e.name||0===e.name.trim().length)throw new Error("Report name is required");if(e.name.length>255)throw new Error("Report name must be 255 characters or less");return z.post("/v4/reports/",e)})}getReport(e){return i(this,null,function*(){return z.get(`/v4/reports/${e}/`,void 0,!0)})}deleteReport(e){return i(this,null,function*(){return z.delete(`/v4/reports/${e}/`)})}},q={type:"month",startDate:"",endDate:""},Y=u("reports",()=>{const e=T(),r=$(),l=c({usage:0,downloads:0,activity:0,storage:0}),o=e=>{var r;const o=(null!=(r=l.value[e])?r:0)+1;var s;return l.value=(s=n({},l.value),t(s,a({[e]:o}))),o},s=(e,t)=>l.value[e]===t,u=(e,t)=>{const a=j(t),l=F(t);return r.addNotification({type:"error",title:`${e} Error`,message:a,meta:l?{code:l}:void 0}),a},p=c([]),g=c(null),y=c([]),h=c(null),m=c(n({},q)),f=c(null),b=c([]),_=c([]),w=c([]),D=c(null),k=c(!1),R=c(null),S=d(()=>null!==D.value&&D.value.datasets.length>0),C=d(()=>null===g.value),x=d(()=>{if("custom"===m.value.type){if(m.value.startDate&&m.value.endDate){const e=new Date(m.value.startDate),t=new Date(m.value.endDate);return`${M(e)} - ${M(t)}`}return"Custom range"}const e=new Date;switch(m.value.type){case"today":return M(e);case"week":const t=new Date(e);return t.setDate(e.getDate()-7),`${M(t)} - ${M(e)}`;case"month":return P(e);case"quarter":return U(e);default:return"Select range"}}),M=e=>e.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),P=e=>e.toLocaleDateString("en-US",{month:"long",year:"numeric"}),U=e=>`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`,E=e=>{const t=new Date;let a,r=new Date(t);switch(e.type){case"today":a=new Date(t),a.setHours(0,0,0,0),r.setHours(23,59,59,999);break;case"week":a=new Date(t),a.setDate(t.getDate()-7),a.setHours(0,0,0,0);break;case"month":a=new Date(t.getFullYear(),t.getMonth(),1),a.setHours(0,0,0,0),r=new Date(t.getFullYear(),t.getMonth()+1,0),r.setHours(23,59,59,999);break;case"quarter":const l=Math.floor(t.getMonth()/3);a=new Date(t.getFullYear(),3*l,1),a.setHours(0,0,0,0),r=new Date(t.getFullYear(),3*(l+1),0),r.setHours(23,59,59,999);break;case"custom":a=new Date(e.startDate),r=new Date(e.endDate);break;default:a=new Date(t),a.setMonth(t.getMonth()-1)}return{start:a.toISOString(),end:r.toISOString()}};function z(e){return i(this,null,function*(){const t="usage",a=o(t);k.value=!0,R.value=null;try{const r=e||m.value,{start:l,end:o}=E(r),n=yield N.getUsageReport({type:r.type,startDate:l,endDate:o});if(!s(t,a))return;f.value=n,n.assetsByType&&(w.value=[{category:"images",size:0,count:n.assetsByType.images,percentage:0},{category:"videos",size:0,count:n.assetsByType.videos,percentage:0},{category:"documents",size:0,count:n.assetsByType.documents,percentage:0},{category:"audio",size:0,count:n.assetsByType.audio,percentage:0},{category:"other",size:0,count:n.assetsByType.other,percentage:0}]),D.value=O(w.value)}catch(r){if(!s(t,a))return;const e=u("Usage report fetch",r);throw R.value=e,f.value=null,w.value=[],D.value=null,r}finally{s(t,a)&&(k.value=!1)}})}function A(e){return i(this,null,function*(){const t="downloads",a=o(t);k.value=!0,R.value=null;try{const r=e||m.value,{start:l,end:o}=E(r),n=yield N.getDownloadReport({type:r.type,startDate:l,endDate:o});if(!s(t,a))return;b.value=n,D.value=H(n)}catch(r){if(!s(t,a))return;const e=u("Download report fetch",r);throw R.value=e,b.value=[],D.value=null,r}finally{s(t,a)&&(k.value=!1)}})}function B(e,t=50){return i(this,null,function*(){const a="activity",r=o(a);k.value=!0,R.value=null;try{const l=e||m.value,{start:o,end:n}=E(l),i=yield N.getActivityReport({type:l.type,startDate:o,endDate:n},t);if(!s(a,r))return;_.value=i}catch(l){if(!s(a,r))return;const e=u("Activity report fetch",l);throw R.value=e,_.value=[],l}finally{s(a,r)&&(k.value=!1)}})}function L(e){return i(this,null,function*(){const t="storage",a=o(t);k.value=!0,R.value=null;try{const r=e||m.value,{start:l,end:o}=E(r),n=yield N.getStorageReport({type:r.type,startDate:l,endDate:o});if(!s(t,a))return;w.value=n,D.value=O(n)}catch(r){if(!s(t,a))return;const e=u("Storage report fetch",r);throw R.value=e,w.value=[],D.value=null,r}finally{s(t,a)&&(k.value=!1)}})}function O(e){const t=e.map(e=>e.category),a=e.map(e=>e.size),r=["rgba(59, 130, 246, 0.8)","rgba(239, 68, 68, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)"],l=r.slice(0,t.length).map(e=>e.replace("0.8","1"));return{labels:t,datasets:[{label:"Storage by Category",data:a,backgroundColor:r.slice(0,t.length),borderColor:l}]}}function H(e){return{labels:e.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Downloads",data:e.map(e=>e.downloads),borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0},{label:"Unique Users",data:e.map(e=>e.uniqueUsers),borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0}]}}return v(()=>m.value,e=>i(void 0,null,function*(){if(g.value)switch(g.value.type){case"usage":yield z(e);break;case"downloads":yield A(e);break;case"activity":yield B(e);break;case"storage":yield L(e)}}),{deep:!0}),{reports:p,currentReport:g,savedReports:y,reportSummary:h,timeRange:m,usageMetrics:f,downloadHistory:b,recentActivity:_,storageBreakdown:w,chartData:D,isLoading:k,error:R,chartsReady:S,exportDisabled:C,timeRangeDisplay:x,fetchUsageReport:z,fetchDownloadReport:A,fetchActivityReport:B,fetchStorageReport:L,setTimeRange:function(e){m.value=n({},e)},generateChartData:function(e,t){switch(e){case"usage":case"storage":return O(t);case"downloads":return H(t);default:return{labels:[],datasets:[]}}},generateStorageChartData:O,generateDownloadChartData:H,exportReport:function(e){return i(this,null,function*(){if(!g.value)throw new Error("No report selected for export");k.value=!0,R.value=null;try{return yield N.exportReport(g.value.id,e)}catch(t){throw R.value=j(t),t}finally{k.value=!1}})},saveReport:function(t,a){return i(this,null,function*(){var r;k.value=!0,R.value=null;try{let l;switch(a){case"usage":if(!f.value)throw new Error("No usage metrics to save. Please fetch usage report first.");l=f.value;break;case"downloads":if(0===b.value.length)throw new Error("No download data to save. Please fetch download report first.");l=b.value;break;case"activity":if(0===_.value.length)throw new Error("No activity data to save. Please fetch activity report first.");l=_.value;break;case"storage":if(0===w.value.length)throw new Error("No storage data to save. Please fetch storage report first.");l=w.value;break;default:throw new Error(`Invalid report type: ${a}`)}const o={id:0,name:t,type:a,timeRange:m.value,metrics:l,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),created_by:(null==(r=e.user)?void 0:r.id)||0},s=yield N.saveReport(o);return y.value.push(s),s}catch(l){throw R.value=j(l),l}finally{k.value=!1}})},fetchSavedReports:function(){return i(this,null,function*(){k.value=!0,R.value=null;try{const e=yield N.getAllReports({type:"usage"});y.value=e}catch(e){throw R.value=j(e),y.value=[],e}finally{k.value=!1}})},setCurrentReport:function(e){g.value=e,e&&(m.value=e.timeRange)},clearError:function(){R.value=null},reset:function(){p.value=[],g.value=null,y.value=[],h.value=null,m.value=n({},q),f.value=null,b.value=[],_.value=[],w.value=[],D.value=null,R.value=null}}},{persist:{paths:["timeRange"]}}),G={class:"chart-component"},J={key:0,class:"chart-component__title"},K=["aria-label"],Q={key:1,class:"chart-component__error",role:"alert"},W=B(p({__name:"ChartComponent",props:{type:{},data:{},title:{}},setup(e){const t=e,a=c(null),r=c(null),l=c(null);let o=null;const s=()=>i(this,null,function*(){try{const e=yield A(()=>import("./auto-LI1iQKvb.js"),[]);return e.default||e.Chart}catch(e){return l.value="Chart.js library is not installed. Please install it: npm install chart.js",null}}),n=()=>i(this,null,function*(){if(!a.value||!t.data)return;o&&(o.destroy(),o=null);const e=yield s();if(e)try{const r=a.value.getContext("2d");if(!r)return;const s={type:t.type,data:t.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:12,usePointStyle:!0}},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:"pie"!==t.type?{x:{grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:12}}},y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:12}}}}:void 0}};o=new e(r,s),l.value=null}catch(r){l.value="Failed to render chart. Please check the console for details."}});return v(()=>t.data,()=>i(this,null,function*(){yield y(),yield n()}),{deep:!0}),g(()=>i(this,null,function*(){yield y(),yield n()})),h(()=>{o&&(o.destroy(),o=null)}),(t,o)=>(w(),m("div",G,[e.title?(w(),m("h3",J,_(e.title),1)):f("",!0),b("div",{class:"chart-component__container",ref_key:"chartContainerRef",ref:r},[b("canvas",{ref_key:"chartCanvasRef",ref:a,"aria-label":e.title||"Chart"},null,8,K)],512),l.value?(w(),m("div",Q,[b("p",null,_(l.value),1)])):f("",!0)]))}}),[["__scopeId","data-v-38dfc3b1"]]),Z={class:"activity-table"},X={key:0,class:"activity-table__loading",role:"status","aria-live":"polite"},ee=["aria-label"],te={key:1,class:"activity-table__empty",role:"status","aria-live":"polite"},ae={key:2,class:"activity-table__wrapper"},re={class:"activity-table__table",role:"table","aria-label":"User activity log"},le={class:"activity-table__cell"},oe={class:"activity-table__user"},se={class:"activity-table__username"},ne={class:"activity-table__email"},ie={class:"activity-table__cell"},ue={class:"activity-table__cell"},ce={key:0,class:"activity-table__asset"},de={key:1,class:"activity-table__asset--empty"},ve={class:"activity-table__cell"},pe=["datetime"],ge={key:0,class:"activity-table__pagination",role:"navigation","aria-label":"Activity table pagination"},ye=B(p({__name:"ActivityTable",props:{activities:{},isLoading:{type:Boolean,default:!1},pageSize:{default:10},showPagination:{type:Boolean,default:!0}},setup(e){const t=e,a=c(1),r=d(()=>{if(!t.showPagination||t.activities.length<=t.pageSize)return t.activities;const e=(a.value-1)*t.pageSize,r=e+t.pageSize;return t.activities.slice(e,r)}),l=d(()=>t.showPagination?Math.ceil(t.activities.length/t.pageSize):1),o=e=>{a.value=e;const t=document.querySelector(".activity-table__wrapper");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},s=e=>{const t=new Date(e),a=new Date,r=a.getTime()-t.getTime(),l=Math.floor(r/6e4),o=Math.floor(r/36e5),s=Math.floor(r/864e5);return l<1?"Just now":l<60?`${l}m ago`:o<24?`${o}h ago`:s<7?`${s}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==a.getFullYear()?"numeric":void 0})};return(t,n)=>(w(),m("div",Z,[e.isLoading?(w(),m("div",X,[(w(),m(D,null,k(5,e=>b("div",{key:e,class:"activity-table__skeleton-row","aria-label":`Loading activity row ${e}`},null,8,ee)),64))])):e.isLoading||0!==e.activities.length?(w(),m("div",ae,[b("table",re,[n[1]||(n[1]=b("thead",null,[b("tr",null,[b("th",{class:"activity-table__header",scope:"col"},"User"),b("th",{class:"activity-table__header",scope:"col"},"Action"),b("th",{class:"activity-table__header",scope:"col"},"Asset"),b("th",{class:"activity-table__header",scope:"col"},"Time")])],-1)),b("tbody",null,[(w(!0),m(D,null,k(r.value,e=>{return w(),m("tr",{key:`${e.timestamp}-${e.username}-${e.asset_id||"none"}`,class:"activity-table__row"},[b("td",le,[b("div",oe,[b("span",se,_(e.username),1),b("span",ne,_(e.email),1)])]),b("td",ie,[b("span",{class:S(["activity-table__badge",`activity-table__badge--${e.action}`])},_((t=e.action,{upload:"Upload",download:"Download",view:"View",delete:"Delete",share:"Share",edit:"Edit",comment:"Comment",tag:"Tag"}[t]||t)),3)]),b("td",ue,[e.asset_name?(w(),m("span",ce,_(e.asset_name),1)):(w(),m("span",de,"â€”"))]),b("td",ve,[b("time",{datetime:e.timestamp,class:"activity-table__time"},_(s(e.timestamp)),9,pe)])]);var t}),128))])]),e.showPagination&&l.value>1?(w(),m("div",ge,[R(V,{"current-page":a.value,"total-items":e.activities.length,"page-size":e.pageSize,onPageChange:o},null,8,["current-page","total-items","page-size"])])):f("",!0)])):(w(),m("div",te,[...n[0]||(n[0]=[b("svg",{class:"w-12 h-12 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),b("p",{class:"activity-table__empty-text"},"No activity data available",-1)])]))]))}}),[["__scopeId","data-v-f0557399"]]),he={class:"reports-page"},me={class:"reports-toolbar"},fe={class:"reports-toolbar__controls"},be={key:0,class:"export-menu",role:"menu","aria-label":"Export options"},_e={key:0,class:"reports-loading",role:"status","aria-live":"polite"},we=["aria-label"],De={key:1,class:"reports-grid"},ke={class:"metrics-summary"},Re={class:"metric"},Se={class:"metric-value"},Ce={class:"metric"},xe={class:"metric-value"},Me={class:"metric"},Pe={class:"metric-value"},Ue={class:"metric"},Ee={class:"metric-value"},ze={key:1,class:"chart-empty"},Ae={key:1,class:"chart-empty"},Te={key:1,class:"chart-empty"},$e=B(p({__name:"AdminReportsPage",setup(e){const t=C(),a=T(),r=Y(),l=$(),o=c("month"),s=c(null),n=c(!1),u=c(!1),p=c(null),y=[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"quarter",label:"Last 3 Months"},{value:"custom",label:"Custom Range"}];E(p,()=>{n.value=!1});const S=d(()=>r.usageMetrics),z=d(()=>r.recentActivity),A=d(()=>r.storageBreakdown),j=d(()=>r.downloadHistory),B=d(()=>{if("custom"===o.value&&s.value)return{type:"custom",startDate:s.value[0],endDate:s.value[1]};const e=new Date;let t=new Date(e);switch(o.value){case"today":default:t.setHours(0,0,0,0);break;case"week":t.setDate(e.getDate()-7),t.setHours(0,0,0,0);break;case"month":t.setMonth(e.getMonth()-1),t.setHours(0,0,0,0);break;case"quarter":t.setMonth(e.getMonth()-3),t.setHours(0,0,0,0)}const a=new Date(e);return a.setHours(23,59,59,999),{type:o.value,startDate:t.toISOString(),endDate:a.toISOString()}}),F=d(()=>A.value.length?{labels:A.value.map(e=>e.category),datasets:[{label:"Storage (GB)",data:A.value.map(e=>e.size/1073741824),backgroundColor:["rgba(59, 130, 246, 0.7)","rgba(239, 68, 68, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(139, 92, 246, 0.7)"].slice(0,A.value.length)}]}:null),V=d(()=>j.value.length?{labels:j.value.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Downloads",data:j.value.map(e=>e.downloads),borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"Unique Users",data:j.value.map(e=>e.uniqueUsers),borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4}]}:null),N=d(()=>A.value.length?{labels:A.value.map(e=>e.category),datasets:[{label:"File Count",data:A.value.map(e=>e.count),backgroundColor:"rgba(54, 162, 235, 0.7)"}]}:null),q=()=>i(this,null,function*(){u.value=!0;try{yield Promise.all([r.fetchUsageReport(B.value),r.fetchDownloadReport(B.value),r.fetchActivityReport(B.value,50),r.fetchStorageReport(B.value)])}catch(e){l.addNotification({type:"error",title:"Error",message:"Failed to load reports"})}finally{u.value=!1}});v(()=>o.value,e=>{"custom"!==e&&(s.value=null),q()}),v(()=>s.value,()=>{"custom"===o.value&&s.value&&q()});const G=e=>i(this,null,function*(){var t,a;try{if(n.value=!1,!(null==(t=r.currentReport)?void 0:t.id)){l.addNotification({type:"info",title:"Info",message:"Exporting current report data..."});let e="usage";j.value.length>0?e="downloads":z.value.length>0?e="activity":A.value.length>0&&(e="storage");const t=yield r.saveReport(`Report ${(new Date).toLocaleDateString()}`,e);if(!t.id)throw new Error("Failed to create report for export");r.setCurrentReport(t)}if(!(null==(a=r.currentReport)?void 0:a.id))throw new Error("No report available for export");const o=yield r.exportReport(e),s=window.URL.createObjectURL(o),i=document.createElement("a");i.href=s,i.download=`report-${(new Date).toISOString().split("T")[0]}.${e}`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s),l.addNotification({type:"success",title:"Success",message:`Report exported as ${e.toUpperCase()}`})}catch(o){l.addNotification({type:"error",title:"Error",message:"Failed to export report"})}}),J=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB","TB"][t]};return g(()=>i(this,null,function*(){a.hasPermission("admin.reports_view")?(r.setTimeRange(B.value),yield q()):t.push({name:"forbidden",query:{returnTo:"/admin/reports",requiredPermission:"admin.reports_view"}})})),h(()=>{n.value=!1}),(e,t)=>(w(),m("div",he,[b("div",me,[t[8]||(t[8]=b("h1",{class:"reports-toolbar__title"},"Analytics & Reports",-1)),b("div",fe,[R(H,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),options:y,label:"Period",class:"reports-toolbar__select"},null,8,["modelValue"]),"custom"===o.value?(w(),x(I,{key:0,modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),class:"reports-toolbar__date-picker"},null,8,["modelValue"])):f("",!0),b("div",{class:"reports-toolbar__export",ref_key:"exportMenuRef",ref:p},[R(L,{variant:"secondary",onClick:t[2]||(t[2]=e=>n.value=!n.value),"aria-label":"Export report","aria-haspopup":"true","aria-expanded":n.value,"data-testid":"reports-export-trigger"},{default:M(()=>[...t[5]||(t[5]=[b("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),P(" Export ",-1)])]),_:1},8,["aria-expanded"]),R(U,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:M(()=>[n.value?(w(),m("div",be,[b("button",{class:"export-menu__item",onClick:t[3]||(t[3]=e=>G("csv")),role:"menuitem","aria-label":"Export as CSV","data-testid":"export-csv"},[...t[6]||(t[6]=[b("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),P(" Export CSV ",-1)])]),b("button",{class:"export-menu__item",onClick:t[4]||(t[4]=e=>G("pdf")),role:"menuitem","aria-label":"Export as PDF","data-testid":"export-pdf"},[...t[7]||(t[7]=[b("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),P(" Export PDF ",-1)])])])):f("",!0)]),_:1})],512)])]),u.value?(w(),m("div",_e,[(w(),m(D,null,k(4,e=>b("div",{key:e,class:"reports-loading__skeleton","aria-label":`Loading report ${e}`},null,8,we)),64))])):(w(),m("div",De,[R(O,{class:"reports-card",variant:"elevated"},{header:M(()=>[...t[9]||(t[9]=[b("h2",{class:"reports-card__title"},"Storage & Assets",-1)])]),default:M(()=>{var e,a,r,l;return[b("div",ke,[b("div",Re,[t[10]||(t[10]=b("span",{class:"metric-label"},"Total Assets",-1)),b("span",Se,_((null==(e=S.value)?void 0:e.totalAssets)||0),1)]),b("div",Ce,[t[11]||(t[11]=b("span",{class:"metric-label"},"Storage Used",-1)),b("span",xe,_(J((null==(a=S.value)?void 0:a.storageUsed)||0)),1)]),b("div",Me,[t[12]||(t[12]=b("span",{class:"metric-label"},"Storage Limit",-1)),b("span",Pe,_((null==(r=S.value)?void 0:r.storageLimit)?J(S.value.storageLimit):"Unlimited"),1)]),b("div",Ue,[t[13]||(t[13]=b("span",{class:"metric-label"},"Usage",-1)),b("span",Ee,_((null==(l=S.value)?void 0:l.storagePercentage)||0)+"%",1)])]),F.value?(w(),x(W,{key:0,type:"pie",data:F.value,title:"Storage by File Type"},null,8,["data"])):(w(),m("div",ze,[...t[14]||(t[14]=[b("p",null,"No storage data available",-1)])]))]}),_:1}),R(O,{class:"reports-card",variant:"elevated"},{header:M(()=>[...t[15]||(t[15]=[b("h2",{class:"reports-card__title"},"Downloads Trend",-1)])]),default:M(()=>[V.value?(w(),x(W,{key:0,type:"line",data:V.value,title:"Downloads Over Time"},null,8,["data"])):(w(),m("div",Ae,[...t[16]||(t[16]=[b("p",null,"No download data available",-1)])]))]),_:1}),R(O,{class:"reports-card",variant:"elevated"},{header:M(()=>[...t[17]||(t[17]=[b("h2",{class:"reports-card__title"},"User Activity",-1)])]),default:M(()=>[R(ye,{activities:z.value,"is-loading":u.value,"page-size":10,"show-pagination":!0},null,8,["activities","is-loading"])]),_:1}),R(O,{class:"reports-card",variant:"elevated"},{header:M(()=>[...t[18]||(t[18]=[b("h2",{class:"reports-card__title"},"Storage Breakdown",-1)])]),default:M(()=>[N.value?(w(),x(W,{key:0,type:"bar",data:N.value,title:"Storage by Category"},null,8,["data"])):(w(),m("div",Te,[...t[19]||(t[19]=[b("p",null,"No storage breakdown data available",-1)])]))]),_:1})]))]))}}),[["__scopeId","data-v-457d4671"]]);export{$e as default};
//# sourceMappingURL=AdminReportsPage-DTcQImp3.js.map
