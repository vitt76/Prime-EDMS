{"version":3,"file":"TagInput-DMflVXC-.js","sources":["../../src/components/Common/OptimizedImage.vue","../../src/composables/useIntersectionObserver.ts","../../src/components/DAM/AssetCard.vue","../../src/utils/imageOptimization.ts","../../src/components/Common/TagInput.vue"],"sourcesContent":["<template>\r\n  <picture>\r\n    <!-- WebP source with fallback -->\r\n    <source\r\n      v-if=\"webpUrl\"\r\n      :srcset=\"webpUrl\"\r\n      type=\"image/webp\"\r\n    />\r\n    <!-- Original image as fallback -->\r\n    <img\r\n      :src=\"src\"\r\n      :alt=\"alt\"\r\n      :loading=\"loading\"\r\n      :class=\"imageClasses\"\r\n      @error=\"handleError\"\r\n      @load=\"handleLoad\"\r\n    />\r\n  </picture>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue'\r\n\r\ninterface Props {\r\n  src: string\r\n  alt: string\r\n  loading?: 'lazy' | 'eager'\r\n  webpUrl?: string\r\n  class?: string\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  loading: 'lazy',\r\n  webpUrl: undefined\r\n})\r\n\r\nconst imageError = ref(false)\r\nconst imageLoaded = ref(false)\r\n\r\nconst imageClasses = computed(() => {\r\n  return [\r\n    props.class,\r\n    imageLoaded.value ? 'opacity-100' : 'opacity-0',\r\n    'transition-opacity duration-300'\r\n  ].filter(Boolean).join(' ')\r\n})\r\n\r\nfunction handleError() {\r\n  imageError.value = true\r\n}\r\n\r\nfunction handleLoad() {\r\n  imageLoaded.value = true\r\n}\r\n\r\n// Generate WebP URL from original URL if not provided\r\nconst webpUrl = computed(() => {\r\n  if (props.webpUrl) return props.webpUrl\r\n  \r\n  // Try to generate WebP URL by replacing extension\r\n  if (props.src && !imageError.value) {\r\n    const url = new URL(props.src, window.location.origin)\r\n    const pathname = url.pathname\r\n    const webpPath = pathname.replace(/\\.(jpg|jpeg|png)$/i, '.webp')\r\n    return webpPath !== pathname ? `${url.origin}${webpPath}` : undefined\r\n  }\r\n  return undefined\r\n})\r\n</script>\r\n\r\n\r\n\r\n","import { ref, onMounted, onUnmounted, type Ref } from 'vue'\r\n\r\n/**\r\n * Intersection Observer composable for lazy loading\r\n */\r\nexport function useIntersectionObserver(\r\n  elementRef: Ref<HTMLElement | null>,\r\n  options?: IntersectionObserverInit\r\n) {\r\n  const isIntersecting = ref(false)\r\n  const hasIntersected = ref(false)\r\n\r\n  let observer: IntersectionObserver | null = null\r\n\r\n  const defaultOptions: IntersectionObserverInit = {\r\n    root: null,\r\n    rootMargin: '50px',\r\n    threshold: 0.1,\r\n    ...options\r\n  }\r\n\r\n  onMounted(() => {\r\n    if (!elementRef.value) return\r\n\r\n    observer = new IntersectionObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        isIntersecting.value = entry.isIntersecting\r\n        if (entry.isIntersecting && !hasIntersected.value) {\r\n          hasIntersected.value = true\r\n        }\r\n      })\r\n    }, defaultOptions)\r\n\r\n    observer.observe(elementRef.value)\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    if (observer && elementRef.value) {\r\n      observer.unobserve(elementRef.value)\r\n      observer.disconnect()\r\n    }\r\n  })\r\n\r\n  return {\r\n    isIntersecting,\r\n    hasIntersected\r\n  }\r\n}\r\n\r\n","<template>\r\n    <div\r\n    :class=\"cardClasses\"\r\n    role=\"button\"\r\n    tabindex=\"0\"\r\n    :aria-label=\"`Актив: ${asset.label}`\"\r\n    @click=\"handleClick\"\r\n    @dblclick=\"handleDoubleClick\"\r\n    @mouseenter=\"isHovered = true\"\r\n    @mouseleave=\"isHovered = false\"\r\n    @keydown.enter=\"handleClick\"\r\n    @keydown.space.prevent=\"handleClick\"\r\n  >\r\n    <!-- Checkbox (shown on hover or when selected) -->\r\n    <div\r\n      v-if=\"showCheckbox && (isHovered || isSelected)\"\r\n      class=\"absolute top-2 left-2 z-10\"\r\n      @click.stop=\"handleSelect\"\r\n    >\r\n      <input\r\n        type=\"checkbox\"\r\n        :checked=\"isSelected\"\r\n        class=\"w-5 h-5 rounded border-neutral-300 text-primary-500 focus:ring-primary-500 cursor-pointer min-w-[44px] min-h-[44px]\"\r\n        @click.stop\r\n        @change=\"handleSelect\"\r\n        :aria-label=\"`Выбрать актив ${asset.label}`\"\r\n      />\r\n    </div>\r\n\r\n    <!-- Thumbnail -->\r\n    <div\r\n      ref=\"thumbnailRef\"\r\n      class=\"relative w-full h-48 bg-neutral-100 dark:bg-neutral-100 rounded-t-lg overflow-hidden\"\r\n    >\r\n      <!-- Optimized Image with WebP support and lazy loading -->\r\n      <OptimizedImage\r\n        v-if=\"props.asset.thumbnail_url && !props.isLoading && shouldLoadImage\"\r\n        :src=\"props.asset.thumbnail_url\"\r\n        :alt=\"props.asset.label\"\r\n        :loading=\"shouldLoadImage ? 'lazy' : 'eager'\"\r\n        :webp-url=\"webpThumbnailUrl\"\r\n        class=\"w-full h-full object-cover\"\r\n      />\r\n      <div\r\n        v-else-if=\"isLoading\"\r\n        class=\"w-full h-full flex items-center justify-center\"\r\n      >\r\n        <svg\r\n          class=\"animate-spin h-8 w-8 text-neutral-400\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <circle\r\n            class=\"opacity-25\"\r\n            cx=\"12\"\r\n            cy=\"12\"\r\n            r=\"10\"\r\n            stroke=\"currentColor\"\r\n            stroke-width=\"4\"\r\n          ></circle>\r\n          <path\r\n            class=\"opacity-75\"\r\n            fill=\"currentColor\"\r\n            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n      <div\r\n        v-else\r\n        class=\"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-200\"\r\n      >\r\n        <svg\r\n          class=\"w-12 h-12 text-neutral-400\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n          />\r\n        </svg>\r\n      </div>\r\n\r\n      <!-- Quick Actions (shown on hover) -->\r\n      <div\r\n        v-if=\"isHovered && !isLoading\"\r\n        class=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center gap-2 opacity-0 transition-opacity duration-fast hover:opacity-100\"\r\n        @click.stop\r\n      >\r\n        <button\r\n          class=\"p-2 bg-white rounded-full hover:bg-neutral-100 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center\"\r\n          @click.stop=\"handlePreview\"\r\n          aria-label=\"Предпросмотр актива\"\r\n          type=\"button\"\r\n        >\r\n          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\r\n            />\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\r\n            />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          class=\"p-2 bg-white rounded-full hover:bg-neutral-100 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center\"\r\n          @click.stop=\"handleDownload\"\r\n          aria-label=\"Скачать актив\"\r\n          type=\"button\"\r\n        >\r\n          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n            />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          class=\"p-2 bg-white rounded-full hover:bg-neutral-100 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center\"\r\n          @click.stop=\"handleMore\"\r\n          aria-label=\"Дополнительные действия\"\r\n          type=\"button\"\r\n        >\r\n          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"\r\n            />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Status Badge -->\r\n      <div\r\n        v-if=\"asset.metadata?.status\"\r\n        class=\"absolute top-2 right-2\"\r\n      >\r\n        <Badge\r\n          :variant=\"getStatusVariant(asset.metadata.status as string)\"\r\n          size=\"sm\"\r\n        >\r\n          {{ asset.metadata.status }}\r\n        </Badge>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Metadata -->\r\n    <div class=\"p-3\">\r\n      <h3 class=\"text-sm font-medium text-neutral-900 dark:text-neutral-900 truncate mb-1\">\r\n        {{ asset.label }}\r\n      </h3>\r\n      <div class=\"flex items-center justify-between text-xs text-neutral-600 dark:text-neutral-600\">\r\n        <span>{{ formatFileSize(asset.size) }}</span>\r\n        <span>{{ formatDate(asset.date_added) }}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue'\r\nimport type { Asset } from '@/types/api'\r\nimport Badge from '@/components/Common/Badge.vue'\r\nimport OptimizedImage from '@/components/Common/OptimizedImage.vue'\r\nimport { formatFileSize, formatDate } from '@/utils/formatters'\r\nimport { useIntersectionObserver } from '@/composables/useIntersectionObserver'\r\nimport { getWebPUrl } from '@/utils/imageOptimization'\r\nimport type { BadgeVariant } from '@/types'\r\n\r\ninterface Props {\r\n  asset: Asset\r\n  isSelected?: boolean\r\n  isLoading?: boolean\r\n  showCheckbox?: boolean\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  isSelected: false,\r\n  isLoading: false,\r\n  showCheckbox: true\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  select: [asset: Asset]\r\n  open: [asset: Asset]\r\n  preview: [asset: Asset]\r\n  download: [asset: Asset]\r\n  more: [asset: Asset]\r\n}>()\r\n\r\nconst isHovered = ref(false)\r\nconst thumbnailRef = ref<HTMLElement | null>(null)\r\n\r\n// Intersection Observer for lazy loading\r\nconst { hasIntersected } = useIntersectionObserver(thumbnailRef, {\r\n  rootMargin: '100px'\r\n})\r\n\r\nconst shouldLoadImage = computed(() => {\r\n  return hasIntersected.value || props.isLoading\r\n})\r\n\r\n// Generate WebP URL from thumbnail URL using utility function\r\nconst webpThumbnailUrl = computed(() => {\r\n  if (!props.asset.thumbnail_url) return undefined\r\n  return getWebPUrl(props.asset.thumbnail_url)\r\n})\r\n\r\nconst cardClasses = computed(() => {\r\n  return [\r\n    'relative',\r\n    'bg-neutral-0',\r\n    'dark:bg-neutral-0',\r\n    'rounded-lg',\r\n    'border',\r\n    'border-neutral-300',\r\n    'dark:border-neutral-300',\r\n    'overflow-hidden',\r\n    'cursor-pointer',\r\n    'transition-all',\r\n    'duration-fast',\r\n    'hover:shadow-lg',\r\n    props.isSelected ? 'ring-2 ring-primary-500' : ''\r\n  ].filter(Boolean).join(' ')\r\n})\r\n\r\nfunction handleClick() {\r\n  emit('select', props.asset)\r\n}\r\n\r\nfunction handleDoubleClick() {\r\n  emit('open', props.asset)\r\n}\r\n\r\nfunction handleSelect() {\r\n  emit('select', props.asset)\r\n}\r\n\r\nfunction handlePreview() {\r\n  emit('preview', props.asset)\r\n}\r\n\r\nfunction handleDownload() {\r\n  emit('download', props.asset)\r\n}\r\n\r\nfunction handleMore() {\r\n  emit('more', props.asset)\r\n}\r\n\r\nfunction getStatusVariant(status: string): BadgeVariant {\r\n  const statusMap: Record<string, BadgeVariant> = {\r\n    approved: 'success',\r\n    pending: 'warning',\r\n    rejected: 'error',\r\n    draft: 'neutral'\r\n  }\r\n  return statusMap[status.toLowerCase()] || 'neutral'\r\n}\r\n</script>\r\n\r\n","/**\r\n * Image optimization utilities\r\n * Provides functions for generating WebP URLs and optimizing image loading\r\n */\r\n\r\n/**\r\n * Generate WebP URL from original image URL\r\n * @param originalUrl - Original image URL\r\n * @returns WebP URL or undefined if conversion not possible\r\n */\r\nexport function getWebPUrl(originalUrl: string): string | undefined {\r\n  if (!originalUrl) return undefined\r\n  \r\n  try {\r\n    const url = new URL(originalUrl, window.location.origin)\r\n    const pathname = url.pathname\r\n    \r\n    // Try to replace common image extensions with .webp\r\n    const webpPath = pathname.replace(/\\.(jpg|jpeg|png)$/i, '.webp')\r\n    \r\n    // Only return if path actually changed (extension was found)\r\n    if (webpPath !== pathname) {\r\n      return `${url.origin}${webpPath}${url.search}${url.hash}`\r\n    }\r\n  } catch {\r\n    // If URL parsing fails, try simple string replacement\r\n    return originalUrl.replace(/\\.(jpg|jpeg|png)$/i, '.webp')\r\n  }\r\n  \r\n  return undefined\r\n}\r\n\r\n/**\r\n * Generate responsive image srcset\r\n * @param baseUrl - Base image URL\r\n * @param sizes - Array of sizes (e.g., ['300w', '600w', '1200w'])\r\n * @returns srcset string\r\n */\r\nexport function generateSrcSet(baseUrl: string, sizes: string[]): string {\r\n  return sizes\r\n    .map((size) => {\r\n      const width = size.replace('w', '')\r\n      // Assuming backend supports size parameter\r\n      return `${baseUrl}?w=${width} ${size}`\r\n    })\r\n    .join(', ')\r\n}\r\n\r\n/**\r\n * Get optimal image size based on viewport\r\n * @param viewportWidth - Current viewport width\r\n * @returns Recommended image width\r\n */\r\nexport function getOptimalImageSize(viewportWidth: number): number {\r\n  if (viewportWidth >= 1280) return 1200 // xl\r\n  if (viewportWidth >= 1024) return 800  // lg\r\n  if (viewportWidth >= 768) return 600  // md\r\n  if (viewportWidth >= 640) return 400   // sm\r\n  return 300 // mobile\r\n}\r\n\r\n\r\n\r\n","<template>\r\n  <div class=\"tag-input\" ref=\"containerRef\">\r\n    <div\r\n      class=\"flex flex-wrap gap-2 p-2 border border-neutral-300 dark:border-neutral-300 rounded-md bg-neutral-0 dark:bg-neutral-0 min-h-[42px] focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent\"\r\n      @click=\"inputRef?.focus()\"\r\n    >\r\n      <!-- Selected Tags -->\r\n      <Badge\r\n        v-for=\"tag in selectedTags\"\r\n        :key=\"tag\"\r\n        variant=\"info\"\r\n        size=\"sm\"\r\n        class=\"flex items-center gap-1\"\r\n      >\r\n        {{ tag }}\r\n        <button\r\n          class=\"ml-1 hover:text-error transition-colors\"\r\n          @click.stop=\"removeTag(tag)\"\r\n          aria-label=\"Удалить тег\"\r\n        >\r\n          <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M6 18L18 6M6 6l12 12\"\r\n            />\r\n          </svg>\r\n        </button>\r\n      </Badge>\r\n\r\n      <!-- Input Field -->\r\n      <input\r\n        ref=\"inputRef\"\r\n        v-model=\"inputValue\"\r\n        type=\"text\"\r\n        :placeholder=\"placeholder\"\r\n        class=\"flex-1 min-w-[120px] outline-none bg-transparent text-sm text-neutral-900 dark:text-neutral-900\"\r\n        @input=\"handleInput\"\r\n        @keydown.enter.prevent=\"handleEnter\"\r\n        @keydown.backspace=\"handleBackspace\"\r\n        @focus=\"showSuggestions = true\"\r\n        @blur=\"handleBlur\"\r\n      />\r\n    </div>\r\n\r\n    <!-- Suggestions Dropdown -->\r\n    <Transition\r\n      enter-active-class=\"transition ease-out duration-200\"\r\n      enter-from-class=\"opacity-0 scale-95\"\r\n      enter-to-class=\"opacity-100 scale-100\"\r\n      leave-active-class=\"transition ease-in duration-150\"\r\n      leave-from-class=\"opacity-100 scale-100\"\r\n      leave-to-class=\"opacity-0 scale-95\"\r\n    >\r\n      <div\r\n        v-if=\"showSuggestions && filteredSuggestions.length > 0\"\r\n        class=\"absolute z-50 mt-1 w-full bg-neutral-0 dark:bg-neutral-0 border border-neutral-300 dark:border-neutral-300 rounded-md shadow-lg max-h-60 overflow-y-auto\"\r\n      >\r\n        <button\r\n          v-for=\"(suggestion, index) in filteredSuggestions\"\r\n          :key=\"suggestion\"\r\n          :class=\"[\r\n            'w-full text-left px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-100 transition-colors',\r\n            index === selectedIndex ? 'bg-primary-50 dark:bg-primary-50' : ''\r\n          ]\"\r\n          @mousedown.prevent=\"selectSuggestion(suggestion)\"\r\n          @mouseenter=\"selectedIndex = index\"\r\n        >\r\n          {{ suggestion }}\r\n        </button>\r\n      </div>\r\n    </Transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\nimport Badge from './Badge.vue'\r\nimport { onClickOutside } from '@vueuse/core'\r\n\r\ninterface Props {\r\n  modelValue: string[]\r\n  suggestions?: string[]\r\n  placeholder?: string\r\n  allowCustom?: boolean\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  suggestions: () => [],\r\n  placeholder: 'Введите тег...',\r\n  allowCustom: true\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  'update:modelValue': [tags: string[]]\r\n}>()\r\n\r\nconst containerRef = ref<HTMLElement | null>(null)\r\nconst inputRef = ref<HTMLInputElement | null>(null)\r\nconst inputValue = ref('')\r\nconst showSuggestions = ref(false)\r\nconst selectedIndex = ref(-1)\r\n\r\nconst selectedTags = computed(() => props.modelValue || [])\r\n\r\nconst filteredSuggestions = computed(() => {\r\n  if (!inputValue.value) {\r\n    return props.suggestions.filter((s) => !selectedTags.value.includes(s)).slice(0, 10)\r\n  }\r\n\r\n  const query = inputValue.value.toLowerCase()\r\n  return props.suggestions\r\n    .filter((s) => s.toLowerCase().includes(query) && !selectedTags.value.includes(s))\r\n    .slice(0, 10)\r\n})\r\n\r\nfunction handleInput() {\r\n  showSuggestions.value = true\r\n  selectedIndex.value = -1\r\n}\r\n\r\nfunction handleEnter() {\r\n  if (selectedIndex.value >= 0 && selectedIndex.value < filteredSuggestions.value.length) {\r\n    selectSuggestion(filteredSuggestions.value[selectedIndex.value])\r\n  } else if (inputValue.value.trim() && props.allowCustom) {\r\n    addTag(inputValue.value.trim())\r\n  }\r\n}\r\n\r\nfunction handleBackspace(event: KeyboardEvent) {\r\n  if (!inputValue.value && selectedTags.value.length > 0) {\r\n    removeTag(selectedTags.value[selectedTags.value.length - 1])\r\n  }\r\n}\r\n\r\nfunction handleBlur() {\r\n  // Delay to allow click events on suggestions\r\n  setTimeout(() => {\r\n    showSuggestions.value = false\r\n  }, 200)\r\n}\r\n\r\nfunction addTag(tag: string) {\r\n  if (tag && !selectedTags.value.includes(tag)) {\r\n    const newTags = [...selectedTags.value, tag]\r\n    emit('update:modelValue', newTags)\r\n    inputValue.value = ''\r\n    showSuggestions.value = false\r\n  }\r\n}\r\n\r\nfunction removeTag(tag: string) {\r\n  const newTags = selectedTags.value.filter((t) => t !== tag)\r\n  emit('update:modelValue', newTags)\r\n}\r\n\r\nfunction selectSuggestion(suggestion: string) {\r\n  addTag(suggestion)\r\n}\r\n\r\n// Click outside to close\r\nonClickOutside(containerRef, () => {\r\n  showSuggestions.value = false\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.tag-input {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n"],"names":["props","__props","imageError","ref","imageLoaded","imageClasses","computed","class","value","filter","Boolean","join","handleError","handleLoad","webpUrl","src","url","URL","window","location","origin","pathname","webpPath","replace","_createElementBlock","srcset","type","_createElementVNode","alt","loading","onError","onLoad","useIntersectionObserver","elementRef","options","isIntersecting","hasIntersected","observer","defaultOptions","__spreadValues","root","rootMargin","threshold","onMounted","IntersectionObserver","entries","forEach","entry","observe","onUnmounted","unobserve","disconnect","emit","__emit","isHovered","thumbnailRef","shouldLoadImage","isLoading","webpThumbnailUrl","asset","thumbnail_url","originalUrl","search","hash","e","getWebPUrl","cardClasses","isSelected","handleClick","handleDoubleClick","handleSelect","handlePreview","handleDownload","handleMore","status","role","tabindex","label","onClick","onDblclick","onMouseenter","onMouseleave","onKeydown","showCheckbox","checked","onChange","_createBlock","OptimizedImage","_openBlock","_hoisted_3","_cache","xmlns","fill","viewBox","cx","cy","r","stroke","d","_hoisted_4","_a","metadata","_hoisted_5","_createVNode","Badge","variant","approved","pending","rejected","draft","toLowerCase","size","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_unref","formatFileSize","formatDate","date_added","containerRef","inputRef","inputValue","showSuggestions","selectedIndex","selectedTags","modelValue","filteredSuggestions","suggestions","s","includes","slice","query","handleInput","handleEnter","length","selectSuggestion","trim","allowCustom","addTag","handleBackspace","event","removeTag","handleBlur","setTimeout","tag","newTags","t","suggestion","onClickOutside","$event","focus","_Fragment","_renderList","key","_createTextVNode","_withModifiers","placeholder","onInput","onFocus","onBlur","_Transition","index","_normalizeClass","onMousedown"],"mappings":"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"}