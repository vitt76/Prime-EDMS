{"version":3,"file":"ResetPasswordPage-Bad7F0pP.js","sources":["../../src/pages/auth/ResetPasswordPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"auth-page\">\r\n    <main class=\"auth-card\" role=\"main\" aria-labelledby=\"reset-password-title\">\r\n      <h1 id=\"reset-password-title\" class=\"auth-card__title\">Reset password</h1>\r\n      <p class=\"auth-card__description\">\r\n        Choose a new password to continue. Password must be at least 8 characters long.\r\n      </p>\r\n\r\n      <div v-if=\"tokenError\" class=\"auth-form__error auth-form__error--global\">\r\n        {{ tokenError }}\r\n        <router-link to=\"/auth/forgot-password\" class=\"auth-link\">\r\n          Request a new reset link\r\n        </router-link>\r\n      </div>\r\n\r\n      <form v-else class=\"auth-form\" @submit.prevent=\"handleSubmit\" novalidate>\r\n        <label for=\"password\" class=\"auth-form__label\">\r\n          New password\r\n          <span class=\"auth-form__required\">*</span>\r\n        </label>\r\n        <input\r\n          id=\"password\"\r\n          type=\"password\"\r\n          v-model=\"newPassword\"\r\n          class=\"auth-form__input\"\r\n          :disabled=\"isSubmitting || success\"\r\n          autocomplete=\"new-password\"\r\n          aria-describedby=\"password-help\"\r\n        />\r\n        <p id=\"password-help\" class=\"auth-form__helper\">\r\n          Minimum 8 characters.\r\n        </p>\r\n\r\n        <label for=\"confirm-password\" class=\"auth-form__label\">\r\n          Confirm password\r\n          <span class=\"auth-form__required\">*</span>\r\n        </label>\r\n        <input\r\n          id=\"confirm-password\"\r\n          type=\"password\"\r\n          v-model=\"confirmPassword\"\r\n          class=\"auth-form__input\"\r\n          :disabled=\"isSubmitting || success\"\r\n          autocomplete=\"new-password\"\r\n        />\r\n        <p v-if=\"passwordError\" class=\"auth-form__error\">{{ passwordError }}</p>\r\n\r\n        <div v-if=\"errorMessage\" class=\"auth-form__error auth-form__error--global\">\r\n          {{ errorMessage }}\r\n        </div>\r\n\r\n        <div v-if=\"success\" class=\"auth-form__success auth-form__success--global\">\r\n          Password reset successfully! Redirecting to login...\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          class=\"auth-form__submit\"\r\n          :disabled=\"isSubmitting || success\"\r\n          aria-live=\"polite\"\r\n        >\r\n          <span v-if=\"isSubmitting\">Resetting password...</span>\r\n          <span v-else-if=\"success\">Success!</span>\r\n          <span v-else>Reset password</span>\r\n        </button>\r\n      </form>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onBeforeUnmount } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { authService } from '@/services/authService'\r\nimport { formatApiError } from '@/utils/errors'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\nconst newPassword = ref('')\r\nconst confirmPassword = ref('')\r\nconst passwordError = ref('')\r\nconst errorMessage = ref('')\r\nconst tokenError = ref('')\r\nconst isSubmitting = ref(false)\r\nconst success = ref(false)\r\nlet redirectTimer: ReturnType<typeof setTimeout> | null = null\r\n\r\nconst validatePasswords = (): boolean => {\r\n  passwordError.value = ''\r\n  errorMessage.value = ''\r\n\r\n  if (!newPassword.value) {\r\n    passwordError.value = 'Password is required'\r\n    return false\r\n  }\r\n\r\n  if (newPassword.value.length < 8) {\r\n    passwordError.value = 'Password must be at least 8 characters long'\r\n    return false\r\n  }\r\n\r\n  if (!confirmPassword.value) {\r\n    passwordError.value = 'Please confirm your password'\r\n    return false\r\n  }\r\n\r\n  if (newPassword.value !== confirmPassword.value) {\r\n    passwordError.value = 'Passwords do not match'\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nconst handleSubmit = async (): Promise<void> => {\r\n  if (!validatePasswords()) {\r\n    return\r\n  }\r\n\r\n  isSubmitting.value = true\r\n  errorMessage.value = ''\r\n\r\n  try {\r\n    const token = route.params.token as string\r\n    if (!token) {\r\n      tokenError.value = 'Invalid reset link'\r\n      return\r\n    }\r\n\r\n    await authService.resetPassword(token, newPassword.value)\r\n    success.value = true\r\n\r\n    // Redirect to login after success\r\n    redirectTimer = setTimeout(() => {\r\n      router.push('/auth/login')\r\n    }, 3000)\r\n\r\n  } catch (err) {\r\n    errorMessage.value = formatApiError(err)\r\n  } finally {\r\n    isSubmitting.value = false\r\n  }\r\n}\r\n\r\nonBeforeUnmount(() => {\r\n  if (redirectTimer) {\r\n    clearTimeout(redirectTimer)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.auth-page {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: var(--color-background, #f5f5f5);\r\n  padding: 24px;\r\n}\r\n\r\n.auth-card {\r\n  width: 100%;\r\n  max-width: 420px;\r\n  background: #fff;\r\n  padding: 32px;\r\n  border-radius: 16px;\r\n  box-shadow: 0 20px 50px rgba(15, 23, 42, 0.1);\r\n}\r\n\r\n.auth-card__title {\r\n  margin: 0 0 8px;\r\n  font-size: 1.75rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.auth-card__description {\r\n  margin: 0 0 24px;\r\n  color: #4b5563;\r\n}\r\n\r\n.auth-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.auth-form__label {\r\n  font-weight: 500;\r\n}\r\n\r\n.auth-form__required {\r\n  color: #ef4444;\r\n  margin-left: 4px;\r\n}\r\n\r\n.auth-form__input {\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 8px;\r\n  padding: 12px 14px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.auth-form__helper {\r\n  font-size: 0.875rem;\r\n  color: #6b7280;\r\n  margin: 4px 0 0;\r\n}\r\n\r\n.auth-form__error {\r\n  color: #dc2626;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.auth-form__error--global {\r\n  margin-top: 12px;\r\n}\r\n\r\n.auth-form__success {\r\n  color: #16a34a;\r\n  font-weight: 500;\r\n}\r\n\r\n.auth-form__success--global {\r\n  margin-top: 16px;\r\n  text-align: center;\r\n}\r\n\r\n.auth-form__submit {\r\n  margin-top: 16px;\r\n  padding: 12px;\r\n  border: none;\r\n  border-radius: 8px;\r\n  background: var(--color-primary, #2563eb);\r\n  color: #fff;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: background 0.2s ease;\r\n}\r\n\r\n.auth-form__submit:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.auth-link {\r\n  display: block;\r\n  margin-top: 8px;\r\n  color: var(--color-primary, #2563eb);\r\n  text-decoration: none;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.auth-link:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>"],"names":["route","useRoute","router","useRouter","newPassword","ref","confirmPassword","passwordError","errorMessage","tokenError","isSubmitting","success","redirectTimer","handleSubmit","__async","this","value","length","token","params","authService","resetPassword","setTimeout","push","err","formatApiError","onBeforeUnmount","clearTimeout","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","id","class","_cache","_hoisted_3","_createTextVNode","_toDisplayString","_createVNode","_component_router_link","to","onSubmit","novalidate","for","type","$event","disabled","autocomplete","_hoisted_6","_hoisted_7","_hoisted_8"],"mappings":"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"}