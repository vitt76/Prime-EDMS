import{b as a,r as e,L as s,e as l,i as r,A as t,l as o,t as u,s as d,z as i,q as n,m as c,f as p,v,B as m,x as h,j as _}from"./vue-vendor-B11yH1L4.js";import{g as f,f as w,d as b}from"./index-CEUju959.js";import"./utils-vendor-BYNnTNyD.js";const y={class:"auth-page"},g={class:"auth-card",role:"main","aria-labelledby":"reset-password-title"},k={key:0,class:"auth-form__error auth-form__error--global"},P=["disabled"],R=["disabled"],q={key:0,class:"auth-form__error"},x={key:1,class:"auth-form__error auth-form__error--global"},j={key:2,class:"auth-form__success auth-form__success--global"},C=["disabled"],I={key:0},S={key:1},T={key:2},U=b(a({__name:"ResetPasswordPage",setup(a){const b=m(),U=h(),V=e(""),z=e(""),A=e(""),B=e(""),L=e(""),M=e(!1),N=e(!1);let D=null;const E=()=>{return a=this,e=null,s=function*(){if(A.value="",B.value="",V.value?V.value.length<8?(A.value="Password must be at least 8 characters long",0):z.value?V.value===z.value||(A.value="Passwords do not match",0):(A.value="Please confirm your password",0):(A.value="Password is required",0)){M.value=!0,B.value="";try{const a=b.params.token;if(!a)return void(L.value="Invalid reset link");yield f.resetPassword(a,V.value),N.value=!0,D=setTimeout(()=>{U.push("/auth/login")},3e3)}catch(a){B.value=w(a)}finally{M.value=!1}}},new Promise((l,r)=>{var t=a=>{try{u(s.next(a))}catch(e){r(e)}},o=a=>{try{u(s.throw(a))}catch(e){r(e)}},u=a=>a.done?l(a.value):Promise.resolve(a.value).then(t,o);u((s=s.apply(a,e)).next())});var a,e,s};return s(()=>{D&&clearTimeout(D)}),(a,e)=>{const s=i("router-link");return _(),l("div",y,[r("main",g,[e[6]||(e[6]=r("h1",{id:"reset-password-title",class:"auth-card__title"},"Reset password",-1)),e[7]||(e[7]=r("p",{class:"auth-card__description"}," Choose a new password to continue. Password must be at least 8 characters long. ",-1)),L.value?(_(),l("div",k,[t(u(L.value)+" ",1),o(s,{to:"/auth/forgot-password",class:"auth-link"},{default:d(()=>[...e[2]||(e[2]=[t(" Request a new reset link ",-1)])]),_:1})])):(_(),l("form",{key:1,class:"auth-form",onSubmit:n(E,["prevent"]),novalidate:""},[e[3]||(e[3]=r("label",{for:"password",class:"auth-form__label"},[t(" New password "),r("span",{class:"auth-form__required"},"*")],-1)),c(r("input",{id:"password",type:"password","onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),class:"auth-form__input",disabled:M.value||N.value,autocomplete:"new-password","aria-describedby":"password-help"},null,8,P),[[v,V.value]]),e[4]||(e[4]=r("p",{id:"password-help",class:"auth-form__helper"}," Minimum 8 characters. ",-1)),e[5]||(e[5]=r("label",{for:"confirm-password",class:"auth-form__label"},[t(" Confirm password "),r("span",{class:"auth-form__required"},"*")],-1)),c(r("input",{id:"confirm-password",type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>z.value=a),class:"auth-form__input",disabled:M.value||N.value,autocomplete:"new-password"},null,8,R),[[v,z.value]]),A.value?(_(),l("p",q,u(A.value),1)):p("",!0),B.value?(_(),l("div",x,u(B.value),1)):p("",!0),N.value?(_(),l("div",j," Password reset successfully! Redirecting to login... ")):p("",!0),r("button",{type:"submit",class:"auth-form__submit",disabled:M.value||N.value,"aria-live":"polite"},[M.value?(_(),l("span",I,"Resetting password...")):N.value?(_(),l("span",S,"Success!")):(_(),l("span",T,"Reset password"))],8,C)],32))])])}}}),[["__scopeId","data-v-d5f1bbae"]]);export{U as default};
//# sourceMappingURL=ResetPasswordPage-Bad7F0pP.js.map
