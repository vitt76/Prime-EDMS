var e=Object.defineProperty,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,u=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,n=(e,n)=>{for(var s in n||(n={}))t.call(n,s)&&u(e,s,n[s]);if(l)for(var s of l(n))a.call(n,s)&&u(e,s,n[s]);return e},s=(e,l,t)=>new Promise((a,u)=>{var n=e=>{try{r(t.next(e))}catch(l){u(l)}},s=e=>{try{r(t.throw(e))}catch(l){u(l)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);r((t=t.apply(e,l)).next())});import{d as r,r as o,c as v}from"./vue-vendor-FOQ7SlVG.js";import{h as i,f as c}from"./index-Bkz-5-QE.js";const f=r("asset",()=>{const e=o([]),l=o(0),t=o(1),a=o(50),u=o(!1),r=o(null),f=o([]),p=o(null),g=o("-date_added"),d=o({}),h=v(()=>{const e=Math.ceil(l.value/a.value);return t.value<e}),y=v(()=>t.value>1),P=v(()=>Math.ceil(l.value/a.value)),m=v(()=>f.value.length),A=v(()=>e.value);function b(o){return s(this,null,function*(){u.value=!0,r.value=null;try{const u=n(n({page:t.value,page_size:a.value,sort:g.value},d.value),o),s=yield i.getAssets(u);e.value=s.results,l.value=s.count,(null==o?void 0:o.page)&&(t.value=o.page)}catch(s){throw r.value=c(s),e.value=[],l.value=0,s}finally{u.value=!1}})}return{assets:e,totalCount:l,currentPage:t,pageSize:a,isLoading:u,error:r,selectedAssets:f,currentAsset:p,sortBy:g,filters:d,hasNextPage:h,hasPreviousPage:y,totalPages:P,selectedCount:m,currentPageAssets:A,fetchAssets:b,getAssetDetail:function(e){return s(this,null,function*(){u.value=!0,r.value=null;try{const l=yield i.getAsset(e);return p.value=l,l}catch(l){throw r.value=c(l),p.value=null,l}finally{u.value=!1}})},nextPage:function(){h.value&&(t.value++,b())},previousPage:function(){y.value&&(t.value--,b())},setPage:function(e){e>=1&&e<=P.value&&(t.value=e,b())},setPageSize:function(e){a.value=Math.min(Math.max(e,1),100),t.value=1,b()},selectAsset:function(e,l=!1){const t=f.value.findIndex(l=>l.id===e.id);-1===t?l?f.value.push(e):f.value=[e]:f.value.splice(t,1)},selectAll:function(){f.value=[...e.value]},clearSelection:function(){f.value=[]},setSortBy:function(e){g.value=e,t.value=1,b()},applyFilters:function(e){d.value=n(n({},d.value),e),t.value=1,b()},clearFilters:function(){d.value={},t.value=1,b()},refresh:function(){b()},uploadAsset:function(e,l){return s(this,null,function*(){return i.uploadAsset(e,{onUploadProgress:null==l?void 0:l.onUploadProgress,signal:null==l?void 0:l.signal})})}}},{persist:{paths:["pageSize","sortBy","filters"]}});export{f as u};
//# sourceMappingURL=assetStore-B6Z4Z7K7.js.map
