var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,a)=>{for(var l in a||(a={}))s.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&i(e,l,a[l]);return e},n=(e,a,l)=>new Promise((t,s)=>{var r=e=>{try{o(l.next(e))}catch(a){s(a)}},i=e=>{try{o(l.throw(e))}catch(a){s(a)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);o((l=l.apply(e,a)).next())});import{b as u,r as d,c,e as m,F as v,h as p,i as _,E as b,t as f,f as y,j as g,n as h,A as k,P as w,C,s as U,l as V,m as $,N as x,w as S,k as j,x as N,u as E}from"./vue-vendor-B11yH1L4.js";import{d as P,e as F,u as q,l as A}from"./index-CEUju959.js";import{u as I}from"./adminStore-BAcaV1Pb.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang--8g8gQXi.js";import{_ as z}from"./Select.vue_vue_type_script_setup_true_lang-8BshTy_O.js";import{_ as L}from"./Badge.vue_vue_type_script_setup_true_lang-Bp_czRtF.js";import{_ as D}from"./Pagination.vue_vue_type_script_setup_true_lang-DJgozKuc.js";import{_ as O}from"./Modal.vue_vue_type_script_setup_true_lang-Cpe0tIsY.js";import{D as B}from"./DeleteConfirmModal-FrXl2jew.js";import{u as M}from"./utils-vendor-BYNnTNyD.js";const T={class:"data-table"},H={key:0,class:"data-table__loading",role:"status","aria-live":"polite"},K=["aria-label"],Y={key:1,class:"data-table__empty",role:"status","aria-live":"polite"},G={key:2,class:"data-table__wrapper"},J=["aria-label"],Q={key:0,class:"data-table__cell data-table__cell--checkbox",scope:"col"},W=["checked","indeterminate"],X=["aria-sort","onClick"],Z=["aria-label"],ee=["aria-label"],ae={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={key:1},se={key:1,class:"data-table__cell data-table__cell--actions",scope:"col"},re={key:0,class:"data-table__cell data-table__cell--checkbox"},ie=["value","checked","onChange","aria-label"],oe={key:1,class:"data-table__cell data-table__cell--actions"},ne=P(u({__name:"DataTable",props:{items:{},columns:{},isLoading:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1},emptyStateText:{default:"No data available"},ariaLabel:{},getRowKey:{type:Function,default:(e,a)=>{var l;return null!=(l=e.id)?l:a}}},emits:["select","sort","action-click"],setup(e,{emit:a}){const l=e,t=a,s=d([]),r=d(""),i=d("asc"),o=c(()=>l.items.length>0&&s.value.length===l.items.length&&l.items.every(e=>s.value.includes(e))),n=c(()=>s.value.length>0&&s.value.length<l.items.length),u=()=>{o.value?s.value=[]:s.value=[...l.items],t("select",s.value)},w=e=>s.value.some(a=>V(a,-1)===V(e,-1)),C=(e,a)=>a.split(".").reduce((e,a)=>null==e?void 0:e[a],e),U=(e,a)=>{if(null==e)return"—";switch(a){case"date":return new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"});case"currency":return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e);case"boolean":return e?"Yes":"No";case"number":return new Intl.NumberFormat("ru-RU").format(e);default:return String(e)}},V=(e,a)=>l.getRowKey(e,a);return(a,l)=>(g(),m("div",T,[e.isLoading?(g(),m("div",H,[(g(),m(v,null,p(5,e=>_("div",{key:e,class:"data-table__skeleton-row","aria-label":`Loading row ${e}`},null,8,K)),64))])):0===e.items.length?(g(),m("div",Y,[_("p",null,f(e.emptyStateText),1),b(a.$slots,"empty-action",{},void 0,!0)])):(g(),m("div",G,[_("table",{class:"data-table__table",role:"table","aria-label":e.ariaLabel||"Data table"},[_("thead",null,[_("tr",null,[e.selectable?(g(),m("th",Q,[_("input",{type:"checkbox",checked:o.value,indeterminate:n.value,onChange:u,"aria-label":"Select all rows"},null,40,W)])):y("",!0),(g(!0),m(v,null,p(e.columns,a=>{return g(),m("th",{key:a.key,class:h(["data-table__cell",`data-table__cell--${a.align||"left"}`]),scope:"col",role:"columnheader","aria-sort":(s=a.key,r.value!==s?"none":"asc"===i.value?"ascending":"descending"),onClick:l=>e.sortable&&!1!==a.sortable&&(e=>{r.value===e?i.value="asc"===i.value?"desc":"asc":(r.value=e,i.value="asc"),t("sort",e,i.value)})(a.key)},[e.sortable&&!1!==a.sortable?(g(),m("button",{key:0,class:"data-table__sort-btn","aria-label":`Sort by ${a.label}`,type:"button"},[k(f(a.label)+" ",1),r.value===a.key?(g(),m("span",{key:0,class:"data-table__sort-icon","aria-label":"Sorted "+("asc"===i.value?"ascending":"descending")},["asc"===i.value?(g(),m("svg",ae,[...l[0]||(l[0]=[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"},null,-1)])])):(g(),m("svg",le,[...l[1]||(l[1]=[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])]))],8,ee)):y("",!0)],8,Z)):(g(),m("span",te,f(a.label),1))],10,X);var s}),128)),a.$slots["row-actions"]?(g(),m("th",se," Actions ")):y("",!0)])]),_("tbody",null,[(g(!0),m(v,null,p(e.items,(l,r)=>(g(),m("tr",{key:V(l,r),class:h({"data-table__row--selected":w(l)})},[e.selectable?(g(),m("td",re,[_("input",{type:"checkbox",value:V(l,r),checked:w(l),onChange:e=>(e=>{const a=s.value.findIndex(a=>V(a,-1)===V(e,-1));a>-1?s.value.splice(a,1):s.value.push(e),t("select",s.value)})(l),"aria-label":`Select row ${r+1}`},null,40,ie)])):y("",!0),(g(!0),m(v,null,p(e.columns,e=>(g(),m("td",{key:e.key,class:h(["data-table__cell",`data-table__cell--${e.align||"left"}`])},[b(a.$slots,`col-${e.key}`,{item:l,value:C(l,e.key),index:r},()=>[k(f(U(C(l,e.key),e.format)),1)],!0)],2))),128)),a.$slots["row-actions"]?(g(),m("td",oe,[b(a.$slots,"row-actions",{item:l,index:r},void 0,!0)])):y("",!0)],2))),128))])],8,J)]))]))}}),[["__scopeId","data-v-8f90276d"]]),ue={class:"create-user-form"},de={class:"form-group"},ce={class:"form-group"},me={class:"form-group"},ve={class:"form-group"},pe={class:"form-group"},_e={class:"form-group"},be={class:"form-group"},fe={class:"checkbox-label"},ye={class:"form-group"},ge={class:"checkbox-label"},he=P(u({__name:"CreateUserModal",emits:["submit","close"],setup(e,{emit:t}){const s=t,r=d(!1),i=w({}),u=w({username:"",email:"",password:"",first_name:"",last_name:"",role:"viewer",is_active:!0,send_invitation:!1}),c=[{value:"admin",label:"Administrator"},{value:"editor",label:"Editor"},{value:"viewer",label:"Viewer"}],m=()=>n(this,null,function*(){if(Object.keys(i).forEach(e=>delete i[e]),u.first_name.trim()||(i.first_name="First name is required"),u.last_name.trim()||(i.last_name="Last name is required"),u.username.trim()||(i.username="Username is required"),u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)||(i.email="Invalid email format"):i.email="Email is required",u.send_invitation||u.password||(i.password="Password is required if not sending invitation"),0===Object.keys(i).length){r.value=!0;try{const r=(e=o({},u),t={password:u.send_invitation?void 0:u.password},a(e,l(t)));s("submit",r)}finally{r.value=!1}var e,t}});return(e,a)=>(g(),C(O,{"is-open":!0,title:"Create User",onClose:a[9]||(a[9]=a=>e.$emit("close")),size:"md"},{footer:U(()=>[V(F,{variant:"ghost",onClick:a[8]||(a[8]=a=>e.$emit("close")),type:"button"},{default:U(()=>[...a[12]||(a[12]=[k(" Cancel ",-1)])]),_:1}),V(F,{variant:"primary",onClick:m,loading:r.value},{default:U(()=>[...a[13]||(a[13]=[k(" Create User ",-1)])]),_:1},8,["loading"])]),default:U(()=>[_("form",ue,[_("div",de,[V(R,{modelValue:u.first_name,"onUpdate:modelValue":a[0]||(a[0]=e=>u.first_name=e),label:"First Name",required:"",error:i.first_name},null,8,["modelValue","error"])]),_("div",ce,[V(R,{modelValue:u.last_name,"onUpdate:modelValue":a[1]||(a[1]=e=>u.last_name=e),label:"Last Name",required:"",error:i.last_name},null,8,["modelValue","error"])]),_("div",me,[V(R,{modelValue:u.username,"onUpdate:modelValue":a[2]||(a[2]=e=>u.username=e),label:"Username",required:"",error:i.username},null,8,["modelValue","error"])]),_("div",ve,[V(R,{modelValue:u.email,"onUpdate:modelValue":a[3]||(a[3]=e=>u.email=e),type:"email",label:"Email",required:"",error:i.email},null,8,["modelValue","error"])]),_("div",pe,[V(R,{modelValue:u.password,"onUpdate:modelValue":a[4]||(a[4]=e=>u.password=e),type:"password",label:"Password",required:!u.send_invitation,error:i.password,hint:"Leave empty to send invitation email"},null,8,["modelValue","required","error"])]),_("div",_e,[V(z,{modelValue:u.role,"onUpdate:modelValue":a[5]||(a[5]=e=>u.role=e),options:c,label:"Role",required:"",error:i.role},null,8,["modelValue","error"])]),_("div",be,[_("label",fe,[$(_("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>u.is_active=e),type:"checkbox",class:"checkbox-input"},null,512),[[x,u.is_active]]),a[10]||(a[10]=_("span",null,"Active",-1))])]),_("div",ye,[_("label",ge,[$(_("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>u.send_invitation=e),type:"checkbox",class:"checkbox-input"},null,512),[[x,u.send_invitation]]),a[11]||(a[11]=_("span",null,"Send invitation email",-1))])])])]),_:1}))}}),[["__scopeId","data-v-9010b822"]]),ke={key:0,class:"edit-user-form"},we={class:"form-group"},Ce={class:"form-group"},Ue={class:"form-group"},Ve={class:"form-group"},$e={class:"form-group"},xe={class:"checkbox-label"},Se=P(u({__name:"EditUserModal",props:{user:{}},emits:["submit","close"],setup(e,{emit:a}){const l=e,t=a,s=d(!1),r=w({}),i=w({first_name:l.user.first_name,last_name:l.user.last_name,email:l.user.email,role:l.user.role,is_active:l.user.is_active}),u=[{value:"admin",label:"Administrator"},{value:"editor",label:"Editor"},{value:"viewer",label:"Viewer"}];S(()=>l.user,e=>{e&&(i.first_name=e.first_name,i.last_name=e.last_name,i.email=e.email,i.role=e.role,i.is_active=e.is_active)},{immediate:!0});const c=()=>n(this,null,function*(){if(Object.keys(r).forEach(e=>delete r[e]),(null==(e=i.first_name)?void 0:e.trim())||(r.first_name="First name is required"),(null==(a=i.last_name)?void 0:a.trim())||(r.last_name="Last name is required"),(null==(l=i.email)?void 0:l.trim())?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(r.email="Invalid email format"):r.email="Email is required",0===Object.keys(r).length){var e,a,l;s.value=!0;try{t("submit",o({},i))}finally{s.value=!1}}});return(a,l)=>(g(),C(O,{"is-open":!0,title:"Edit User",onClose:l[6]||(l[6]=e=>a.$emit("close")),size:"md"},{footer:U(()=>[V(F,{variant:"ghost",onClick:l[5]||(l[5]=e=>a.$emit("close")),type:"button"},{default:U(()=>[...l[8]||(l[8]=[k(" Cancel ",-1)])]),_:1}),V(F,{variant:"primary",onClick:c,loading:s.value},{default:U(()=>[...l[9]||(l[9]=[k(" Update User ",-1)])]),_:1},8,["loading"])]),default:U(()=>[e.user?(g(),m("form",ke,[_("div",we,[V(R,{modelValue:i.first_name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.first_name=e),label:"First Name",required:"",error:r.first_name},null,8,["modelValue","error"])]),_("div",Ce,[V(R,{modelValue:i.last_name,"onUpdate:modelValue":l[1]||(l[1]=e=>i.last_name=e),label:"Last Name",required:"",error:r.last_name},null,8,["modelValue","error"])]),_("div",Ue,[V(R,{modelValue:i.email,"onUpdate:modelValue":l[2]||(l[2]=e=>i.email=e),type:"email",label:"Email",required:"",error:r.email},null,8,["modelValue","error"])]),_("div",Ve,[V(z,{modelValue:i.role,"onUpdate:modelValue":l[3]||(l[3]=e=>i.role=e),options:u,label:"Role",required:"",error:r.role},null,8,["modelValue","error"])]),_("div",$e,[_("label",xe,[$(_("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>i.is_active=e),type:"checkbox",class:"checkbox-input"},null,512),[[x,i.is_active]]),l[7]||(l[7]=_("span",null,"Active",-1))])])])):y("",!0)]),_:1}))}}),[["__scopeId","data-v-332030f7"]]),je={class:"bulk-role-form"},Ne={class:"bulk-role-form__info"},Ee={class:"form-group"},Pe=P(u({__name:"BulkRoleModal",props:{selectedCount:{}},emits:["submit","close"],setup(e,{emit:a}){const l=a,t=d(""),s=w({}),r=[{value:"admin",label:"Administrator"},{value:"editor",label:"Editor"},{value:"viewer",label:"Viewer"}],i=()=>{t.value?l("submit",t.value):s.role="Please select a role"};return(a,l)=>(g(),C(O,{"is-open":!0,title:"Change Role for Selected Users",onClose:l[2]||(l[2]=e=>a.$emit("close")),size:"md"},{footer:U(()=>[V(F,{variant:"ghost",onClick:l[1]||(l[1]=e=>a.$emit("close")),type:"button"},{default:U(()=>[...l[3]||(l[3]=[k(" Cancel ",-1)])]),_:1}),V(F,{variant:"primary",onClick:i,disabled:!t.value},{default:U(()=>[...l[4]||(l[4]=[k(" Update Role ",-1)])]),_:1},8,["disabled"])]),default:U(()=>[_("form",je,[_("p",Ne," Change role for "+f(e.selectedCount)+" selected user(s) ",1),_("div",Ee,[V(z,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),options:r,label:"New Role",required:"",error:s.role},null,8,["modelValue","error"])])])]),_:1}))}}),[["__scopeId","data-v-028a670e"]]),Fe={class:"user-management"},qe={class:"user-management__toolbar"},Ae={class:"user-management__search"},Ie={key:0,class:"user-management__bulk-actions",role:"toolbar","aria-label":"Bulk actions"},Re={class:"user-management__bulk-count"},ze=["src","alt"],Le={class:"user-name"},De={class:"user-name__full"},Oe={class:"user-name__username"},Be={class:"user-management__actions"},Me=P(u({__name:"UserManagementPage",setup(e){const a=N(),l=q(),t=I(),s=A(),r=d(""),i=d(1),o=d(50),u=d(""),v=d("asc"),p=d({status:"",role:""}),b=d(!1),h=d(!1),w=d(null),$=d(null),x=d(!1),P=c(()=>l.hasPermission.value("admin.user_create")),O=c(()=>l.hasPermission.value("admin.user_edit")),T=c(()=>l.hasPermission.value("admin.user_delete")),H=c(()=>{const e=t.selectedUsers;return t.users.filter(a=>e.includes(a.id))}),K=c(()=>t.users),Y=c(()=>t.totalUsersCount),G=[{key:"avatar",label:"",width:44,sortable:!1},{key:"name",label:"Name",align:"left",sortable:!0},{key:"email",label:"Email",align:"left",sortable:!0},{key:"role",label:"Role",align:"center",sortable:!0},{key:"is_active",label:"Status",align:"center",sortable:!0},{key:"date_joined",label:"Created",align:"left",sortable:!0,format:"date"},{key:"last_login",label:"Last Login",align:"left",sortable:!0,format:"date"}],J=[{value:"",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],Q=[{value:"admin",label:"Administrator"},{value:"editor",label:"Editor"},{value:"viewer",label:"Viewer"}],W=()=>n(this,null,function*(){b.value=!0;try{const e={page:i.value,page_size:o.value,search:r.value||void 0,status:p.value.status||void 0,role:p.value.role||void 0};yield t.fetchUsers(e)}catch(e){s.addNotification({type:"error",title:"Error",message:"Failed to load users. Please try again."})}finally{b.value=!1}}),X=M(()=>{i.value=1,W()},300),Z=()=>{i.value=1,W()},ee=(e,a)=>{u.value=e,v.value=a,i.value=1,W()},ae=e=>{t.selectUsers(e.map(e=>e.id))},le=()=>{t.selectUsers([])},te=e=>{i.value=e,W()},se=e=>n(this,null,function*(){try{yield t.createUser(e),h.value=!1,s.addNotification({type:"success",title:"Success",message:"User created successfully"}),yield W()}catch(a){s.addNotification({type:"error",title:"Error",message:"Failed to create user. Please try again."})}}),re=e=>n(this,null,function*(){if(w.value)try{yield t.updateUser(w.value.id,e),w.value=null,s.addNotification({type:"success",title:"Success",message:"User updated successfully"}),yield W()}catch(a){s.addNotification({type:"error",title:"Error",message:"Failed to update user. Please try again."})}}),ie=()=>n(this,null,function*(){if($.value)try{yield t.deleteUser($.value.id),$.value=null,s.addNotification({type:"success",title:"Success",message:"User deleted successfully"}),yield W()}catch(e){s.addNotification({type:"error",title:"Error",message:"Failed to delete user. Please try again."})}}),oe=(e,a)=>n(this,null,function*(){try{yield t.updateUser(e.id,{role:a}),s.addNotification({type:"success",title:"Success",message:`User role updated to ${ce(a)}`}),yield W()}catch(l){s.addNotification({type:"error",title:"Error",message:"Failed to update user role. Please try again."})}}),ue=()=>n(this,null,function*(){if(confirm(`Delete ${H.value.length} users? This action cannot be undone.`))try{yield t.bulkUserOperation({ids:H.value.map(e=>e.id),action:"delete"}),t.selectUsers([]),s.addNotification({type:"success",title:"Success",message:`${H.value.length} users deleted successfully`}),yield W()}catch(e){s.addNotification({type:"error",title:"Error",message:"Failed to delete users. Please try again."})}}),de=e=>n(this,null,function*(){try{yield t.bulkUserOperation({ids:H.value.map(e=>e.id),action:"change_role",data:{role:e}}),t.selectUsers([]),x.value=!1,s.addNotification({type:"success",title:"Success",message:`Role updated for ${H.value.length} users`}),yield W()}catch(a){s.addNotification({type:"error",title:"Error",message:"Failed to update user roles. Please try again."})}}),ce=e=>({admin:"Administrator",editor:"Editor",viewer:"Viewer"}[e]||e),me=e=>e?new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"}):"—";return j(()=>n(this,null,function*(){l.hasPermission.value("admin.user_manage")?yield W():yield a.push({name:"forbidden"})})),S(()=>t.usersFilters,()=>{p.value={status:t.usersFilters.status,role:t.usersFilters.role},r.value=t.usersFilters.search},{immediate:!0}),(e,a)=>(g(),m("div",Fe,[_("div",qe,[P.value?(g(),C(F,{key:0,variant:"primary",onClick:a[0]||(a[0]=e=>h.value=!0),"aria-label":"Create new user"},{default:U(()=>[...a[9]||(a[9]=[_("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),k(" Add User ",-1)])]),_:1})):y("",!0),_("div",Ae,[V(R,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=e=>r.value=e),type:"search",placeholder:"Search users...",onInput:E(X),"aria-label":"Search users"},null,8,["modelValue","onInput"])]),V(z,{modelValue:p.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>p.value.status=e),options:J,placeholder:"All statuses",onChange:Z,"aria-label":"Filter by status"},null,8,["modelValue"]),V(z,{modelValue:p.value.role,"onUpdate:modelValue":a[3]||(a[3]=e=>p.value.role=e),options:Q,placeholder:"All roles",onChange:Z,"aria-label":"Filter by role"},null,8,["modelValue"])]),H.value.length>0?(g(),m("div",Ie,[_("span",Re,f(H.value.length)+" selected ",1),V(F,{variant:"secondary",size:"sm",onClick:ue,disabled:b.value,"aria-label":"Delete selected users"},{default:U(()=>[...a[10]||(a[10]=[k(" Delete Selected ",-1)])]),_:1},8,["disabled"]),V(F,{variant:"secondary",size:"sm",onClick:a[4]||(a[4]=e=>x.value=!0),disabled:b.value,"aria-label":"Change role for selected users"},{default:U(()=>[...a[11]||(a[11]=[k(" Change Role ",-1)])]),_:1},8,["disabled"]),V(F,{variant:"ghost",size:"sm",onClick:le,"aria-label":"Clear selection"},{default:U(()=>[...a[12]||(a[12]=[k(" Clear ",-1)])]),_:1})])):y("",!0),V(ne,{items:K.value,columns:G,"is-loading":b.value,selectable:!0,sortable:!0,"empty-state-text":"No users found","aria-label":"Users management table",onSelect:ae,onSort:ee},{"col-avatar":U(({item:e})=>[_("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(`${e.first_name}+${e.last_name}`)}&size=32&background=random`,alt:`${e.first_name} ${e.last_name}`,class:"user-avatar",loading:"lazy"},null,8,ze)]),"col-name":U(({item:e})=>[_("div",Le,[_("span",De,f(e.first_name)+" "+f(e.last_name),1),_("span",Oe,"@"+f(e.username),1)])]),"col-role":U(({item:e})=>{return[O.value?(g(),C(z,{key:0,"model-value":e.role,options:Q,size:"sm",onChange:a=>oe(e,a),"aria-label":`Change role for ${e.first_name} ${e.last_name}`},null,8,["model-value","onChange","aria-label"])):(g(),C(L,{key:1,variant:(a=e.role,{admin:"info",editor:"success",viewer:"warning"}[a]||"warning")},{default:U(()=>[k(f(ce(e.role)),1)]),_:2},1032,["variant"]))];var a}),"col-is_active":U(({item:e})=>[V(L,{variant:e.is_active?"success":"warning"},{default:U(()=>[k(f(e.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),"col-date_joined":U(({item:e,value:a})=>[k(f(me(a)),1)]),"col-last_login":U(({item:e,value:a})=>[k(f(a?me(a):"Never"),1)]),"row-actions":U(({item:e})=>{var t;return[_("div",Be,[O.value?(g(),C(F,{key:0,variant:"ghost",size:"sm",onClick:a=>{return l=e,void(w.value=l);var l},"aria-label":"Edit user"},{default:U(()=>[...a[13]||(a[13]=[_("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),k(" Edit ",-1)])]),_:1},8,["onClick"])):y("",!0),T.value?(g(),C(F,{key:1,variant:"ghost",size:"sm",disabled:e.is_superuser&&!(null==(t=E(l).user)?void 0:t.is_superuser),onClick:a=>{return l=e,void($.value=l);var l},"aria-label":`Delete user ${e.first_name} ${e.last_name}`},{default:U(()=>[...a[14]||(a[14]=[_("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),k(" Delete ",-1)])]),_:1},8,["disabled","onClick","aria-label"])):y("",!0)])]}),_:1},8,["items","is-loading"]),V(D,{"current-page":i.value,"total-items":Y.value,"page-size":o.value,onPageChange:te},null,8,["current-page","total-items","page-size"]),h.value?(g(),C(he,{key:1,onSubmit:se,onClose:a[5]||(a[5]=e=>h.value=!1)})):y("",!0),w.value?(g(),C(Se,{key:2,user:w.value,onSubmit:re,onClose:a[6]||(a[6]=e=>w.value=null)},null,8,["user"])):y("",!0),$.value?(g(),C(B,{key:3,title:`Delete User: ${$.value.first_name} ${$.value.last_name}`,message:"This action cannot be undone. Are you sure you want to delete this user?",onConfirm:ie,onCancel:a[7]||(a[7]=e=>$.value=null)},null,8,["title"])):y("",!0),x.value?(g(),C(Pe,{key:4,"selected-count":H.value.length,onSubmit:de,onClose:a[8]||(a[8]=e=>x.value=!1)},null,8,["selected-count"])):y("",!0)]))}}),[["__scopeId","data-v-32e0c017"]]);export{Me as default};
//# sourceMappingURL=UserManagementPage-ChViErh3.js.map
