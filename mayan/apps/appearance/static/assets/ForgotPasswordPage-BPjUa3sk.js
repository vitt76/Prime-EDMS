import{b as a,r as e,L as l,e as s,i as r,f as t,q as u,m as i,A as o,v as n,t as v,j as d}from"./vue-vendor-B11yH1L4.js";import{g as m,f as c,d as p}from"./index-CEUju959.js";import"./utils-vendor-BYNnTNyD.js";const f={class:"auth-page"},_={class:"auth-card",role:"main","aria-labelledby":"forgot-password-title"},h=["disabled"],y={key:0,id:"email-error",class:"auth-form__error"},b=["disabled"],w={key:0},g={key:1},k={key:0,class:"auth-form__success"},x={key:1,class:"auth-form__error auth-form__error--global"},q=p(a({__name:"ForgotPasswordPage",setup(a){const p=e(""),q=e(""),E=e(""),I=e(!1),P=e(!1),j=e(0);let F=null;const S=()=>{return a=this,e=null,l=function*(){if(((a=p.value)?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?(q.value="",1):(q.value="Enter a valid email address",0):(q.value="Email is required",0))&&!P.value){var a;I.value=!0,E.value="";try{yield m.requestPasswordReset(p.value),P.value=!0,j.value=60,F=setInterval(()=>{j.value-=1,j.value<=0&&(j.value=0,F&&(clearInterval(F),F=null))},1e3)}catch(e){E.value=c(e)}finally{I.value=!1}}},new Promise((s,r)=>{var t=a=>{try{i(l.next(a))}catch(e){r(e)}},u=a=>{try{i(l.throw(a))}catch(e){r(e)}},i=a=>a.done?s(a.value):Promise.resolve(a.value).then(t,u);i((l=l.apply(a,e)).next())});var a,e,l};return l(()=>{F&&clearInterval(F)}),(a,e)=>(d(),s("div",f,[r("main",_,[e[2]||(e[2]=r("h1",{id:"forgot-password-title",class:"auth-card__title"},"Forgot password",-1)),e[3]||(e[3]=r("p",{class:"auth-card__description"}," Enter your email and we will send a link to reset your password. ",-1)),r("form",{class:"auth-form",onSubmit:u(S,["prevent"]),novalidate:""},[e[1]||(e[1]=r("label",{class:"auth-form__label",for:"email"},[o(" Email "),r("span",{class:"auth-form__required"},"*")],-1)),i(r("input",{id:"email",type:"email",class:"auth-form__input","onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),disabled:I.value||j.value>0,required:"",autocomplete:"email","aria-invalid":"emailError ? true : false","aria-describedby":"email-error"},null,8,h),[[n,p.value]]),q.value?(d(),s("p",y,v(q.value),1)):t("",!0),r("button",{type:"submit",class:"auth-form__submit",disabled:I.value||j.value>0||P.value,"aria-live":"polite"},[j.value>0?(d(),s("span",w," Try again in "+v(j.value)+"s ",1)):(d(),s("span",g,"Send reset link"))],8,b)],32),P.value?(d(),s("p",k," If this email exists, we sent a reset link. Check your inbox. ")):t("",!0),E.value?(d(),s("div",x,v(E.value),1)):t("",!0)])]))}}),[["__scopeId","data-v-ec619bfe"]]);export{q as default};
//# sourceMappingURL=ForgotPasswordPage-BPjUa3sk.js.map
