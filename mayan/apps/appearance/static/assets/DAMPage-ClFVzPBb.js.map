{"version":3,"file":"DAMPage-ClFVzPBb.js","sources":["../../src/components/DAM/BulkActions.vue","../../src/components/DAM/BulkTagModal.vue","../../src/components/DAM/BulkMoveModal.vue","../../src/components/DAM/BulkDeleteModal.vue","../../src/components/DAM/BulkDownloadModal.vue","../../src/components/DAM/BulkShareModal.vue","../../src/components/DAM/GalleryView.vue","../../src/pages/DAMPage.vue"],"sourcesContent":["<template>\n  <Transition\n    enter-active-class=\"transition ease-out duration-200\"\n    enter-from-class=\"opacity-0 translate-y-2\"\n    enter-to-class=\"opacity-100 translate-y-0\"\n    leave-active-class=\"transition ease-in duration-150\"\n    leave-from-class=\"opacity-100 translate-y-0\"\n    leave-to-class=\"opacity-0 translate-y-2\"\n  >\n    <div\n      v-if=\"selectedCount > 0\"\n      class=\"bulk-actions fixed bottom-0 left-0 right-0 bg-neutral-0 dark:bg-neutral-0 border-t border-neutral-300 dark:border-neutral-300 shadow-lg z-40\"\n      role=\"toolbar\"\n      aria-label=\"Массовые операции с активами\"\n    >\n      <div class=\"max-w-7xl mx-auto px-4 py-3\">\n        <div class=\"flex items-center justify-between\">\n          <!-- Selection Counter -->\n          <div class=\"flex items-center gap-4\">\n            <span class=\"text-sm font-medium text-neutral-900 dark:text-neutral-900\">\n              Выбрано: <span class=\"font-bold\">{{ selectedCount }}</span>\n            </span>\n            <button\n              class=\"text-sm text-neutral-600 dark:text-neutral-600 hover:text-neutral-900 dark:hover:text-neutral-900 transition-colors min-h-[44px] min-w-[120px] px-2\"\n              @click=\"$emit('clear-selection')\"\n              type=\"button\"\n              aria-label=\"Снять выделение со всех активов\"\n            >\n              Снять выделение\n            </button>\n          </div>\n\n          <!-- Action Buttons -->\n          <div class=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              @click=\"$emit('tag')\"\n              aria-label=\"Добавить теги к выбранным активам\"\n            >\n              <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z\"\n                />\n              </svg>\n              <span class=\"sr-only sm:not-sr-only\">Теги</span>\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              @click=\"$emit('move')\"\n              aria-label=\"Переместить выбранные активы\"\n            >\n              <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M3 10h18M7 15l1-1m8 0l1-1m-9 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                />\n              </svg>\n              <span class=\"sr-only sm:not-sr-only\">Переместить</span>\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              @click=\"$emit('download')\"\n              aria-label=\"Скачать выбранные активы\"\n            >\n              <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\n                />\n              </svg>\n              <span class=\"sr-only sm:not-sr-only\">Скачать</span>\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              @click=\"$emit('share')\"\n              aria-label=\"Поделиться выбранными активами\"\n            >\n              <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.552 3.546a2 2 0 002.938-2.187l.546-2.59A4.998 4.998 0 0017 12c0-.482-.114-.938-.316-1.342m0 2.684L12.448 8.454a2 2 0 00-2.938-2.187l-.546 2.59A4.998 4.998 0 007 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684\"\n                />\n              </svg>\n              <span class=\"sr-only sm:not-sr-only\">Поделиться</span>\n            </Button>\n            <Button\n              variant=\"danger\"\n              size=\"sm\"\n              @click=\"$emit('delete')\"\n              aria-label=\"Удалить выбранные активы\"\n            >\n              <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                />\n              </svg>\n              <span class=\"sr-only sm:not-sr-only\">Удалить</span>\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from '@/components/Common/Button.vue'\n\ninterface Props {\n  selectedCount: number\n}\n\ndefineProps<Props>()\n\ndefineEmits<{\n  tag: []\n  move: []\n  download: []\n  share: []\n  delete: []\n  'clear-selection': []\n}>()\n</script>\n\n<style scoped>\n.bulk-actions {\n  /* Fixed at bottom with proper spacing */\n  margin-left: var(--sidebar-width, 0);\n  transition: margin-left 0.3s ease;\n}\n\n@media (max-width: 1024px) {\n  .bulk-actions {\n    margin-left: 0;\n  }\n}\n</style>\n\n","<template>\r\n  <Modal\r\n    :is-open=\"isOpen\"\r\n    size=\"md\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <template #header>\r\n      <h2 class=\"text-lg font-semibold text-neutral-900 dark:text-neutral-900\">\r\n        Массовое добавление тегов\r\n      </h2>\r\n    </template>\r\n\r\n    <template #default>\r\n      <div class=\"space-y-4\">\r\n        <!-- Operation Selector -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Операция\r\n          </label>\r\n          <select\r\n            v-model=\"operation\"\r\n            class=\"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n          >\r\n            <option value=\"add\">Добавить теги</option>\r\n            <option value=\"remove\">Удалить теги</option>\r\n            <option value=\"replace\">Заменить все теги</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Tag Input -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Теги\r\n          </label>\r\n          <TagInput\r\n            v-model=\"tags\"\r\n            :suggestions=\"tagSuggestions\"\r\n            placeholder=\"Введите теги...\"\r\n            :allow-custom=\"true\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Info -->\r\n        <div class=\"p-3 bg-neutral-50 dark:bg-neutral-50 rounded-md\">\r\n          <p class=\"text-sm text-neutral-600 dark:text-neutral-600\">\r\n            Операция будет применена к <strong>{{ selectedCount }}</strong> выбранным активам.\r\n          </p>\r\n        </div>\r\n\r\n        <!-- Progress (if processing) -->\r\n        <div v-if=\"isProcessing\" class=\"space-y-2\">\r\n          <div class=\"flex items-center justify-between text-sm\">\r\n            <span class=\"text-neutral-600 dark:text-neutral-600\">Обработка...</span>\r\n            <span class=\"text-neutral-900 dark:text-neutral-900 font-medium\">\r\n              {{ processedCount }} / {{ selectedCount }}\r\n            </span>\r\n          </div>\r\n          <div class=\"w-full bg-neutral-200 dark:bg-neutral-200 rounded-full h-2\">\r\n            <div\r\n              class=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\r\n              :style=\"{ width: `${(processedCount / selectedCount) * 100}%` }\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Error Display -->\r\n        <div v-if=\"errors.length > 0\" class=\"p-3 bg-error-50 dark:bg-error-50 rounded-md\">\r\n          <p class=\"text-sm font-medium text-error mb-2\">Ошибки:</p>\r\n          <ul class=\"text-sm text-error space-y-1\">\r\n            <li v-for=\"(error, index) in errors\" :key=\"index\">\r\n              {{ error }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n    <template #footer>\r\n      <div class=\"flex justify-end gap-2\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"md\"\r\n          @click=\"$emit('close')\"\r\n          :disabled=\"isProcessing\"\r\n        >\r\n          Отмена\r\n        </Button>\r\n        <Button\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n          @click=\"handleApply\"\r\n          :disabled=\"tags.length === 0 || isProcessing\"\r\n        >\r\n          <span v-if=\"!isProcessing\">Применить</span>\r\n          <span v-else>Обработка...</span>\r\n        </Button>\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue'\r\nimport Modal from '@/components/Common/Modal.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\nimport TagInput from '@/components/Common/TagInput.vue'\r\nimport { assetService } from '@/services/assetService'\r\nimport { formatApiError } from '@/utils/errors'\r\n\r\ninterface Props {\r\n  isOpen: boolean\r\n  selectedIds: number[]\r\n  tagSuggestions?: string[]\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  tagSuggestions: () => []\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  close: []\r\n  success: [result: { updated: number; failed: number }]\r\n}>()\r\n\r\nconst operation = ref<'add' | 'remove' | 'replace'>('add')\r\nconst tags = ref<string[]>([])\r\nconst isProcessing = ref(false)\r\nconst processedCount = ref(0)\r\nconst errors = ref<string[]>([])\r\n\r\nconst selectedCount = computed(() => props.selectedIds.length)\r\n\r\n// Reset on open\r\nwatch(\r\n  () => props.isOpen,\r\n  (isOpen) => {\r\n    if (isOpen) {\r\n      operation.value = 'add'\r\n      tags.value = []\r\n      isProcessing.value = false\r\n      processedCount.value = 0\r\n      errors.value = []\r\n    }\r\n  }\r\n)\r\n\r\nasync function handleApply() {\r\n  if (tags.value.length === 0) return\r\n\r\n  isProcessing.value = true\r\n  processedCount.value = 0\r\n  errors.value = []\r\n\r\n  try {\r\n    const action = operation.value === 'add' ? 'add_tags' : operation.value === 'remove' ? 'remove_tags' : 'add_tags'\r\n    const data = operation.value === 'replace' ? { tags: tags.value, replace: true } : { tags: tags.value }\r\n\r\n    const result = await assetService.bulkOperation({\r\n      ids: props.selectedIds,\r\n      action: action as 'add_tags' | 'remove_tags',\r\n      data\r\n    })\r\n\r\n    if (result.success) {\r\n      processedCount.value = result.updated\r\n      if (result.errors && result.errors.length > 0) {\r\n        errors.value = result.errors.map((e) => `Asset ${e.id}: ${e.error}`)\r\n      }\r\n      emit('success', { updated: result.updated, failed: result.failed })\r\n      // Close modal after short delay to show success\r\n      setTimeout(() => {\r\n        emit('close')\r\n      }, 1000)\r\n    } else {\r\n      errors.value = ['Операция не удалась']\r\n    }\r\n  } catch (err) {\r\n    errors.value = [formatApiError(err)]\r\n  } finally {\r\n    isProcessing.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n","<template>\r\n  <Modal\r\n    :is-open=\"isOpen\"\r\n    size=\"md\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <template #header>\r\n      <h2 class=\"text-lg font-semibold text-neutral-900 dark:text-neutral-900\">\r\n        Переместить активы\r\n      </h2>\r\n    </template>\r\n\r\n    <template #default>\r\n      <div class=\"space-y-4\">\r\n        <!-- Collection Selector -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Коллекция назначения\r\n          </label>\r\n          <select\r\n            v-model=\"selectedCollection\"\r\n            class=\"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n          >\r\n            <option value=\"\">Выберите коллекцию...</option>\r\n            <option v-for=\"collection in collections\" :key=\"collection.id\" :value=\"collection.id\">\r\n              {{ collection.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Create New Collection Option -->\r\n        <div>\r\n          <button\r\n            class=\"text-sm text-primary-500 hover:text-primary-600 transition-colors\"\r\n            @click=\"showNewCollectionInput = !showNewCollectionInput\"\r\n          >\r\n            + Создать новую коллекцию\r\n          </button>\r\n          <input\r\n            v-if=\"showNewCollectionInput\"\r\n            v-model=\"newCollectionName\"\r\n            type=\"text\"\r\n            placeholder=\"Название коллекции\"\r\n            class=\"mt-2 w-full px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n            @keydown.enter=\"createAndSelectCollection\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Info -->\r\n        <div class=\"p-3 bg-neutral-50 dark:bg-neutral-50 rounded-md\">\r\n          <p class=\"text-sm text-neutral-600 dark:text-neutral-600\">\r\n            <strong>{{ selectedCount }}</strong> активов будет перемещено в выбранную коллекцию.\r\n          </p>\r\n        </div>\r\n\r\n        <!-- Progress -->\r\n        <div v-if=\"isProcessing\" class=\"space-y-2\">\r\n          <div class=\"flex items-center justify-between text-sm\">\r\n            <span class=\"text-neutral-600 dark:text-neutral-600\">Перемещение...</span>\r\n            <span class=\"text-neutral-900 dark:text-neutral-900 font-medium\">\r\n              {{ processedCount }} / {{ selectedCount }}\r\n            </span>\r\n          </div>\r\n          <div class=\"w-full bg-neutral-200 dark:bg-neutral-200 rounded-full h-2\">\r\n            <div\r\n              class=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\r\n              :style=\"{ width: `${(processedCount / selectedCount) * 100}%` }\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Error Display -->\r\n        <div v-if=\"errors.length > 0\" class=\"p-3 bg-error-50 dark:bg-error-50 rounded-md\">\r\n          <p class=\"text-sm font-medium text-error mb-2\">Ошибки:</p>\r\n          <ul class=\"text-sm text-error space-y-1\">\r\n            <li v-for=\"(error, index) in errors\" :key=\"index\">\r\n              {{ error }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n    <template #footer>\r\n      <div class=\"flex justify-end gap-2\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"md\"\r\n          @click=\"$emit('close')\"\r\n          :disabled=\"isProcessing\"\r\n        >\r\n          Отмена\r\n        </Button>\r\n        <Button\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n          @click=\"handleMove\"\r\n          :disabled=\"!selectedCollection || isProcessing\"\r\n        >\r\n          <span v-if=\"!isProcessing\">Переместить</span>\r\n          <span v-else>Обработка...</span>\r\n        </Button>\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue'\r\nimport Modal from '@/components/Common/Modal.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\nimport { assetService } from '@/services/assetService'\r\nimport { formatApiError } from '@/utils/errors'\r\n\r\ninterface Collection {\r\n  id: number\r\n  name: string\r\n}\r\n\r\ninterface Props {\r\n  isOpen: boolean\r\n  selectedIds: number[]\r\n  collections?: Collection[]\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  collections: () => []\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  close: []\r\n  success: [result: { updated: number; failed: number }]\r\n}>()\r\n\r\nconst selectedCollection = ref<number | ''>('')\r\nconst showNewCollectionInput = ref(false)\r\nconst newCollectionName = ref('')\r\nconst isProcessing = ref(false)\r\nconst processedCount = ref(0)\r\nconst errors = ref<string[]>([])\r\n\r\nconst selectedCount = computed(() => props.selectedIds.length)\r\n\r\n// Reset on open\r\nwatch(\r\n  () => props.isOpen,\r\n  (isOpen) => {\r\n    if (isOpen) {\r\n      selectedCollection.value = ''\r\n      showNewCollectionInput.value = false\r\n      newCollectionName.value = ''\r\n      isProcessing.value = false\r\n      processedCount.value = 0\r\n      errors.value = []\r\n    }\r\n  }\r\n)\r\n\r\nfunction createAndSelectCollection() {\r\n  if (newCollectionName.value.trim()) {\r\n    // TODO: Create collection via API\r\n    // For now, just use the name as a placeholder\r\n    selectedCollection.value = -1 // Temporary ID\r\n    showNewCollectionInput.value = false\r\n  }\r\n}\r\n\r\nasync function handleMove() {\r\n  if (!selectedCollection.value) return\r\n\r\n  isProcessing.value = true\r\n  processedCount.value = 0\r\n  errors.value = []\r\n\r\n  try {\r\n    const collectionId = selectedCollection.value === -1 ? newCollectionName.value : selectedCollection.value\r\n\r\n    const result = await assetService.bulkOperation({\r\n      ids: props.selectedIds,\r\n      action: 'move',\r\n      data: { collection_id: collectionId }\r\n    })\r\n\r\n    if (result.success) {\r\n      processedCount.value = result.updated\r\n      if (result.errors && result.errors.length > 0) {\r\n        errors.value = result.errors.map((e) => `Asset ${e.id}: ${e.error}`)\r\n      }\r\n      emit('success', { updated: result.updated, failed: result.failed })\r\n      setTimeout(() => {\r\n        emit('close')\r\n      }, 1000)\r\n    } else {\r\n      errors.value = ['Операция не удалась']\r\n    }\r\n  } catch (err) {\r\n    errors.value = [formatApiError(err)]\r\n  } finally {\r\n    isProcessing.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n","<template>\r\n  <Modal\r\n    :is-open=\"isOpen\"\r\n    size=\"md\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <template #header>\r\n      <h2 class=\"text-lg font-semibold text-neutral-900 dark:text-neutral-900\">\r\n        Удаление активов\r\n      </h2>\r\n    </template>\r\n\r\n    <template #default>\r\n      <div class=\"space-y-4\">\r\n        <!-- Warning -->\r\n        <div class=\"p-4 bg-error-50 dark:bg-error-50 rounded-md border border-error-200 dark:border-error-200\">\r\n          <div class=\"flex items-start gap-3\">\r\n            <svg\r\n              class=\"w-6 h-6 text-error flex-shrink-0 mt-0.5\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\r\n              />\r\n            </svg>\r\n            <div>\r\n              <p class=\"text-sm font-medium text-error mb-1\">\r\n                Внимание! Это действие нельзя отменить.\r\n              </p>\r\n              <p class=\"text-sm text-error\">\r\n                Вы собираетесь удалить <strong>{{ selectedCount }}</strong> активов. Это действие\r\n                необратимо.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Confirmation Checkbox -->\r\n        <div class=\"flex items-start gap-2\">\r\n          <input\r\n            id=\"confirm-delete\"\r\n            v-model=\"confirmed\"\r\n            type=\"checkbox\"\r\n            class=\"mt-1 w-4 h-4 rounded border-neutral-300 text-error focus:ring-error\"\r\n          />\r\n          <label for=\"confirm-delete\" class=\"text-sm text-neutral-700 dark:text-neutral-700\">\r\n            Я понимаю, что это действие нельзя отменить\r\n          </label>\r\n        </div>\r\n\r\n        <!-- Progress -->\r\n        <div v-if=\"isProcessing\" class=\"space-y-2\">\r\n          <div class=\"flex items-center justify-between text-sm\">\r\n            <span class=\"text-neutral-600 dark:text-neutral-600\">Удаление...</span>\r\n            <span class=\"text-neutral-900 dark:text-neutral-900 font-medium\">\r\n              {{ processedCount }} / {{ selectedCount }}\r\n            </span>\r\n          </div>\r\n          <div class=\"w-full bg-neutral-200 dark:bg-neutral-200 rounded-full h-2\">\r\n            <div\r\n              class=\"bg-error h-2 rounded-full transition-all duration-300\"\r\n              :style=\"{ width: `${(processedCount / selectedCount) * 100}%` }\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Error Display -->\r\n        <div v-if=\"errors.length > 0\" class=\"p-3 bg-error-50 dark:bg-error-50 rounded-md\">\r\n          <p class=\"text-sm font-medium text-error mb-2\">Ошибки:</p>\r\n          <ul class=\"text-sm text-error space-y-1\">\r\n            <li v-for=\"(error, index) in errors\" :key=\"index\">\r\n              {{ error }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n    <template #footer>\r\n      <div class=\"flex justify-end gap-2\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"md\"\r\n          @click=\"$emit('close')\"\r\n          :disabled=\"isProcessing\"\r\n        >\r\n          Отмена\r\n        </Button>\r\n        <Button\r\n          variant=\"danger\"\r\n          size=\"md\"\r\n          @click=\"handleDelete\"\r\n          :disabled=\"!confirmed || isProcessing\"\r\n        >\r\n          <span v-if=\"!isProcessing\">Удалить навсегда</span>\r\n          <span v-else>Удаление...</span>\r\n        </Button>\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue'\r\nimport Modal from '@/components/Common/Modal.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\nimport { assetService } from '@/services/assetService'\r\nimport { formatApiError } from '@/utils/errors'\r\n\r\ninterface Props {\r\n  isOpen: boolean\r\n  selectedIds: number[]\r\n}\r\n\r\nconst props = defineProps<Props>()\r\n\r\nconst emit = defineEmits<{\r\n  close: []\r\n  success: [result: { updated: number; failed: number }]\r\n}>()\r\n\r\nconst confirmed = ref(false)\r\nconst isProcessing = ref(false)\r\nconst processedCount = ref(0)\r\nconst errors = ref<string[]>([])\r\n\r\nconst selectedCount = computed(() => props.selectedIds.length)\r\n\r\n// Reset on open\r\nwatch(\r\n  () => props.isOpen,\r\n  (isOpen) => {\r\n    if (isOpen) {\r\n      confirmed.value = false\r\n      isProcessing.value = false\r\n      processedCount.value = 0\r\n      errors.value = []\r\n    }\r\n  }\r\n)\r\n\r\nasync function handleDelete() {\r\n  if (!confirmed.value) return\r\n\r\n  isProcessing.value = true\r\n  processedCount.value = 0\r\n  errors.value = []\r\n\r\n  try {\r\n    const result = await assetService.bulkOperation({\r\n      ids: props.selectedIds,\r\n      action: 'delete'\r\n    })\r\n\r\n    if (result.success) {\r\n      processedCount.value = result.updated\r\n      if (result.errors && result.errors.length > 0) {\r\n        errors.value = result.errors.map((e) => `Asset ${e.id}: ${e.error}`)\r\n      }\r\n      emit('success', { updated: result.updated, failed: result.failed })\r\n      setTimeout(() => {\r\n        emit('close')\r\n      }, 1000)\r\n    } else {\r\n      errors.value = ['Операция не удалась']\r\n    }\r\n  } catch (err) {\r\n    errors.value = [formatApiError(err)]\r\n  } finally {\r\n    isProcessing.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n","<template>\r\n  <Modal\r\n    :is-open=\"isOpen\"\r\n    size=\"md\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <template #header>\r\n      <h2 class=\"text-lg font-semibold text-neutral-900 dark:text-neutral-900\">\r\n        Скачать активы\r\n      </h2>\r\n    </template>\r\n\r\n    <template #default>\r\n      <div class=\"space-y-4\">\r\n        <!-- Format Selection -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Формат архива\r\n          </label>\r\n          <select\r\n            v-model=\"format\"\r\n            class=\"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n          >\r\n            <option value=\"zip\">ZIP архив</option>\r\n            <option value=\"tar\">TAR архив</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Options -->\r\n        <div class=\"space-y-2\">\r\n          <label class=\"flex items-center gap-2 cursor-pointer\">\r\n            <input\r\n              v-model=\"includeMetadata\"\r\n              type=\"checkbox\"\r\n              class=\"w-4 h-4 rounded border-neutral-300 text-primary-500 focus:ring-primary-500\"\r\n            />\r\n            <span class=\"text-sm text-neutral-700 dark:text-neutral-700\">\r\n              Включить метаданные (JSON файл)\r\n            </span>\r\n          </label>\r\n          <label class=\"flex items-center gap-2 cursor-pointer\">\r\n            <input\r\n              v-model=\"preserveStructure\"\r\n              type=\"checkbox\"\r\n              class=\"w-4 h-4 rounded border-neutral-300 text-primary-500 focus:ring-primary-500\"\r\n            />\r\n            <span class=\"text-sm text-neutral-700 dark:text-neutral-700\">\r\n              Сохранить структуру папок\r\n            </span>\r\n          </label>\r\n        </div>\r\n\r\n        <!-- Info -->\r\n        <div class=\"p-3 bg-neutral-50 dark:bg-neutral-50 rounded-md\">\r\n          <p class=\"text-sm text-neutral-600 dark:text-neutral-600\">\r\n            Будет создан архив с <strong>{{ selectedCount }}</strong> активами.\r\n          </p>\r\n          <p class=\"text-xs text-neutral-500 dark:text-neutral-500 mt-1\">\r\n            После создания архива начнется автоматическая загрузка.\r\n          </p>\r\n        </div>\r\n\r\n        <!-- Progress -->\r\n        <div v-if=\"isProcessing\" class=\"space-y-2\">\r\n          <div class=\"flex items-center justify-between text-sm\">\r\n            <span class=\"text-neutral-600 dark:text-neutral-600\">{{ progressMessage }}</span>\r\n            <span v-if=\"progressPercent > 0\" class=\"text-neutral-900 dark:text-neutral-900 font-medium\">\r\n              {{ progressPercent }}%\r\n            </span>\r\n          </div>\r\n          <div class=\"w-full bg-neutral-200 dark:bg-neutral-200 rounded-full h-2\">\r\n            <div\r\n              class=\"bg-primary-500 h-2 rounded-full transition-all duration-300\"\r\n              :style=\"{ width: `${progressPercent}%` }\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Download Link (when ready) -->\r\n        <div v-if=\"downloadUrl\" class=\"p-3 bg-primary-50 dark:bg-primary-50 rounded-md\">\r\n          <p class=\"text-sm text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Архив готов к скачиванию!\r\n          </p>\r\n          <Button\r\n            variant=\"primary\"\r\n            size=\"sm\"\r\n            @click=\"handleDownload\"\r\n            class=\"w-full\"\r\n          >\r\n            <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n              />\r\n            </svg>\r\n            Скачать архив\r\n          </Button>\r\n        </div>\r\n\r\n        <!-- Error Display -->\r\n        <div v-if=\"error\" class=\"p-3 bg-error-50 dark:bg-error-50 rounded-md\">\r\n          <p class=\"text-sm font-medium text-error\">{{ error }}</p>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n    <template #footer>\r\n      <div class=\"flex justify-end gap-2\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"md\"\r\n          @click=\"$emit('close')\"\r\n          :disabled=\"isProcessing && !downloadUrl\"\r\n        >\r\n          {{ downloadUrl ? 'Закрыть' : 'Отмена' }}\r\n        </Button>\r\n        <Button\r\n          v-if=\"!downloadUrl\"\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n          @click=\"handleStartDownload\"\r\n          :disabled=\"isProcessing\"\r\n        >\r\n          <span v-if=\"!isProcessing\">Создать архив</span>\r\n          <span v-else>Создание...</span>\r\n        </Button>\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue'\r\nimport Modal from '@/components/Common/Modal.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\nimport { assetService } from '@/services/assetService'\r\nimport { formatApiError } from '@/utils/errors'\r\n\r\ninterface Props {\r\n  isOpen: boolean\r\n  selectedIds: number[]\r\n}\r\n\r\nconst props = defineProps<Props>()\r\n\r\nconst emit = defineEmits<{\r\n  close: []\r\n  success: []\r\n}>()\r\n\r\nconst format = ref<'zip' | 'tar'>('zip')\r\nconst includeMetadata = ref(true)\r\nconst preserveStructure = ref(false)\r\nconst isProcessing = ref(false)\r\nconst progressPercent = ref(0)\r\nconst progressMessage = ref('')\r\nconst downloadUrl = ref<string | null>(null)\r\nconst error = ref<string | null>(null)\r\n\r\nconst selectedCount = computed(() => props.selectedIds.length)\r\n\r\n// Reset on open\r\nwatch(\r\n  () => props.isOpen,\r\n  (isOpen) => {\r\n    if (isOpen) {\r\n      format.value = 'zip'\r\n      includeMetadata.value = true\r\n      preserveStructure.value = false\r\n      isProcessing.value = false\r\n      progressPercent.value = 0\r\n      progressMessage.value = ''\r\n      downloadUrl.value = null\r\n      error.value = null\r\n    }\r\n  }\r\n)\r\n\r\nasync function handleStartDownload() {\r\n  isProcessing.value = true\r\n  progressPercent.value = 0\r\n  progressMessage.value = 'Создание архива...'\r\n  error.value = null\r\n\r\n  try {\r\n    const result = await assetService.bulkOperation({\r\n      ids: props.selectedIds,\r\n      action: 'export',\r\n      data: {\r\n        format: format.value,\r\n        include_metadata: includeMetadata.value,\r\n        preserve_structure: preserveStructure.value\r\n      }\r\n    })\r\n\r\n    if (result.success) {\r\n      progressPercent.value = 100\r\n      progressMessage.value = 'Архив создан!'\r\n      // In real implementation, downloadUrl would come from API response\r\n      // For now, simulate with a placeholder\r\n      downloadUrl.value = `/api/v4/dam/assets/export/${result.updated}/download/`\r\n      emit('success')\r\n    } else {\r\n      error.value = 'Не удалось создать архив'\r\n    }\r\n  } catch (err) {\r\n    error.value = formatApiError(err)\r\n  } finally {\r\n    isProcessing.value = false\r\n  }\r\n}\r\n\r\nfunction handleDownload() {\r\n  if (downloadUrl.value) {\r\n    window.open(downloadUrl.value, '_blank')\r\n    emit('close')\r\n  }\r\n}\r\n</script>\r\n\r\n","<template>\r\n  <Modal\r\n    :is-open=\"isOpen\"\r\n    size=\"md\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <template #header>\r\n      <h2 class=\"text-lg font-semibold text-neutral-900 dark:text-neutral-900\">\r\n        Поделиться активами\r\n      </h2>\r\n    </template>\r\n\r\n    <template #default>\r\n      <div class=\"space-y-4\">\r\n        <!-- Share Type -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Тип доступа\r\n          </label>\r\n          <select\r\n            v-model=\"shareType\"\r\n            class=\"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n          >\r\n            <option value=\"link\">Публичная ссылка</option>\r\n            <option value=\"users\">Конкретные пользователи</option>\r\n            <option value=\"team\">Команда</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Permissions -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Права доступа\r\n          </label>\r\n          <div class=\"space-y-2\">\r\n            <label class=\"flex items-center gap-2 cursor-pointer\">\r\n              <input\r\n                v-model=\"permissions\"\r\n                type=\"checkbox\"\r\n                value=\"view\"\r\n                class=\"w-4 h-4 rounded border-neutral-300 text-primary-500 focus:ring-primary-500\"\r\n              />\r\n              <span class=\"text-sm text-neutral-700 dark:text-neutral-700\">Просмотр</span>\r\n            </label>\r\n            <label class=\"flex items-center gap-2 cursor-pointer\">\r\n              <input\r\n                v-model=\"permissions\"\r\n                type=\"checkbox\"\r\n                value=\"download\"\r\n                class=\"w-4 h-4 rounded border-neutral-300 text-primary-500 focus:ring-primary-500\"\r\n              />\r\n              <span class=\"text-sm text-neutral-700 dark:text-neutral-700\">Скачивание</span>\r\n            </label>\r\n            <label class=\"flex items-center gap-2 cursor-pointer\">\r\n              <input\r\n                v-model=\"permissions\"\r\n                type=\"checkbox\"\r\n                value=\"comment\"\r\n                class=\"w-4 h-4 rounded border-neutral-300 text-primary-500 focus:ring-primary-500\"\r\n              />\r\n              <span class=\"text-sm text-neutral-700 dark:text-neutral-700\">Комментирование</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Expiration -->\r\n        <div>\r\n          <label class=\"flex items-center gap-2 cursor-pointer\">\r\n            <input\r\n              v-model=\"hasExpiration\"\r\n              type=\"checkbox\"\r\n              class=\"w-4 h-4 rounded border-neutral-300 text-primary-500 focus:ring-primary-500\"\r\n            />\r\n            <span class=\"text-sm text-neutral-700 dark:text-neutral-700\">Ограничить срок действия</span>\r\n          </label>\r\n          <input\r\n            v-if=\"hasExpiration\"\r\n            v-model=\"expirationDate\"\r\n            type=\"date\"\r\n            :min=\"minDate\"\r\n            class=\"mt-2 w-full px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Password Protection -->\r\n        <div>\r\n          <label class=\"flex items-center gap-2 cursor-pointer\">\r\n            <input\r\n              v-model=\"hasPassword\"\r\n              type=\"checkbox\"\r\n              class=\"w-4 h-4 rounded border-neutral-300 text-primary-500 focus:ring-primary-500\"\r\n            />\r\n            <span class=\"text-sm text-neutral-700 dark:text-neutral-700\">Защитить паролем</span>\r\n          </label>\r\n          <input\r\n            v-if=\"hasPassword\"\r\n            v-model=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Введите пароль\"\r\n            class=\"mt-2 w-full px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Generated Link (after sharing) -->\r\n        <div v-if=\"shareLink\" class=\"p-3 bg-primary-50 dark:bg-primary-50 rounded-md\">\r\n          <p class=\"text-sm font-medium text-neutral-900 dark:text-neutral-900 mb-2\">\r\n            Ссылка создана:\r\n          </p>\r\n          <div class=\"flex items-center gap-2\">\r\n            <input\r\n              :value=\"shareLink\"\r\n              type=\"text\"\r\n              readonly\r\n              class=\"flex-1 px-3 py-2 border border-neutral-300 dark:border-neutral-300 rounded-md text-sm bg-neutral-0 dark:bg-neutral-0 text-neutral-900 dark:text-neutral-900\"\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              @click=\"copyLink\"\r\n            >\r\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                  stroke-width=\"2\"\r\n                  d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"\r\n                />\r\n              </svg>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Info -->\r\n        <div class=\"p-3 bg-neutral-50 dark:bg-neutral-50 rounded-md\">\r\n          <p class=\"text-sm text-neutral-600 dark:text-neutral-600\">\r\n            <strong>{{ selectedCount }}</strong> активов будет доступно по созданной ссылке.\r\n          </p>\r\n        </div>\r\n\r\n        <!-- Error Display -->\r\n        <div v-if=\"error\" class=\"p-3 bg-error-50 dark:bg-error-50 rounded-md\">\r\n          <p class=\"text-sm font-medium text-error\">{{ error }}</p>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n    <template #footer>\r\n      <div class=\"flex justify-end gap-2\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"md\"\r\n          @click=\"$emit('close')\"\r\n          :disabled=\"isProcessing\"\r\n        >\r\n          {{ shareLink ? 'Закрыть' : 'Отмена' }}\r\n        </Button>\r\n        <Button\r\n          v-if=\"!shareLink\"\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n          @click=\"handleShare\"\r\n          :disabled=\"permissions.length === 0 || isProcessing\"\r\n        >\r\n          <span v-if=\"!isProcessing\">Создать ссылку</span>\r\n          <span v-else>Создание...</span>\r\n        </Button>\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue'\r\nimport Modal from '@/components/Common/Modal.vue'\r\nimport Button from '@/components/Common/Button.vue'\r\nimport { assetService } from '@/services/assetService'\r\nimport { formatApiError } from '@/utils/errors'\r\n\r\ninterface Props {\r\n  isOpen: boolean\r\n  selectedIds: number[]\r\n}\r\n\r\nconst props = defineProps<Props>()\r\n\r\nconst emit = defineEmits<{\r\n  close: []\r\n  success: [shareLink: string]\r\n}>()\r\n\r\nconst shareType = ref<'link' | 'users' | 'team'>('link')\r\nconst permissions = ref<string[]>(['view'])\r\nconst hasExpiration = ref(false)\r\nconst expirationDate = ref('')\r\nconst hasPassword = ref(false)\r\nconst password = ref('')\r\nconst isProcessing = ref(false)\r\nconst shareLink = ref<string | null>(null)\r\nconst error = ref<string | null>(null)\r\n\r\nconst selectedCount = computed(() => props.selectedIds.length)\r\nconst minDate = computed(() => {\r\n  const tomorrow = new Date()\r\n  tomorrow.setDate(tomorrow.getDate() + 1)\r\n  return tomorrow.toISOString().split('T')[0]\r\n})\r\n\r\n// Reset on open\r\nwatch(\r\n  () => props.isOpen,\r\n  (isOpen) => {\r\n    if (isOpen) {\r\n      shareType.value = 'link'\r\n      permissions.value = ['view']\r\n      hasExpiration.value = false\r\n      expirationDate.value = ''\r\n      hasPassword.value = false\r\n      password.value = ''\r\n      isProcessing.value = false\r\n      shareLink.value = null\r\n      error.value = null\r\n    }\r\n  }\r\n)\r\n\r\nasync function handleShare() {\r\n  if (permissions.value.length === 0) return\r\n\r\n  isProcessing.value = true\r\n  error.value = null\r\n\r\n  try {\r\n    // In real implementation, this would call a share API endpoint\r\n    // For now, simulate with bulkOperation\r\n    const result = await assetService.bulkOperation({\r\n      ids: props.selectedIds,\r\n      action: 'export', // Placeholder - would be 'share' in real API\r\n      data: {\r\n        share_type: shareType.value,\r\n        permissions: permissions.value,\r\n        expiration_date: hasExpiration.value ? expirationDate.value : null,\r\n        password: hasPassword.value ? password.value : null\r\n      }\r\n    })\r\n\r\n    if (result.success) {\r\n      // Generate share link (in real implementation, this would come from API)\r\n      const baseUrl = window.location.origin\r\n      shareLink.value = `${baseUrl}/share/${Date.now()}`\r\n      emit('success', shareLink.value)\r\n    } else {\r\n      error.value = 'Не удалось создать ссылку'\r\n    }\r\n  } catch (err) {\r\n    error.value = formatApiError(err)\r\n  } finally {\r\n    isProcessing.value = false\r\n  }\r\n}\r\n\r\nfunction copyLink() {\r\n  if (shareLink.value) {\r\n    navigator.clipboard.writeText(shareLink.value)\r\n    // Show toast notification (would use toast service in real implementation)\r\n    alert('Ссылка скопирована в буфер обмена')\r\n  }\r\n}\r\n</script>\r\n\r\n","<template>\n  <div class=\"gallery-view\">\n    <!-- Loading State -->\n    <div v-if=\"assetStore.isLoading && assetStore.assets.length === 0\" class=\"p-8\">\n      <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n        <div\n          v-for=\"i in 8\"\n          :key=\"i\"\n          class=\"bg-neutral-100 dark:bg-neutral-100 rounded-lg animate-pulse\"\n          style=\"height: 260px\"\n        ></div>\n      </div>\n    </div>\n\n    <!-- Error State -->\n    <div\n      v-else-if=\"assetStore.error && assetStore.assets.length === 0\"\n      class=\"p-8 text-center\"\n    >\n      <div class=\"max-w-md mx-auto\">\n        <svg\n          class=\"mx-auto h-12 w-12 text-error\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n          />\n        </svg>\n        <h3 class=\"mt-4 text-lg font-medium text-neutral-900 dark:text-neutral-900\">\n          Ошибка загрузки\n        </h3>\n        <p class=\"mt-2 text-sm text-neutral-600 dark:text-neutral-600\">\n          {{ assetStore.error }}\n        </p>\n        <button\n          class=\"mt-4 px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 transition-colors min-h-[44px] min-w-[120px]\"\n          @click=\"handleRetry\"\n          type=\"button\"\n          aria-label=\"Повторить загрузку активов\"\n        >\n          Попробовать снова\n        </button>\n      </div>\n    </div>\n\n    <!-- Empty State -->\n    <div\n      v-else-if=\"assetStore.assets.length === 0 && !assetStore.isLoading\"\n      class=\"p-8 text-center\"\n    >\n      <div class=\"max-w-md mx-auto\">\n        <svg\n          class=\"mx-auto h-12 w-12 text-neutral-400\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n          />\n        </svg>\n        <h3 class=\"mt-4 text-lg font-medium text-neutral-900 dark:text-neutral-900\">\n          Нет активов\n        </h3>\n        <p class=\"mt-2 text-sm text-neutral-600 dark:text-neutral-600\">\n          Загрузите первый актив, чтобы начать работу\n        </p>\n      </div>\n    </div>\n\n    <!-- Gallery Grid -->\n    <div v-else class=\"gallery-content\">\n      <!-- Gallery Toolbar with Select All -->\n      <div\n        v-if=\"assetStore.assets.length > 0\"\n        class=\"flex items-center justify-between px-4 py-2 border-b border-neutral-300 dark:border-neutral-300 bg-neutral-0 dark:bg-neutral-0 sticky top-0 z-30\"\n      >\n        <div class=\"flex items-center gap-4\">\n          <label class=\"flex items-center gap-2 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              :checked=\"isAllSelected\"\n              :indeterminate=\"isIndeterminate\"\n              class=\"w-5 h-5 rounded border-neutral-300 text-primary-500 focus:ring-primary-500 min-w-[44px] min-h-[44px]\"\n              @change=\"handleSelectAllToggle\"\n              aria-label=\"Выбрать все активы\"\n            />\n            <span class=\"text-sm font-medium text-neutral-900 dark:text-neutral-900\">\n              {{ isAllSelected ? 'Снять выделение' : 'Выбрать все' }}\n            </span>\n          </label>\n          <span\n            v-if=\"assetStore.selectedCount > 0\"\n            class=\"text-sm text-neutral-600 dark:text-neutral-600\"\n          >\n            Выбрано: <strong>{{ assetStore.selectedCount }}</strong> из {{ assetStore.assets.length }}\n          </span>\n        </div>\n      </div>\n\n      <!-- Bulk Actions Toolbar -->\n      <BulkActions\n        :selected-count=\"assetStore.selectedCount\"\n        @tag=\"handleBulkTag\"\n        @move=\"handleBulkMove\"\n        @download=\"handleBulkDownload\"\n        @share=\"handleBulkShare\"\n        @delete=\"handleBulkDelete\"\n        @clear-selection=\"handleClearSelection\"\n      />\n\n      <!-- Assets Grid (regular for small lists) -->\n      <div\n        v-if=\"assetStore.assets.length < 100\"\n        class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-4\"\n        role=\"grid\"\n        aria-label=\"Галерея активов\"\n      >\n        <AssetCard\n          v-for=\"asset in assetStore.assets\"\n          :key=\"asset.id\"\n          :asset=\"asset\"\n          :is-selected=\"isAssetSelected(asset)\"\n          :show-checkbox=\"true\"\n          @select=\"handleAssetSelect\"\n          @open=\"handleAssetOpen\"\n          @preview=\"handleAssetPreview\"\n          @download=\"handleAssetDownload\"\n          @more=\"handleAssetMore\"\n        />\n      </div>\n\n      <!-- Virtual Scrolling for large lists (100+ items) -->\n      <div\n        v-else\n        ref=\"virtualScrollContainer\"\n        class=\"virtual-scroll-container p-4\"\n        style=\"height: calc(100vh - 200px); overflow-y: auto;\"\n        role=\"grid\"\n        aria-label=\"Галерея активов (виртуальная прокрутка)\"\n        tabindex=\"0\"\n        @scroll=\"handleScroll\"\n      >\n        <div\n          :style=\"{ height: `${totalHeight}px`, position: 'relative' }\"\n        >\n          <div\n            :style=\"{ transform: `translateY(${offsetY}px)` }\"\n          >\n            <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n              <AssetCard\n                v-for=\"asset in visibleAssets\"\n                :key=\"asset.id\"\n                :asset=\"asset\"\n                :is-selected=\"isAssetSelected(asset)\"\n                :show-checkbox=\"true\"\n                @select=\"handleAssetSelect\"\n                @open=\"handleAssetOpen\"\n                @preview=\"handleAssetPreview\"\n                @download=\"handleAssetDownload\"\n                @more=\"handleAssetMore\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Pagination -->\n      <Pagination\n        v-if=\"assetStore.totalCount > 0\"\n        :current-page=\"assetStore.currentPage\"\n        :total-items=\"assetStore.totalCount\"\n        :page-size=\"assetStore.pageSize\"\n        @page-change=\"handlePageChange\"\n        class=\"mb-20\"\n      />\n    </div>\n\n    <!-- Bulk Operation Modals -->\n    <BulkTagModal\n      :is-open=\"showBulkTagModal\"\n      :selected-ids=\"selectedAssetIds\"\n      @close=\"showBulkTagModal = false\"\n      @success=\"handleBulkOperationSuccess\"\n    />\n    <BulkMoveModal\n      :is-open=\"showBulkMoveModal\"\n      :selected-ids=\"selectedAssetIds\"\n      @close=\"showBulkMoveModal = false\"\n      @success=\"handleBulkOperationSuccess\"\n    />\n    <BulkDeleteModal\n      :is-open=\"showBulkDeleteModal\"\n      :selected-ids=\"selectedAssetIds\"\n      @close=\"showBulkDeleteModal = false\"\n      @success=\"handleBulkOperationSuccess\"\n    />\n    <BulkDownloadModal\n      :is-open=\"showBulkDownloadModal\"\n      :selected-ids=\"selectedAssetIds\"\n      @close=\"showBulkDownloadModal = false\"\n      @success=\"handleBulkOperationSuccess\"\n    />\n    <BulkShareModal\n      :is-open=\"showBulkShareModal\"\n      :selected-ids=\"selectedAssetIds\"\n      @close=\"showBulkShareModal = false\"\n      @success=\"handleBulkOperationSuccess\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, onUnmounted, watch, ref, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAssetStore } from '@/stores/assetStore'\nimport AssetCard from './AssetCard.vue'\nimport BulkActions from './BulkActions.vue'\nimport BulkTagModal from './BulkTagModal.vue'\nimport BulkMoveModal from './BulkMoveModal.vue'\nimport BulkDeleteModal from './BulkDeleteModal.vue'\nimport BulkDownloadModal from './BulkDownloadModal.vue'\nimport BulkShareModal from './BulkShareModal.vue'\nimport Pagination from '@/components/Common/Pagination.vue'\nimport type { Asset } from '@/types/api'\n\nconst router = useRouter()\nconst assetStore = useAssetStore()\nconst virtualScrollContainer = ref<HTMLElement | null>(null)\n\n// Virtual scrolling state\nconst scrollTop = ref(0)\nconst itemHeight = 280 // Height of each asset card + gap\nconst itemsPerRow = ref(4) // Will be calculated based on screen size\nconst containerHeight = ref(600)\nconst bufferSize = 2 // Number of rows to render outside viewport\n\n// Calculate visible items for virtual scrolling\nconst visibleAssets = computed(() => {\n  if (assetStore.assets.length < 100) {\n    return assetStore.assets\n  }\n\n  const rowsPerViewport = Math.ceil(containerHeight.value / itemHeight)\n  const startRow = Math.max(0, Math.floor(scrollTop.value / itemHeight) - bufferSize)\n  const endRow = Math.min(\n    Math.ceil(assetStore.assets.length / itemsPerRow.value),\n    startRow + rowsPerViewport + bufferSize * 2\n  )\n  \n  const startIndex = startRow * itemsPerRow.value\n  const endIndex = endRow * itemsPerRow.value\n\n  return assetStore.assets.slice(\n    Math.max(0, startIndex),\n    Math.min(assetStore.assets.length, endIndex)\n  )\n})\n\nconst totalHeight = computed(() => {\n  if (assetStore.assets.length < 100) return 0\n  const rows = Math.ceil(assetStore.assets.length / itemsPerRow.value)\n  return rows * itemHeight\n})\n\nconst offsetY = computed(() => {\n  if (assetStore.assets.length < 100) return 0\n  const startRow = Math.max(0, Math.floor(scrollTop.value / itemHeight) - bufferSize)\n  return startRow * itemHeight\n})\n\n// Handle scroll for virtual scrolling (throttled for performance)\nlet scrollTimeout: number | null = null\nfunction handleScroll(event: Event) {\n  const target = event.target as HTMLElement\n  scrollTop.value = target.scrollTop\n  \n  // Throttle scroll updates for better performance\n  if (scrollTimeout) {\n    cancelAnimationFrame(scrollTimeout)\n  }\n  scrollTimeout = requestAnimationFrame(() => {\n    // Scroll position already updated above\n  })\n}\n\n// Load assets on mount and setup virtual scrolling\nlet resizeHandler: (() => void) | null = null\n\nonMounted(() => {\n  // Load assets\n  if (assetStore.assets.length === 0) {\n    assetStore.fetchAssets()\n  }\n\n  // Setup virtual scrolling\n  if (virtualScrollContainer.value) {\n    // Calculate items per row based on container width\n    const updateItemsPerRow = () => {\n      if (virtualScrollContainer.value) {\n        const width = virtualScrollContainer.value.clientWidth\n        // Responsive breakpoints: xl(1280px), lg(1024px), md(768px), sm(640px)\n        if (width >= 1280) itemsPerRow.value = 5\n        else if (width >= 1024) itemsPerRow.value = 4\n        else if (width >= 768) itemsPerRow.value = 3\n        else if (width >= 640) itemsPerRow.value = 2\n        else itemsPerRow.value = 1\n        \n        // Update container height for virtual scrolling calculations\n        containerHeight.value = virtualScrollContainer.value.clientHeight || 600\n      }\n    }\n    \n    updateItemsPerRow()\n    resizeHandler = () => {\n      updateItemsPerRow()\n      // Debounce resize for better performance\n      if (scrollTimeout) {\n        cancelAnimationFrame(scrollTimeout)\n      }\n      scrollTimeout = requestAnimationFrame(updateItemsPerRow)\n    }\n    window.addEventListener('resize', resizeHandler, { passive: true })\n  }\n})\n\nonUnmounted(() => {\n  if (virtualScrollContainer.value) {\n    virtualScrollContainer.value.removeEventListener('scroll', handleScroll)\n  }\n  if (resizeHandler) {\n    window.removeEventListener('resize', resizeHandler)\n  }\n  if (scrollTimeout) {\n    cancelAnimationFrame(scrollTimeout)\n  }\n})\n\n// Watch for page changes\nwatch(\n  () => assetStore.currentPage,\n  () => {\n    assetStore.fetchAssets()\n  }\n)\n\nfunction isAssetSelected(asset: Asset): boolean {\n  return assetStore.selectedAssets.some((a) => a.id === asset.id)\n}\n\nconst isAllSelected = computed(() => {\n  return (\n    assetStore.assets.length > 0 &&\n    assetStore.selectedAssets.length === assetStore.assets.length\n  )\n})\n\nconst isIndeterminate = computed(() => {\n  return (\n    assetStore.selectedAssets.length > 0 &&\n    assetStore.selectedAssets.length < assetStore.assets.length\n  )\n})\n\nfunction handleSelectAllToggle() {\n  if (isAllSelected.value) {\n    assetStore.clearSelection()\n  } else {\n    assetStore.selectAll()\n  }\n}\n\nfunction handleAssetSelect(asset: Asset) {\n  assetStore.selectAsset(asset, true) // Multi-select enabled\n}\n\nfunction handleAssetOpen(asset: Asset) {\n  router.push(`/dam/assets/${asset.id}`)\n}\n\nfunction handleAssetPreview(asset: Asset) {\n  // TODO: Open preview modal\n  console.log('Preview asset:', asset.id)\n}\n\nfunction handleAssetDownload(asset: Asset) {\n  // TODO: Implement download\n  console.log('Download asset:', asset.id)\n}\n\nfunction handleAssetMore(asset: Asset) {\n  // TODO: Open more actions menu\n  console.log('More actions for asset:', asset.id)\n}\n\nfunction handlePageChange(page: number) {\n  assetStore.setPage(page)\n}\n\nfunction handleRetry() {\n  assetStore.fetchAssets()\n}\n\n// Bulk Operations\nconst showBulkTagModal = ref(false)\nconst showBulkMoveModal = ref(false)\nconst showBulkDeleteModal = ref(false)\nconst showBulkDownloadModal = ref(false)\nconst showBulkShareModal = ref(false)\n\nconst selectedAssetIds = computed(() => assetStore.selectedAssets.map((a) => a.id))\n\nfunction handleBulkTag() {\n  showBulkTagModal.value = true\n}\n\nfunction handleBulkMove() {\n  showBulkMoveModal.value = true\n}\n\nfunction handleBulkDelete() {\n  showBulkDeleteModal.value = true\n}\n\nfunction handleBulkDownload() {\n  showBulkDownloadModal.value = true\n}\n\nfunction handleBulkShare() {\n  showBulkShareModal.value = true\n}\n\nfunction handleClearSelection() {\n  assetStore.clearSelection()\n}\n\nfunction handleBulkOperationSuccess() {\n  // Refresh assets after bulk operation\n  assetStore.fetchAssets()\n  assetStore.clearSelection()\n}\n</script>\n\n<style scoped>\n.gallery-view {\n  min-height: 400px;\n}\n\n.gallery-content {\n  display: flex;\n  flex-direction: column;\n  min-height: 400px;\n}\n</style>\n\n","<template>\r\n  <div class=\"dam-page\">\r\n    <GalleryView />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport GalleryView from '@/components/DAM/GalleryView.vue'\r\n</script>\r\n\r\n<style scoped>\r\n.dam-page {\r\n  width: 100%;\r\n  min-height: 100vh;\r\n}\r\n</style>\r\n\r\n"],"names":["_createBlock","_Transition","__props","selectedCount","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","class","onClick","$emit","type","_hoisted_7","_createVNode","Button","variant","size","_cache","fill","stroke","viewBox","d","props","emit","__emit","operation","ref","tags","isProcessing","processedCount","errors","computed","selectedIds","length","handleApply","__async","this","value","action","data","replace","result","assetService","bulkOperation","ids","success","updated","map","e","id","error","failed","setTimeout","err","formatApiError","watch","isOpen","Modal","onClose","header","default","$event","TagInput","suggestions","tagSuggestions","placeholder","style","_normalizeStyle","width","_hoisted_8","_hoisted_9","_Fragment","_renderList","index","key","footer","_hoisted_10","disabled","selectedCollection","showNewCollectionInput","newCollectionName","createAndSelectCollection","trim","handleMove","collectionId","collection_id","collections","collection","name","onKeydown","_hoisted_11","confirmed","handleDelete","for","_hoisted_12","format","includeMetadata","preserveStructure","progressPercent","progressMessage","downloadUrl","handleStartDownload","include_metadata","preserve_structure","handleDownload","window","open","_hoisted_13","_hoisted_14","_hoisted_15","shareType","permissions","hasExpiration","expirationDate","hasPassword","password","shareLink","minDate","tomorrow","Date","setDate","getDate","toISOString","split","handleShare","share_type","expiration_date","baseUrl","location","origin","now","copyLink","navigator","clipboard","writeText","alert","min","readonly","_hoisted_16","itemHeight","router","useRouter","assetStore","useAssetStore","virtualScrollContainer","scrollTop","itemsPerRow","containerHeight","visibleAssets","assets","rowsPerViewport","Math","ceil","startRow","max","floor","endRow","bufferSize","startIndex","endIndex","slice","totalHeight","offsetY","scrollTimeout","handleScroll","event","target","cancelAnimationFrame","requestAnimationFrame","resizeHandler","isAssetSelected","asset","selectedAssets","some","a","onMounted","fetchAssets","updateItemsPerRow","clientWidth","clientHeight","addEventListener","passive","onUnmounted","removeEventListener","currentPage","isAllSelected","isIndeterminate","handleSelectAllToggle","clearSelection","selectAll","handleAssetSelect","selectAsset","handleAssetOpen","push","handleAssetPreview","handleAssetDownload","handleAssetMore","handlePageChange","page","setPage","handleRetry","showBulkTagModal","showBulkMoveModal","showBulkDeleteModal","showBulkDownloadModal","showBulkShareModal","selectedAssetIds","handleBulkTag","handleBulkMove","handleBulkDelete","handleBulkDownload","handleBulkShare","handleClearSelection","handleBulkOperationSuccess","_unref","isLoading","i","height","checked","indeterminate","onChange","_createTextVNode","BulkActions","onTag","onMove","onDownload","onShare","onDelete","onClearSelection","AssetCard","onSelect","onOpen","onPreview","onMore","role","tabindex","onScroll","position","totalCount","Pagination","pageSize","onPageChange","BulkTagModal","onSuccess","BulkMoveModal","BulkDeleteModal","BulkDownloadModal","BulkShareModal","GalleryView"],"mappings":"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"}