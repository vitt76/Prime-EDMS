{% extends "appearance/base.html" %}

{% load i18n static %}

{% block title %}{% trans "Мои публикации" %}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <i class="fa fa-user text-primary"></i>
                        {% trans "Мои публикации" %}
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12">
                            <a href="#" class="btn btn-primary pull-right">
                                <i class="fa fa-plus"></i>
                                {% trans "Создать публикацию" %}
                            </a>
                        </div>
                    </div>

                    {% if publications %}
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>{% trans "Название" %}</th>
                                        <th>{% trans "Описание" %}</th>
                                        <th>{% trans "Документов" %}</th>
                                        <th>{% trans "Создано" %}</th>
                                        <th>{% trans "Статус" %}</th>
                                        <th>{% trans "Действия" %}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for publication in publications %}
                                        <tr>
                                            <td>
                                                <strong>{{ publication.title }}</strong>
                                            </td>
                                            <td>
                                                {{ publication.description|truncatechars:50|default:"—" }}
                                            </td>
                                            <td>
                                                {{ publication.items.count }}
                                            </td>
                                            <td>
                                                {{ publication.created|date:"d.m.Y H:i" }}
                                            </td>
                                            <td>
                                                <span class="label label-success">{% trans "Активна" %}</span>
                                            </td>
                                            <td>
                                                <div class="btn-group">
                                                    <a href="{% url 'distribution:publication_detail' publication.pk %}" class="btn btn-xs btn-primary">
                                                        <i class="fa fa-eye"></i>
                                                    </a>
                                                    <a href="#" class="btn btn-xs btn-warning" title="{% trans 'Управление ссылками' %}">
                                                        <i class="fa fa-link"></i>
                                                    </a>
                                                    <a href="#" class="btn btn-xs btn-danger" title="{% trans 'Удалить' %}">
                                                        <i class="fa fa-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                        {% if is_paginated %}
                            <div class="text-center">
                                <ul class="pagination">
                                    {% if page_obj.has_previous %}
                                        <li><a href="?page={{ page_obj.previous_page_number }}">&laquo;</a></li>
                                    {% endif %}

                                    {% for page_num in paginator.page_range %}
                                        <li class="{% if page_obj.number == page_num %}active{% endif %}">
                                            <a href="?page={{ page_num }}">{{ page_num }}</a>
                                        </li>
                                    {% endfor %}

                                    {% if page_obj.has_next %}
                                        <li><a href="?page={{ page_obj.next_page_number }}">&raquo;</a></li>
                                    {% endif %}
                                </ul>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="alert alert-info text-center">
                            <i class="fa fa-info-circle fa-3x"></i>
                            <h4>{% trans "У вас пока нет публикаций" %}</h4>
                            <p>{% trans "Создайте свою первую публикацию, чтобы начать делиться материалами." %}</p>
                            <a href="#" class="btn btn-primary btn-lg">
                                <i class="fa fa-plus"></i>
                                {% trans "Создать первую публикацию" %}
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

